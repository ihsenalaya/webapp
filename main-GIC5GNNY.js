import{a as m,b as A,c as Un,d as Ut,e as Pl,f as h}from"./chunk-42NE2CY3.js";var gh;function xl(){return gh}function hn(n){let e=gh;return gh=n,e}var Qy=Symbol("NotFound");function Ri(n){return n===Qy||n?.name==="\u0275NotFound"}var Xe=null,Ll=!1,mh=1,Ow=null,mt=Symbol("SIGNAL");function Y(n){let e=Xe;return Xe=n,e}function Ul(){return Xe}var la={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function ua(n){if(Ll)throw new Error("");if(Xe===null)return;Xe.consumerOnSignalRead(n);let e=Xe.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=Xe.recomputing;if(r&&(t=e!==void 0?e.nextProducer:Xe.producers,t!==void 0&&t.producer===n)){Xe.producersTail=t,t.lastReadVersion=n.version;return}let o=n.consumersTail;if(o!==void 0&&o.consumer===Xe&&(!r||xw(o,Xe)))return;let i=Mi(Xe),s={producer:n,consumer:Xe,nextProducer:t,prevConsumer:o,lastReadVersion:n.version,nextConsumer:void 0};Xe.producersTail=s,e!==void 0?e.nextProducer=s:Xe.producers=s,i&&ev(n,s)}function Jy(){mh++}function yh(n){if(!(Mi(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===mh)){if(!n.producerMustRecompute(n)&&!fa(n)){Fl(n);return}n.producerRecomputeValue(n),Fl(n)}}function vh(n){if(n.consumers===void 0)return;let e=Ll;Ll=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||Pw(r)}}finally{Ll=e}}function Ch(){return Xe?.consumerAllowSignalWrites!==!1}function Pw(n){n.dirty=!0,vh(n),n.consumerMarkedDirty?.(n)}function Fl(n){n.dirty=!1,n.lastCleanEpoch=mh}function da(n){return n&&Zy(n),Y(n)}function Zy(n){n.producersTail=void 0,n.recomputing=!0}function Hl(n,e){Y(e),n&&Xy(n)}function Xy(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(Mi(n))do t=Eh(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function fa(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(yh(t),r!==t.version))return!0}return!1}function ha(n){if(Mi(n)){let e=n.producers;for(;e!==void 0;)e=Eh(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function ev(n,e){let t=n.consumersTail,r=Mi(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let o=n.producers;o!==void 0;o=o.nextProducer)ev(o.producer,o)}function Eh(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,o=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=o:e.consumersTail=o,o!==void 0)o.nextConsumer=r;else if(e.consumers=r,!Mi(e)){let i=e.producers;for(;i!==void 0;)i=Eh(i)}return t}function Mi(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function Ih(n){Ow?.(n)}function xw(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function Th(n,e){return Object.is(n,e)}function Lw(){throw new Error}var tv=Lw;function nv(n){tv(n)}function Sh(n){tv=n}var Fw=null;function wh(n,e){let t=Object.create(Bl);t.value=n,e!==void 0&&(t.equal=e);let r=()=>rv(t);return r[mt]=t,Ih(t),[r,s=>Ni(t,s),s=>Ah(t,s)]}function rv(n){return ua(n),n.value}function Ni(n,e){Ch()||nv(n),n.equal(n.value,e)||(n.value=e,Uw(n))}function Ah(n,e){Ch()||nv(n),Ni(n,e(n.value))}var Bl=A(m({},la),{equal:Th,value:void 0,kind:"signal"});function Uw(n){n.version++,Jy(),vh(n),Fw?.(n)}function z(n){return typeof n=="function"}function ki(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var jl=ki(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,o)=>`${o+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function pa(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Me=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let i of t)i.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(z(r))try{r()}catch(i){e=i instanceof jl?i.errors:[i]}let{_finalizers:o}=this;if(o){this._finalizers=null;for(let i of o)try{ov(i)}catch(s){e=e??[],s instanceof jl?e=[...e,...s.errors]:e.push(s)}}if(e)throw new jl(e)}}add(e){var t;if(e&&e!==this)if(this.closed)ov(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&pa(t,e)}remove(e){let{_finalizers:t}=this;t&&pa(t,e),e instanceof n&&e._removeParent(this)}};Me.EMPTY=(()=>{let n=new Me;return n.closed=!0,n})();var _h=Me.EMPTY;function Vl(n){return n instanceof Me||n&&"closed"in n&&z(n.remove)&&z(n.add)&&z(n.unsubscribe)}function ov(n){z(n)?n():n.unsubscribe()}var Zt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Oi={setTimeout(n,e,...t){let{delegate:r}=Oi;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Oi;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function $l(n){Oi.setTimeout(()=>{let{onUnhandledError:e}=Zt;if(e)e(n);else throw n})}function ga(){}var iv=Dh("C",void 0,void 0);function sv(n){return Dh("E",void 0,n)}function av(n){return Dh("N",n,void 0)}function Dh(n,e,t){return{kind:n,value:e,error:t}}var lo=null;function Pi(n){if(Zt.useDeprecatedSynchronousErrorHandling){let e=!lo;if(e&&(lo={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=lo;if(lo=null,t)throw r}}else n()}function cv(n){Zt.useDeprecatedSynchronousErrorHandling&&lo&&(lo.errorThrown=!0,lo.error=n)}var uo=class extends Me{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Vl(e)&&e.add(this)):this.destination=jw}static create(e,t,r){return new xi(e,t,r)}next(e){this.isStopped?Rh(av(e),this):this._next(e)}error(e){this.isStopped?Rh(sv(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Rh(iv,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Hw=Function.prototype.bind;function bh(n,e){return Hw.call(n,e)}var Mh=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){zl(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){zl(r)}else zl(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){zl(t)}}},xi=class extends uo{constructor(e,t,r){super();let o;if(z(e)||!e)o={next:e??void 0,error:t??void 0,complete:r??void 0};else{let i;this&&Zt.useDeprecatedNextContext?(i=Object.create(e),i.unsubscribe=()=>this.unsubscribe(),o={next:e.next&&bh(e.next,i),error:e.error&&bh(e.error,i),complete:e.complete&&bh(e.complete,i)}):o=e}this.destination=new Mh(o)}};function zl(n){Zt.useDeprecatedSynchronousErrorHandling?cv(n):$l(n)}function Bw(n){throw n}function Rh(n,e){let{onStoppedNotification:t}=Zt;t&&Oi.setTimeout(()=>t(n,e))}var jw={closed:!0,next:ga,error:Bw,complete:ga};var Li=typeof Symbol=="function"&&Symbol.observable||"@@observable";function At(n){return n}function Nh(...n){return kh(n)}function kh(n){return n.length===0?At:n.length===1?n[0]:function(t){return n.reduce((r,o)=>o(r),t)}}var Z=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,o){let i=$w(t)?t:new xi(t,r,o);return Pi(()=>{let{operator:s,source:a}=this;i.add(s?s.call(i,a):a?this._subscribe(i):this._trySubscribe(i))}),i}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=lv(r),new r((o,i)=>{let s=new xi({next:a=>{try{t(a)}catch(c){i(c),s.unsubscribe()}},error:i,complete:o});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Li](){return this}pipe(...t){return kh(t)(this)}toPromise(t){return t=lv(t),new t((r,o)=>{let i;this.subscribe(s=>i=s,s=>o(s),()=>r(i))})}}return n.create=e=>new n(e),n})();function lv(n){var e;return(e=n??Zt.Promise)!==null&&e!==void 0?e:Promise}function Vw(n){return n&&z(n.next)&&z(n.error)&&z(n.complete)}function $w(n){return n&&n instanceof uo||Vw(n)&&Vl(n)}function Oh(n){return z(n?.lift)}function X(n){return e=>{if(Oh(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ee(n,e,t,r,o){return new Ph(n,e,t,r,o)}var Ph=class extends uo{constructor(e,t,r,o,i,s){super(e),this.onFinalize=i,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=o?function(a){try{o(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Fi(){return X((n,e)=>{let t=null;n._refCount++;let r=ee(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let o=n._connection,i=t;t=null,o&&(!i||o===i)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Ui=class extends Z{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Oh(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Me;let t=this.getSubject();e.add(this.source.subscribe(ee(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Me.EMPTY)}return e}refCount(){return Fi()(this)}};var uv=ki(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var we=(()=>{class n extends Z{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Gl(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new uv}next(t){Pi(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Pi(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Pi(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:o,observers:i}=this;return r||o?_h:(this.currentObservers=null,i.push(t),new Me(()=>{this.currentObservers=null,pa(i,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:o,isStopped:i}=this;r?t.error(o):i&&t.complete()}asObservable(){let t=new Z;return t.source=this,t}}return n.create=(e,t)=>new Gl(e,t),n})(),Gl=class extends we{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:_h}};var ve=class extends we{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var xh={now(){return(xh.delegate||Date).now()},delegate:void 0};var ma=class extends we{constructor(e=1/0,t=1/0,r=xh){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:i,_windowTime:s}=this;t||(r.push(e),!o&&r.push(i.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,i=o.slice();for(let s=0;s<i.length&&!e.closed;s+=r?1:2)e.next(i[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,i=(o?1:2)*e;if(e<1/0&&i<r.length&&r.splice(0,r.length-i),!o){let s=t.now(),a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}};var tt=new Z(n=>n.complete());function dv(n){return n&&z(n.schedule)}function fv(n){return n[n.length-1]}function hv(n){return z(fv(n))?n.pop():void 0}function mr(n){return dv(fv(n))?n.pop():void 0}function gv(n,e,t,r){function o(i){return i instanceof t?i:new t(function(s){s(i)})}return new(t||(t=Promise))(function(i,s){function a(u){try{l(r.next(u))}catch(f){s(f)}}function c(u){try{l(r.throw(u))}catch(f){s(f)}}function l(u){u.done?i(u.value):o(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})}function pv(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function fo(n){return this instanceof fo?(this.v=n,this):new fo(n)}function mv(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),o,i=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),o[Symbol.asyncIterator]=function(){return this},o;function s(p){return function(I){return Promise.resolve(I).then(p,f)}}function a(p,I){r[p]&&(o[p]=function(S){return new Promise(function(w,N){i.push([p,S,w,N])>1||c(p,S)})},I&&(o[p]=I(o[p])))}function c(p,I){try{l(r[p](I))}catch(S){g(i[0][3],S)}}function l(p){p.value instanceof fo?Promise.resolve(p.value.v).then(u,f):g(i[0][2],p)}function u(p){c("next",p)}function f(p){c("throw",p)}function g(p,I){p(I),i.shift(),i.length&&c(i[0][0],i[0][1])}}function yv(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof pv=="function"?pv(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(i){t[i]=n[i]&&function(s){return new Promise(function(a,c){s=n[i](s),o(a,c,s.done,s.value)})}}function o(i,s,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},s)}}var ql=n=>n&&typeof n.length=="number"&&typeof n!="function";function Kl(n){return z(n?.then)}function Wl(n){return z(n[Li])}function Yl(n){return Symbol.asyncIterator&&z(n?.[Symbol.asyncIterator])}function Ql(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function zw(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Jl=zw();function Zl(n){return z(n?.[Jl])}function Xl(n){return mv(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:o}=yield fo(t.read());if(o)return yield fo(void 0);yield yield fo(r)}}finally{t.releaseLock()}})}function eu(n){return z(n?.getReader)}function je(n){if(n instanceof Z)return n;if(n!=null){if(Wl(n))return Gw(n);if(ql(n))return qw(n);if(Kl(n))return Kw(n);if(Yl(n))return vv(n);if(Zl(n))return Ww(n);if(eu(n))return Yw(n)}throw Ql(n)}function Gw(n){return new Z(e=>{let t=n[Li]();if(z(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function qw(n){return new Z(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function Kw(n){return new Z(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,$l)})}function Ww(n){return new Z(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function vv(n){return new Z(e=>{Qw(n,e).catch(t=>e.error(t))})}function Yw(n){return vv(Xl(n))}function Qw(n,e){var t,r,o,i;return gv(this,void 0,void 0,function*(){try{for(t=yv(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){o={error:s}}finally{try{r&&!r.done&&(i=t.return)&&(yield i.call(t))}finally{if(o)throw o.error}}e.complete()})}function yt(n,e,t,r=0,o=!1){let i=e.schedule(function(){t(),o?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(i),!o)return i}function tu(n,e=0){return X((t,r)=>{t.subscribe(ee(r,o=>yt(r,n,()=>r.next(o),e),()=>yt(r,n,()=>r.complete(),e),o=>yt(r,n,()=>r.error(o),e)))})}function nu(n,e=0){return X((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function Cv(n,e){return je(n).pipe(nu(e),tu(e))}function Ev(n,e){return je(n).pipe(nu(e),tu(e))}function Iv(n,e){return new Z(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function Tv(n,e){return new Z(t=>{let r;return yt(t,e,()=>{r=n[Jl](),yt(t,e,()=>{let o,i;try{({value:o,done:i}=r.next())}catch(s){t.error(s);return}i?t.complete():t.next(o)},0,!0)}),()=>z(r?.return)&&r.return()})}function ru(n,e){if(!n)throw new Error("Iterable cannot be null");return new Z(t=>{yt(t,e,()=>{let r=n[Symbol.asyncIterator]();yt(t,e,()=>{r.next().then(o=>{o.done?t.complete():t.next(o.value)})},0,!0)})})}function Sv(n,e){return ru(Xl(n),e)}function wv(n,e){if(n!=null){if(Wl(n))return Cv(n,e);if(ql(n))return Iv(n,e);if(Kl(n))return Ev(n,e);if(Yl(n))return ru(n,e);if(Zl(n))return Tv(n,e);if(eu(n))return Sv(n,e)}throw Ql(n)}function se(n,e){return e?wv(n,e):je(n)}function x(...n){let e=mr(n);return se(n,e)}function Hi(n,e){let t=z(n)?n:()=>n,r=o=>o.error(t());return new Z(e?o=>e.schedule(r,0,o):r)}function Lh(n){return!!n&&(n instanceof Z||z(n.lift)&&z(n.subscribe))}var Hn=ki(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function K(n,e){return X((t,r)=>{let o=0;t.subscribe(ee(r,i=>{r.next(n.call(e,i,o++))}))})}var{isArray:Jw}=Array;function Zw(n,e){return Jw(e)?n(...e):n(e)}function Av(n){return K(e=>Zw(n,e))}var{isArray:Xw}=Array,{getPrototypeOf:eA,prototype:tA,keys:nA}=Object;function _v(n){if(n.length===1){let e=n[0];if(Xw(e))return{args:e,keys:null};if(rA(e)){let t=nA(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function rA(n){return n&&typeof n=="object"&&eA(n)===tA}function Dv(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}function ou(...n){let e=mr(n),t=hv(n),{args:r,keys:o}=_v(n);if(r.length===0)return se([],e);let i=new Z(oA(r,e,o?s=>Dv(o,s):At));return t?i.pipe(Av(t)):i}function oA(n,e,t=At){return r=>{bv(e,()=>{let{length:o}=n,i=new Array(o),s=o,a=o;for(let c=0;c<o;c++)bv(e,()=>{let l=se(n[c],e),u=!1;l.subscribe(ee(r,f=>{i[c]=f,u||(u=!0,a--),a||r.next(t(i.slice()))},()=>{--s||r.complete()}))},r)},r)}}function bv(n,e,t){n?yt(t,n,e):e()}function Rv(n,e,t,r,o,i,s,a){let c=[],l=0,u=0,f=!1,g=()=>{f&&!c.length&&!l&&e.complete()},p=S=>l<r?I(S):c.push(S),I=S=>{i&&e.next(S),l++;let w=!1;je(t(S,u++)).subscribe(ee(e,N=>{o?.(N),i?p(N):e.next(N)},()=>{w=!0},void 0,()=>{if(w)try{for(l--;c.length&&l<r;){let N=c.shift();s?yt(e,s,()=>I(N)):I(N)}g()}catch(N){e.error(N)}}))};return n.subscribe(ee(e,p,()=>{f=!0,g()})),()=>{a?.()}}function ke(n,e,t=1/0){return z(e)?ke((r,o)=>K((i,s)=>e(r,i,o,s))(je(n(r,o))),t):(typeof e=="number"&&(t=e),X((r,o)=>Rv(r,o,n,t)))}function Mv(n=1/0){return ke(At,n)}function Nv(){return Mv(1)}function Bi(...n){return Nv()(se(n,mr(n)))}function ya(n){return new Z(e=>{je(n()).subscribe(e)})}function nt(n,e){return X((t,r)=>{let o=0;t.subscribe(ee(r,i=>n.call(e,i,o++)&&r.next(i)))})}function pn(n){return X((e,t)=>{let r=null,o=!1,i;r=e.subscribe(ee(t,void 0,void 0,s=>{i=je(n(s,pn(n)(e))),r?(r.unsubscribe(),r=null,i.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,i.subscribe(t))})}function kv(n,e,t,r,o){return(i,s)=>{let a=t,c=e,l=0;i.subscribe(ee(s,u=>{let f=l++;c=a?n(c,u,f):(a=!0,u),r&&s.next(c)},o&&(()=>{a&&s.next(c),s.complete()})))}}function Xt(n,e){return z(e)?ke(n,e,1):ke(n,1)}function yr(n){return X((e,t)=>{let r=!1;e.subscribe(ee(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function gn(n){return n<=0?()=>tt:X((e,t)=>{let r=0;e.subscribe(ee(t,o=>{++r<=n&&(t.next(o),n<=r&&t.complete())}))})}function iu(n=iA){return X((e,t)=>{let r=!1;e.subscribe(ee(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function iA(){return new Hn}function ho(n){return X((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Bn(n,e){let t=arguments.length>=2;return r=>r.pipe(n?nt((o,i)=>n(o,i,r)):At,gn(1),t?yr(e):iu(()=>new Hn))}function ji(n){return n<=0?()=>tt:X((e,t)=>{let r=[];e.subscribe(ee(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(let o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function Fh(n,e){let t=arguments.length>=2;return r=>r.pipe(n?nt((o,i)=>n(o,i,r)):At,ji(1),t?yr(e):iu(()=>new Hn))}function Uh(n,e){return X(kv(n,e,arguments.length>=2,!0))}function Hh(...n){let e=mr(n);return X((t,r)=>{(e?Bi(n,t,e):Bi(n,t)).subscribe(r)})}function qe(n,e){return X((t,r)=>{let o=null,i=0,s=!1,a=()=>s&&!o&&r.complete();t.subscribe(ee(r,c=>{o?.unsubscribe();let l=0,u=i++;je(n(c,u)).subscribe(o=ee(r,f=>r.next(e?e(c,f,u,l++):f),()=>{o=null,a()}))},()=>{s=!0,a()}))})}function su(n){return X((e,t)=>{je(n).subscribe(ee(t,()=>t.complete(),ga)),!t.closed&&e.subscribe(t)})}function Ve(n,e,t){let r=z(n)||e||t?{next:n,error:e,complete:t}:n;return r?X((o,i)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;o.subscribe(ee(i,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),i.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),i.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),i.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):At}function Ov(n){let e=Y(null);try{return n()}finally{Y(e)}}var _=class extends Error{code;constructor(e,t){super(yo(e,t)),this.code=e}};function sA(n){return`NG0${Math.abs(n)}`}function yo(n,e){return`${sA(n)}${e?": "+e:""}`}var vo=globalThis;function ce(n){for(let e in n)if(n[e]===ce)return e;throw Error("")}function vr(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(vr).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function Jh(n,e){return n?e?`${n} ${e}`:n:e||""}var aA=ce({__forward_ref__:ce});function du(n){return n.__forward_ref__=du,n.toString=function(){return vr(this())},n}function vt(n){return Zh(n)?n():n}function Zh(n){return typeof n=="function"&&n.hasOwnProperty(aA)&&n.__forward_ref__===du}function O(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Tr(n){return{providers:n.providers||[],imports:n.imports||[]}}function Ia(n){return cA(n,fu)}function Xh(n){return Ia(n)!==null}function cA(n,e){return n.hasOwnProperty(e)&&n[e]||null}function lA(n){let e=n?.[fu]??null;return e||null}function jh(n){return n&&n.hasOwnProperty(cu)?n[cu]:null}var fu=ce({\u0275prov:ce}),cu=ce({\u0275inj:ce}),k=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=O({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function ep(n){return n&&!!n.\u0275providers}var tp=ce({\u0275cmp:ce}),np=ce({\u0275dir:ce}),rp=ce({\u0275pipe:ce}),op=ce({\u0275mod:ce}),Ca=ce({\u0275fac:ce}),Co=ce({__NG_ELEMENT_ID__:ce}),xv=ce({__NG_ENV_ID__:ce});function ip(n){return typeof n=="string"?n:n==null?"":String(n)}function Fv(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():ip(n)}var Uv=ce({ngErrorCode:ce}),uA=ce({ngErrorMessage:ce}),dA=ce({ngTokenPath:ce});function sp(n,e){return Hv("",-200,e)}function hu(n,e){throw new _(-201,!1)}function Hv(n,e,t){let r=new _(e,n);return r[Uv]=e,r[uA]=n,t&&(r[dA]=t),r}function fA(n){return n[Uv]}var Vh;function Bv(){return Vh}function rt(n){let e=Vh;return Vh=n,e}function ap(n,e,t){let r=Ia(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;hu(n,"Injector")}var hA={},po=hA,pA="__NG_DI_FLAG__",$h=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=go(t)||0;try{return this.injector.get(e,r&8?null:po,r)}catch(o){if(Ri(o))return o;throw o}}};function gA(n,e=0){let t=xl();if(t===void 0)throw new _(-203,!1);if(t===null)return ap(n,void 0,e);{let r=mA(e),o=t.retrieve(n,r);if(Ri(o)){if(r.optional)return null;throw o}return o}}function P(n,e=0){return(Bv()||gA)(vt(n),e)}function E(n,e){return P(n,go(e))}function go(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function mA(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function zh(n){let e=[];for(let t=0;t<n.length;t++){let r=vt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new _(900,!1);let o,i=0;for(let s=0;s<r.length;s++){let a=r[s],c=yA(a);typeof c=="number"?c===-1?o=a.token:i|=c:o=a}e.push(P(o,i))}else e.push(P(r))}return e}function yA(n){return n[pA]}function Cr(n,e){let t=n.hasOwnProperty(Ca);return t?n[Ca]:null}function pu(n,e){n.forEach(t=>Array.isArray(t)?pu(t,e):e(t))}function cp(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Ta(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}var Eo={},en=[],Sr=new k(""),lp=new k("",-1),up=new k(""),Ea=class{get(e,t=po){if(t===po){let o=Hv("",-201);throw o.name="\u0275NotFound",o}return t}};function dp(n){return n[op]||null}function wr(n){return n[tp]||null}function fp(n){return n[np]||null}function jv(n){return n[rp]||null}function $i(n){return{\u0275providers:n}}function Vv(...n){return{\u0275providers:hp(!0,n),\u0275fromNgModule:!0}}function hp(n,...e){let t=[],r=new Set,o,i=s=>{t.push(s)};return pu(e,s=>{let a=s;lu(a,i,[],r)&&(o||=[],o.push(a))}),o!==void 0&&$v(o,i),t}function $v(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:o}=n[t];pp(o,i=>{e(i,r)})}}function lu(n,e,t,r){if(n=vt(n),!n)return!1;let o=null,i=jh(n),s=!i&&wr(n);if(!i&&!s){let c=n.ngModule;if(i=jh(c),i)o=c;else return!1}else{if(s&&!s.standalone)return!1;o=n}let a=r.has(o);if(s){if(a)return!1;if(r.add(o),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)lu(l,e,t,r)}}else if(i){if(i.imports!=null&&!a){r.add(o);let l;try{pu(i.imports,u=>{lu(u,e,t,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&$v(l,e)}if(!a){let l=Cr(o)||(()=>new o);e({provide:o,useFactory:l,deps:en},o),e({provide:up,useValue:o,multi:!0},o),e({provide:Sr,useValue:()=>P(o),multi:!0},o)}let c=i.providers;if(c!=null&&!a){let l=n;pp(c,u=>{e(u,l)})}}else return!1;return o!==n&&n.providers!==void 0}function pp(n,e){for(let t of n)ep(t)&&(t=t.\u0275providers),Array.isArray(t)?pp(t,e):e(t)}var vA=ce({provide:String,useValue:ce});function zv(n){return n!==null&&typeof n=="object"&&vA in n}function CA(n){return!!(n&&n.useExisting)}function EA(n){return!!(n&&n.useFactory)}function uu(n){return typeof n=="function"}var Sa=new k(""),au={},Lv={},Bh;function wa(){return Bh===void 0&&(Bh=new Ea),Bh}var Oe=class{},mo=class extends Oe{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,o){super(),this.parent=t,this.source=r,this.scopes=o,qh(e,s=>this.processProvider(s)),this.records.set(lp,Vi(void 0,this)),o.has("environment")&&this.records.set(Oe,Vi(void 0,this));let i=this.records.get(Sa);i!=null&&typeof i.value=="string"&&this.scopes.add(i.value),this.injectorDefTypes=new Set(this.get(up,en,{self:!0}))}retrieve(e,t){let r=go(t)||0;try{return this.get(e,po,r)}catch(o){if(Ri(o))return o;throw o}}destroy(){va(this),this._destroyed=!0;let e=Y(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Y(e)}}onDestroy(e){return va(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){va(this);let t=hn(this),r=rt(void 0),o;try{return e()}finally{hn(t),rt(r)}}get(e,t=po,r){if(va(this),e.hasOwnProperty(xv))return e[xv](this);let o=go(r),i,s=hn(this),a=rt(void 0);try{if(!(o&4)){let l=this.records.get(e);if(l===void 0){let u=AA(e)&&Ia(e);u&&this.injectableDefInScope(u)?l=Vi(Gh(e),au):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,o)}let c=o&2?wa():this.parent;return t=o&8&&t===po?null:t,c.get(e,t)}catch(c){let l=fA(c);throw l===-200||l===-201?new _(l,null):c}finally{rt(a),hn(s)}}resolveInjectorInitializers(){let e=Y(null),t=hn(this),r=rt(void 0),o;try{let i=this.get(Sr,en,{self:!0});for(let s of i)s()}finally{hn(t),rt(r),Y(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(vr(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=vt(e);let t=uu(e)?e:vt(e&&e.provide),r=TA(e);if(!uu(e)&&e.multi===!0){let o=this.records.get(t);o||(o=Vi(void 0,au,!0),o.factory=()=>zh(o.multi),this.records.set(t,o)),t=e,o.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let o=Y(null);try{if(t.value===Lv)throw sp(vr(e));return t.value===au&&(t.value=Lv,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&wA(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Y(o)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=vt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Gh(n){let e=Ia(n),t=e!==null?e.factory:Cr(n);if(t!==null)return t;if(n instanceof k)throw new _(204,!1);if(n instanceof Function)return IA(n);throw new _(204,!1)}function IA(n){if(n.length>0)throw new _(204,!1);let t=lA(n);return t!==null?()=>t.factory(n):()=>new n}function TA(n){if(zv(n))return Vi(void 0,n.useValue);{let e=Gv(n);return Vi(e,au)}}function Gv(n,e,t){let r;if(uu(n)){let o=vt(n);return Cr(o)||Gh(o)}else if(zv(n))r=()=>vt(n.useValue);else if(EA(n))r=()=>n.useFactory(...zh(n.deps||[]));else if(CA(n))r=(o,i)=>P(vt(n.useExisting),i!==void 0&&i&8?8:void 0);else{let o=vt(n&&(n.useClass||n.provide));if(SA(n))r=()=>new o(...zh(n.deps));else return Cr(o)||Gh(o)}return r}function va(n){if(n.destroyed)throw new _(205,!1)}function Vi(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function SA(n){return!!n.deps}function wA(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function AA(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function qh(n,e){for(let t of n)Array.isArray(t)?qh(t,e):t&&ep(t)?qh(t.\u0275providers,e):e(t)}function We(n,e){let t;n instanceof mo?(va(n),t=n):t=new $h(n);let r,o=hn(t),i=rt(void 0);try{return e()}finally{hn(o),rt(i)}}function qv(){return Bv()!==void 0||xl()!=null}var tn=0,W=1,G=2,Ke=3,Ht=4,Bt=5,Aa=6,zi=7,ot=8,Ar=9,Vn=10,$e=11,Gi=12,gp=13,Io=14,jt=15,To=16,So=17,wo=18,_a=19,mp=20,jn=21,gu=22,Da=23,_t=24,mu=25,ba=26,it=27,Kv=1;var _r=7,Ra=8,Ma=9,Ct=10;function vn(n){return Array.isArray(n)&&typeof n[Kv]=="object"}function nn(n){return Array.isArray(n)&&n[Kv]===!0}function yp(n){return(n.flags&4)!==0}function Dr(n){return n.componentOffset>-1}function Na(n){return(n.flags&1)===1}function Ao(n){return!!n.template}function qi(n){return(n[G]&512)!==0}function _o(n){return(n[G]&256)===256}var Wv="svg",Yv="math";function Vt(n){for(;Array.isArray(n);)n=n[tn];return n}function Qv(n,e){return Vt(e[n])}function Cn(n,e){return Vt(e[n.index])}function yu(n,e){return n.data[e]}function Jv(n,e){return n[e]}function vp(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function $t(n,e){let t=e[n];return vn(t)?t:t[tn]}function vu(n){return(n[G]&128)===128}function Zv(n){return nn(n[Ke])}function ka(n,e){return e==null?null:n[e]}function Cp(n){n[So]=0}function Ep(n){n[G]&1024||(n[G]|=1024,vu(n)&&Pa(n))}function Xv(n,e){for(;n>0;)e=e[Io],n--;return e}function Oa(n){return!!(n[G]&9216||n[_t]?.dirty)}function Cu(n){n[Vn].changeDetectionScheduler?.notify(8),n[G]&64&&(n[G]|=1024),Oa(n)&&Pa(n)}function Pa(n){n[Vn].changeDetectionScheduler?.notify(0);let e=Er(n);for(;e!==null&&!(e[G]&8192||(e[G]|=8192,!vu(e)));)e=Er(e)}function Ip(n,e){if(_o(n))throw new _(911,!1);n[jn]===null&&(n[jn]=[]),n[jn].push(e)}function eC(n,e){if(n[jn]===null)return;let t=n[jn].indexOf(e);t!==-1&&n[jn].splice(t,1)}function Er(n){let e=n[Ke];return nn(e)?e[Ke]:e}function tC(n){return n[zi]??=[]}function nC(n){return n.cleanup??=[]}var oe={lFrame:mC(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Kh=!1;function rC(){return oe.lFrame.elementDepthCount}function oC(){oe.lFrame.elementDepthCount++}function iC(){oe.lFrame.elementDepthCount--}function Tp(){return oe.bindingsEnabled}function sC(){return oe.skipHydrationRootTNode!==null}function aC(n){return oe.skipHydrationRootTNode===n}function cC(){oe.skipHydrationRootTNode=null}function Ie(){return oe.lFrame.lView}function br(){return oe.lFrame.tView}function zt(){let n=Sp();for(;n!==null&&n.type===64;)n=n.parent;return n}function Sp(){return oe.lFrame.currentTNode}function lC(){let n=oe.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Ki(n,e){let t=oe.lFrame;t.currentTNode=n,t.isParent=e}function wp(){return oe.lFrame.isParent}function uC(){oe.lFrame.isParent=!1}function Ap(){return Kh}function _p(n){let e=Kh;return Kh=n,e}function Dp(){let n=oe.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function dC(n){return oe.lFrame.bindingIndex=n}function bp(){return oe.lFrame.bindingIndex++}function fC(){return oe.lFrame.inI18n}function hC(n,e){let t=oe.lFrame;t.bindingIndex=t.bindingRootIndex=n,Eu(e)}function pC(){return oe.lFrame.currentDirectiveIndex}function Eu(n){oe.lFrame.currentDirectiveIndex=n}function Rp(n){oe.lFrame.currentQueryIndex=n}function _A(n){let e=n[W];return e.type===2?e.declTNode:e.type===1?n[Bt]:null}function Mp(n,e,t){if(t&4){let o=e,i=n;for(;o=o.parent,o===null&&!(t&1);)if(o=_A(i),o===null||(i=i[Io],o.type&10))break;if(o===null)return!1;e=o,n=i}let r=oe.lFrame=gC();return r.currentTNode=e,r.lView=n,!0}function Iu(n){let e=gC(),t=n[W];oe.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function gC(){let n=oe.lFrame,e=n===null?null:n.child;return e===null?mC(n):e}function mC(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function yC(){let n=oe.lFrame;return oe.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var Np=yC;function Tu(){let n=yC();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function vC(n){return(oe.lFrame.contextLView=Xv(n,oe.lFrame.contextLView))[ot]}function Su(){return oe.lFrame.selectedIndex}function Rr(n){oe.lFrame.selectedIndex=n}function CC(){let n=oe.lFrame;return yu(n.tView,n.selectedIndex)}function EC(){return oe.lFrame.currentNamespace}var IC=!0;function wu(){return IC}function Au(n){IC=n}function Wh(n,e=null,t=null,r){let o=kp(n,e,t,r);return o.resolveInjectorInitializers(),o}function kp(n,e=null,t=null,r,o=new Set){let i=[t||en,Vv(n)];return r=r||(typeof n=="object"?void 0:vr(n)),new mo(i,e||wa(),r||null,o)}var mn=class n{static THROW_IF_NOT_FOUND=po;static NULL=new Ea;static create(e,t){if(Array.isArray(e))return Wh({name:""},t,e,"");{let r=e.name??"";return Wh({name:r},e.parent,e.providers,r)}}static \u0275prov=O({token:n,providedIn:"any",factory:()=>P(lp)});static __NG_ELEMENT_ID__=-1},Pe=new k(""),Do=(()=>{class n{static __NG_ELEMENT_ID__=DA;static __NG_ENV_ID__=t=>t}return n})(),Yh=class extends Do{_lView;constructor(e){super(),this._lView=e}get destroyed(){return _o(this._lView)}onDestroy(e){let t=this._lView;return Ip(t,e),()=>eC(t,e)}};function DA(){return new Yh(Ie())}var yn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Dt=new k("",{providedIn:"root",factory:()=>{let n=E(Oe),e;return t=>{n.destroyed&&!e?setTimeout(()=>{throw t}):(e??=n.get(yn),e.handleError(t))}}}),TC={provide:Sr,useValue:()=>void E(yn),multi:!0};function xa(n,e){let[t,r,o]=wh(n,e?.equal),i=t,s=i[mt];return i.set=r,i.update=o,i.asReadonly=SC.bind(i),i}function SC(){let n=this[mt];if(n.readonlyFn===void 0){let e=()=>this();e[mt]=n,n.readonlyFn=e}return n.readonlyFn}var Ir=class{},_u=new k("",{providedIn:"root",factory:()=>!1});var Op=new k(""),Pp=new k(""),En=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new ve(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new Z(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=O({token:n,providedIn:"root",factory:()=>new n})}return n})(),Du=(()=>{class n{internalPendingTasks=E(En);scheduler=E(Ir);errorHandler=E(Dt);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=O({token:n,providedIn:"root",factory:()=>new n})}return n})();function La(...n){}var xp=(()=>{class n{static \u0275prov=O({token:n,providedIn:"root",factory:()=>new Qh})}return n})(),Qh=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}};function $a(n){return{toString:n}.toString()}function BA(n){return typeof n=="function"}var ku=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function XC(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var zu=(()=>{let n=()=>eE;return n.ngInherit=!0,n})();function eE(n){return n.type.prototype.ngOnChanges&&(n.setInput=VA),jA}function jA(){let n=nE(this),e=n?.current;if(e){let t=n.previous;if(t===Eo)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function VA(n,e,t,r,o){let i=this.declaredInputs[r],s=nE(n)||$A(n,{previous:Eo,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[i];a[i]=new ku(l&&l.currentValue,t,c===Eo),XC(n,e,o,t)}var tE="__ngSimpleChanges__";function nE(n){return n[tE]||null}function $A(n,e){return n[tE]=e}var wC=[];var fe=function(n,e=null,t){for(let r=0;r<wC.length;r++){let o=wC[r];o(n,e,t)}};function zA(n,e,t){let{ngOnChanges:r,ngOnInit:o,ngDoCheck:i}=e.type.prototype;if(r){let s=eE(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}o&&(t.preOrderHooks??=[]).push(0-n,o),i&&((t.preOrderHooks??=[]).push(n,i),(t.preOrderCheckHooks??=[]).push(n,i))}function rE(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let i=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=i;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),u!=null&&(n.destroyHooks??=[]).push(t,u)}}function Ru(n,e,t){oE(n,e,3,t)}function Mu(n,e,t,r){(n[G]&3)===t&&oE(n,e,t,r)}function Lp(n,e){let t=n[G];(t&3)===e&&(t&=16383,t+=1,n[G]=t)}function oE(n,e,t,r){let o=r!==void 0?n[So]&65535:0,i=r??-1,s=e.length-1,a=0;for(let c=o;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[So]+=65536),(a<i||i==-1)&&(GA(n,t,e,c),n[So]=(n[So]&4294901760)+c+2),c++}function AC(n,e){fe(4,n,e);let t=Y(null);try{e.call(n)}finally{Y(t),fe(5,n,e)}}function GA(n,e,t,r){let o=t[r]<0,i=t[r+1],s=o?-t[r]:t[r],a=n[s];o?n[G]>>14<n[So]>>16&&(n[G]&3)===e&&(n[G]+=16384,AC(a,i)):AC(a,i)}var Yi=-1,Ha=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,o){this.factory=e,this.name=o,this.canSeeViewProviders=t,this.injectImpl=r}};function qA(n){return(n.flags&8)!==0}function KA(n){return(n.flags&16)!==0}function WA(n,e,t){let r=0;for(;r<t.length;){let o=t[r];if(typeof o=="number"){if(o!==0)break;r++;let i=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,i)}else{let i=o,s=t[++r];QA(i)?n.setProperty(e,i,s):n.setAttribute(e,i,s),r++}}return r}function YA(n){return n===3||n===4||n===6}function QA(n){return n.charCodeAt(0)===64}function rg(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let o=e[r];typeof o=="number"?t=o:t===0||(t===-1||t===2?_C(n,t,o,null,e[++r]):_C(n,t,o,null,null))}}return n}function _C(n,e,t,r,o){let i=0,s=n.length;if(e===-1)s=-1;else for(;i<n.length;){let a=n[i++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=i-1;break}}}for(;i<n.length;){let a=n[i];if(typeof a=="number")break;if(a===t){o!==null&&(n[i+1]=o);return}i++,o!==null&&i++}s!==-1&&(n.splice(s,0,e),i=s+1),n.splice(i++,0,t),o!==null&&n.splice(i++,0,o)}function iE(n){return n!==Yi}function Ou(n){return n&32767}function JA(n){return n>>16}function Pu(n,e){let t=JA(n),r=e;for(;t>0;)r=r[Io],t--;return r}var Vp=!0;function xu(n){let e=Vp;return Vp=n,e}var ZA=256,sE=ZA-1,aE=5,XA=0,In={};function e_(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Co)&&(r=t[Co]),r==null&&(r=t[Co]=XA++);let o=r&sE,i=1<<o;e.data[n+(o>>aE)]|=i}function cE(n,e){let t=lE(n,e);if(t!==-1)return t;let r=e[W];r.firstCreatePass&&(n.injectorIndex=e.length,Fp(r.data,n),Fp(e,null),Fp(r.blueprint,null));let o=og(n,e),i=n.injectorIndex;if(iE(o)){let s=Ou(o),a=Pu(o,e),c=a[W].data;for(let l=0;l<8;l++)e[i+l]=a[s+l]|c[s+l]}return e[i+8]=o,i}function Fp(n,e){n.push(0,0,0,0,0,0,0,0,e)}function lE(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function og(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,o=e;for(;o!==null;){if(r=pE(o),r===null)return Yi;if(t++,o=o[Io],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Yi}function t_(n,e,t){e_(n,e,t)}function uE(n,e,t){if(t&8||n!==void 0)return n;hu(e,"NodeInjector")}function dE(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let o=n[Ar],i=rt(void 0);try{return o?o.get(e,r,t&8):ap(e,r,t&8)}finally{rt(i)}}return uE(r,e,t)}function fE(n,e,t,r=0,o){if(n!==null){if(e[G]&2048&&!(r&2)){let s=s_(n,e,t,r,In);if(s!==In)return s}let i=hE(n,e,t,r,In);if(i!==In)return i}return dE(e,t,r,o)}function hE(n,e,t,r,o){let i=o_(t);if(typeof i=="function"){if(!Mp(e,n,r))return r&1?uE(o,t,r):dE(e,t,r,o);try{let s;if(s=i(r),s==null&&!(r&8))hu(t);else return s}finally{Np()}}else if(typeof i=="number"){let s=null,a=lE(n,e),c=Yi,l=r&1?e[jt][Bt]:null;for((a===-1||r&4)&&(c=a===-1?og(n,e):e[a+8],c===Yi||!bC(r,!1)?a=-1:(s=e[W],a=Ou(c),e=Pu(c,e)));a!==-1;){let u=e[W];if(DC(i,a,u.data)){let f=n_(a,e,t,s,r,l);if(f!==In)return f}c=e[a+8],c!==Yi&&bC(r,e[W].data[a+8]===l)&&DC(i,a,e)?(s=u,a=Ou(c),e=Pu(c,e)):a=-1}}return o}function n_(n,e,t,r,o,i){let s=e[W],a=s.data[n+8],c=r==null?Dr(a)&&Vp:r!=s&&(a.type&3)!==0,l=o&1&&i===a,u=r_(a,s,t,c,l);return u!==null?$p(e,s,u,a,o):In}function r_(n,e,t,r,o){let i=n.providerIndexes,s=e.data,a=i&1048575,c=n.directiveStart,l=n.directiveEnd,u=i>>20,f=r?a:a+u,g=o?a+u:l;for(let p=f;p<g;p++){let I=s[p];if(p<c&&t===I||p>=c&&I.type===t)return p}if(o){let p=s[c];if(p&&Ao(p)&&p.type===t)return c}return null}function $p(n,e,t,r,o){let i=n[t],s=e.data;if(i instanceof Ha){let a=i;if(a.resolving){let p=Fv(s[t]);throw sp(p)}let c=xu(a.canSeeViewProviders);a.resolving=!0;let l=s[t].type||s[t],u,f=a.injectImpl?rt(a.injectImpl):null,g=Mp(n,r,0);try{i=n[t]=a.factory(void 0,o,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&zA(t,s[t],e)}finally{f!==null&&rt(f),xu(c),a.resolving=!1,Np()}}return i}function o_(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Co)?n[Co]:void 0;return typeof e=="number"?e>=0?e&sE:i_:e}function DC(n,e,t){let r=1<<n;return!!(t[e+(n>>aE)]&r)}function bC(n,e){return!(n&2)&&!(n&1&&e)}var bo=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return fE(this._tNode,this._lView,e,go(r),t)}};function i_(){return new bo(zt(),Ie())}function Gu(n){return $a(()=>{let e=n.prototype.constructor,t=e[Ca]||zp(e),r=Object.prototype,o=Object.getPrototypeOf(n.prototype).constructor;for(;o&&o!==r;){let i=o[Ca]||zp(o);if(i&&i!==t)return i;o=Object.getPrototypeOf(o)}return i=>new i})}function zp(n){return Zh(n)?()=>{let e=zp(vt(n));return e&&e()}:Cr(n)}function s_(n,e,t,r,o){let i=n,s=e;for(;i!==null&&s!==null&&s[G]&2048&&!qi(s);){let a=hE(i,s,t,r|2,In);if(a!==In)return a;let c=i.parent;if(!c){let l=s[mp];if(l){let u=l.get(t,In,r);if(u!==In)return u}c=pE(s),s=s[Io]}i=c}return o}function pE(n){let e=n[W],t=e.type;return t===2?e.declTNode:t===1?n[Bt]:null}function a_(){return qu(zt(),Ie())}function qu(n,e){return new Ku(Cn(n,e))}var Ku=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=a_}return n})();function gE(n){return(n.flags&128)===128}var ig=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(ig||{}),mE=new Map,c_=0;function l_(){return c_++}function u_(n){mE.set(n[_a],n)}function Gp(n){mE.delete(n[_a])}var RC="__ngContext__";function Qi(n,e){vn(e)?(n[RC]=e[_a],u_(e)):n[RC]=e}function yE(n){return CE(n[Gi])}function vE(n){return CE(n[Ht])}function CE(n){for(;n!==null&&!nn(n);)n=n[Ht];return n}var qp;function sg(n){qp=n}function EE(){if(qp!==void 0)return qp;if(typeof document<"u")return document;throw new _(210,!1)}var Wu=new k("",{providedIn:"root",factory:()=>d_}),d_="ng",Yu=new k(""),za=new k("",{providedIn:"platform",factory:()=>"unknown"});var Qu=new k("",{providedIn:"root",factory:()=>EE().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var f_="h",h_="b";var IE=!1,TE=new k("",{providedIn:"root",factory:()=>IE});var p_=(n,e,t,r)=>{};function g_(n,e,t,r){p_(n,e,t,r)}function ag(n){return(n.flags&32)===32}var m_=()=>null;function SE(n,e,t=!1){return m_(n,e,t)}function wE(n,e){let t=n.contentQueries;if(t!==null){let r=Y(null);try{for(let o=0;o<t.length;o+=2){let i=t[o],s=t[o+1];if(s!==-1){let a=n.data[s];Rp(i),a.contentQueries(2,e[s],s)}}}finally{Y(r)}}}function Kp(n,e,t){Rp(0);let r=Y(null);try{e(n,t)}finally{Y(r)}}function AE(n,e,t){if(yp(e)){let r=Y(null);try{let o=e.directiveStart,i=e.directiveEnd;for(let s=o;s<i;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{Y(r)}}}var $n=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n})($n||{});function y_(n,e){return n.createText(e)}function v_(n,e,t){n.setValue(e,t)}function _E(n,e,t){return n.createElement(e,t)}function Lu(n,e,t,r,o){n.insertBefore(e,t,r,o)}function DE(n,e,t){n.appendChild(e,t)}function MC(n,e,t,r,o){r!==null?Lu(n,e,t,r,o):DE(n,e,t)}function C_(n,e,t,r){n.removeChild(null,e,t,r)}function E_(n,e,t){n.setAttribute(e,"style",t)}function I_(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function bE(n,e,t){let{mergedAttrs:r,classes:o,styles:i}=t;r!==null&&WA(n,e,r),o!==null&&I_(n,e,o),i!==null&&E_(n,e,i)}function RE(n){return n instanceof Function?n():n}function T_(n,e,t){let r=n.length;for(;;){let o=n.indexOf(e,t);if(o===-1)return o;if(o===0||n.charCodeAt(o-1)<=32){let i=e.length;if(o+i===r||n.charCodeAt(o+i)<=32)return o}t=o+1}}var ME="ng-template";function S_(n,e,t,r){let o=0;if(r){for(;o<e.length&&typeof e[o]=="string";o+=2)if(e[o]==="class"&&T_(e[o+1].toLowerCase(),t,0)!==-1)return!0}else if(cg(n))return!1;if(o=e.indexOf(1,o),o>-1){let i;for(;++o<e.length&&typeof(i=e[o])=="string";)if(i.toLowerCase()===t)return!0}return!1}function cg(n){return n.type===4&&n.value!==ME}function w_(n,e,t){let r=n.type===4&&!t?ME:n.value;return e===r}function A_(n,e,t){let r=4,o=n.attrs,i=o!==null?b_(o):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!rn(r)&&!rn(c))return!1;if(s&&rn(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!w_(n,c,t)||c===""&&e.length===1){if(rn(r))return!1;s=!0}}else if(r&8){if(o===null||!S_(n,o,c,t)){if(rn(r))return!1;s=!0}}else{let l=e[++a],u=__(c,o,cg(n),t);if(u===-1){if(rn(r))return!1;s=!0;continue}if(l!==""){let f;if(u>i?f="":f=o[u+1].toLowerCase(),r&2&&l!==f){if(rn(r))return!1;s=!0}}}}return rn(r)||s}function rn(n){return(n&1)===0}function __(n,e,t,r){if(e===null)return-1;let o=0;if(r||!t){let i=!1;for(;o<e.length;){let s=e[o];if(s===n)return o;if(s===3||s===6)i=!0;else if(s===1||s===2){let a=e[++o];for(;typeof a=="string";)a=e[++o];continue}else{if(s===4)break;if(s===0){o+=4;continue}}o+=i?1:2}return-1}else return R_(e,n)}function D_(n,e,t=!1){for(let r=0;r<e.length;r++)if(A_(n,e[r],t))return!0;return!1}function b_(n){for(let e=0;e<n.length;e++){let t=n[e];if(YA(t))return e}return n.length}function R_(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function NC(n,e){return n?":not("+e.trim()+")":e}function M_(n){let e=n[0],t=1,r=2,o="",i=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];o+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?o+="."+s:r&4&&(o+=" "+s);else o!==""&&!rn(s)&&(e+=NC(i,o),o=""),r=s,i=i||!rn(r);t++}return o!==""&&(e+=NC(i,o)),e}function N_(n){return n.map(M_).join(",")}function k_(n){let e=[],t=[],r=1,o=2;for(;r<n.length;){let i=n[r];if(typeof i=="string")o===2?i!==""&&e.push(i,n[++r]):o===8&&t.push(i);else{if(!rn(o))break;o=i}r++}return t.length&&e.push(1,...t),e}var No={};function lg(n,e,t,r,o,i,s,a,c,l,u){let f=it+r,g=f+o,p=O_(f,g),I=typeof l=="function"?l():l;return p[W]={type:n,blueprint:p,template:t,queries:null,viewQuery:a,declTNode:e,data:p.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof i=="function"?i():i,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:I,incompleteFirstPass:!1,ssrId:u}}function O_(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:No);return t}function P_(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=lg(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function ug(n,e,t,r,o,i,s,a,c,l,u){let f=e.blueprint.slice();return f[tn]=o,f[G]=r|4|128|8|64|1024,(l!==null||n&&n[G]&2048)&&(f[G]|=2048),Cp(f),f[Ke]=f[Io]=n,f[ot]=t,f[Vn]=s||n&&n[Vn],f[$e]=a||n&&n[$e],f[Ar]=c||n&&n[Ar]||null,f[Bt]=i,f[_a]=l_(),f[Aa]=u,f[mp]=l,f[jt]=e.type==2?n[jt]:f,f}function x_(n,e,t){let r=Cn(e,n),o=P_(t),i=n[Vn].rendererFactory,s=dg(n,ug(n,o,null,NE(t),r,e,null,i.createRenderer(r,t),null,null,null));return n[e.index]=s}function NE(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function kE(n,e,t,r){if(t===0)return-1;let o=e.length;for(let i=0;i<t;i++)e.push(r),n.blueprint.push(r),n.data.push(null);return o}function dg(n,e){return n[Gi]?n[gp][Ht]=e:n[Gi]=e,n[gp]=e,e}function q(n=1){OE(br(),Ie(),Su()+n,!1)}function OE(n,e,t,r){if(!r)if((e[G]&3)===3){let i=n.preOrderCheckHooks;i!==null&&Ru(e,i,t)}else{let i=n.preOrderHooks;i!==null&&Mu(e,i,0,t)}Rr(t)}var Ju=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(Ju||{});function Wp(n,e,t,r){let o=Y(null);try{let[i,s,a]=n.inputs[t],c=null;(s&Ju.SignalBased)!==0&&(c=e[i][mt]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,c,r,t,i):XC(e,c,i,r)}finally{Y(o)}}var Nr=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(Nr||{}),L_;function fg(n,e){return L_(n,e)}var Ji=new Set,hg=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(hg||{}),Ga=new k(""),kC=new Set;function pg(n){kC.has(n)||(kC.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var PE=!1,Yp=class extends we{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,qv()&&(this.destroyRef=E(Do,{optional:!0})??void 0,this.pendingTasks=E(En,{optional:!0})??void 0)}emit(e){let t=Y(null);try{super.next(e)}finally{Y(t)}}subscribe(e,t,r){let o=e,i=t||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;o=c.next?.bind(c),i=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(i=this.wrapInTimeout(i),o&&(o=this.wrapInTimeout(o)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:o,error:i,complete:s});return e instanceof Me&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},st=Yp;function xE(n){let e,t;function r(){n=La;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function OC(n){return queueMicrotask(()=>n()),()=>{n=La}}var gg="isAngularZone",Fu=gg+"_ID",F_=0,xe=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new st(!1);onMicrotaskEmpty=new st(!1);onStable=new st(!1);onError=new st(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:o=!1,scheduleInRootZone:i=PE}=e;if(typeof Zone>"u")throw new _(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!o&&r,s.shouldCoalesceRunChangeDetection=o,s.callbackScheduled=!1,s.scheduleInRootZone=i,B_(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(gg)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new _(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new _(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,o){let i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+o,e,U_,La,La);try{return i.runTask(s,t,r)}finally{i.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},U_={};function mg(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function H_(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){xE(()=>{n.callbackScheduled=!1,Qp(n),n.isCheckStableRunning=!0,mg(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Qp(n)}function B_(n){let e=()=>{H_(n)},t=F_++;n._inner=n._inner.fork({name:"angular",properties:{[gg]:!0,[Fu]:t,[Fu+t]:!0},onInvokeTask:(r,o,i,s,a,c)=>{if(j_(c))return r.invokeTask(i,s,a,c);try{return PC(n),r.invokeTask(i,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),xC(n)}},onInvoke:(r,o,i,s,a,c,l)=>{try{return PC(n),r.invoke(i,s,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!V_(c)&&e(),xC(n)}},onHasTask:(r,o,i,s)=>{r.hasTask(i,s),o===i&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Qp(n),mg(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,o,i,s)=>(r.handleError(i,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Qp(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function PC(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function xC(n){n._nesting--,mg(n)}var Uu=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new st;onMicrotaskEmpty=new st;onStable=new st;onError=new st;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,o){return e.apply(t,r)}};function j_(n){return LE(n,"__ignore_ng_zone__")}function V_(n){return LE(n,"__scheduler_tick__")}function LE(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var FE=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=O({token:n,providedIn:"root",factory:()=>new n})}return n})();var $_=new k("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function UE(n,e,t){let r=n.get($_);if(Array.isArray(e))for(let o of e)r.queue.add(o),t?.detachedLeaveAnimationFns?.push(o);else r.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(n)}function z_(n,e){for(let[t,r]of e)UE(n,r.animateFns)}function LC(n,e,t,r){let o=n?.[ba]?.enter;e!==null&&o&&o.has(t.index)&&z_(r,o)}function Wi(n,e,t,r,o,i,s,a){if(o!=null){let c,l=!1;nn(o)?c=o:vn(o)&&(l=!0,o=o[tn]);let u=Vt(o);n===0&&r!==null?(LC(a,r,i,t),s==null?DE(e,r,u):Lu(e,r,u,s||null,!0)):n===1&&r!==null?(LC(a,r,i,t),Lu(e,r,u,s||null,!0)):n===2?FC(a,i,t,f=>{C_(e,u,l,f)}):n===3&&FC(a,i,t,()=>{e.destroyNode(u)}),c!=null&&rD(e,n,t,c,i,r,s)}}function G_(n,e){HE(n,e),e[tn]=null,e[Bt]=null}function q_(n,e,t,r,o,i){r[tn]=o,r[Bt]=e,Zu(n,r,t,1,o,i)}function HE(n,e){e[Vn].changeDetectionScheduler?.notify(9),Zu(n,e,e[$e],2,null,null)}function K_(n){let e=n[Gi];if(!e)return Up(n[W],n);for(;e;){let t=null;if(vn(e))t=e[Gi];else{let r=e[Ct];r&&(t=r)}if(!t){for(;e&&!e[Ht]&&e!==n;)vn(e)&&Up(e[W],e),e=e[Ke];e===null&&(e=n),vn(e)&&Up(e[W],e),t=e&&e[Ht]}e=t}}function yg(n,e){let t=n[Ma],r=t.indexOf(e);t.splice(r,1)}function BE(n,e){if(_o(e))return;let t=e[$e];t.destroyNode&&Zu(n,e,t,3,null,null),K_(e)}function Up(n,e){if(_o(e))return;let t=Y(null);try{e[G]&=-129,e[G]|=256,e[_t]&&ha(e[_t]),Q_(n,e),Y_(n,e),e[W].type===1&&e[$e].destroy();let r=e[To];if(r!==null&&nn(e[Ke])){r!==e[Ke]&&yg(r,e);let o=e[wo];o!==null&&o.detachView(n)}Gp(e)}finally{Y(t)}}function FC(n,e,t,r){let o=n?.[ba];if(o==null||o.leave==null||!o.leave.has(e.index))return r(!1);n&&Ji.add(n),UE(t,()=>{if(o.leave&&o.leave.has(e.index)){let s=o.leave.get(e.index),a=[];if(s){for(let c=0;c<s.animateFns.length;c++){let l=s.animateFns[c],{promise:u}=l();a.push(u)}o.detachedLeaveAnimationFns=void 0}o.running=Promise.allSettled(a),W_(n,r)}else n&&Ji.delete(n),r(!1)},o)}function W_(n,e){let t=n[ba]?.running;if(t){t.then(()=>{n[ba].running=void 0,Ji.delete(n),e(!0)});return}e(!1)}function Y_(n,e){let t=n.cleanup,r=e[zi];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[zi]=null);let o=e[jn];if(o!==null){e[jn]=null;for(let s=0;s<o.length;s++){let a=o[s];a()}}let i=e[Da];if(i!==null){e[Da]=null;for(let s of i)s.destroy()}}function Q_(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let o=e[t[r]];if(!(o instanceof Ha)){let i=t[r+1];if(Array.isArray(i))for(let s=0;s<i.length;s+=2){let a=o[i[s]],c=i[s+1];fe(4,a,c);try{c.call(a)}finally{fe(5,a,c)}}else{fe(4,o,i);try{i.call(o)}finally{fe(5,o,i)}}}}}function J_(n,e,t){return Z_(n,e.parent,t)}function Z_(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[tn];if(Dr(r)){let{encapsulation:o}=n.data[r.directiveStart+r.componentOffset];if(o===$n.None||o===$n.Emulated)return null}return Cn(r,t)}function X_(n,e,t){return tD(n,e,t)}function eD(n,e,t){return n.type&40?Cn(n,t):null}var tD=eD,UC;function vg(n,e,t,r){let o=J_(n,r,e),i=e[$e],s=r.parent||e[Bt],a=X_(s,r,e);if(o!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)MC(i,o,t[c],a,!1);else MC(i,o,t,a,!1);UC!==void 0&&UC(i,r,e,t,o)}function Fa(n,e){if(e!==null){let t=e.type;if(t&3)return Cn(e,n);if(t&4)return Jp(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Fa(n,r);{let o=n[e.index];return nn(o)?Jp(-1,o):Vt(o)}}else{if(t&128)return Fa(n,e.next);if(t&32)return fg(e,n)()||Vt(n[e.index]);{let r=jE(n,e);if(r!==null){if(Array.isArray(r))return r[0];let o=Er(n[jt]);return Fa(o,r)}else return Fa(n,e.next)}}}return null}function jE(n,e){if(e!==null){let r=n[jt][Bt],o=e.projection;return r.projection[o]}return null}function Jp(n,e){let t=Ct+n+1;if(t<e.length){let r=e[t],o=r[W].firstChild;if(o!==null)return Fa(r,o)}return e[_r]}function Cg(n,e,t,r,o,i,s){for(;t!=null;){let a=r[Ar];if(t.type===128){t=t.next;continue}let c=r[t.index],l=t.type;if(s&&e===0&&(c&&Qi(Vt(c),r),t.flags|=2),!ag(t))if(l&8)Cg(n,e,t.child,r,o,i,!1),Wi(e,n,a,o,c,t,i,r);else if(l&32){let u=fg(t,r),f;for(;f=u();)Wi(e,n,a,o,f,t,i,r);Wi(e,n,a,o,c,t,i,r)}else l&16?nD(n,e,r,t,o,i):Wi(e,n,a,o,c,t,i,r);t=s?t.projectionNext:t.next}}function Zu(n,e,t,r,o,i){Cg(t,r,n.firstChild,e,o,i,!1)}function nD(n,e,t,r,o,i){let s=t[jt],c=s[Bt].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];Wi(e,n,t[Ar],o,u,r,i,t)}else{let l=c,u=s[Ke];gE(r)&&(l.flags|=128),Cg(n,e,l,u,o,i,!0)}}function rD(n,e,t,r,o,i,s){let a=r[_r],c=Vt(r);a!==c&&Wi(e,n,t,i,a,o,s);for(let l=Ct;l<r.length;l++){let u=r[l];Zu(u[W],u,n,e,i,a)}}function VE(n,e,t,r,o){let i=Su(),s=r&2;try{Rr(-1),s&&e.length>it&&OE(n,e,it,!1),fe(s?2:0,o,t),t(r,o)}finally{Rr(i),fe(s?3:1,o,t)}}function Eg(n,e,t){dD(n,e,t),(t.flags&64)===64&&fD(n,e,t)}function $E(n,e,t=Cn){let r=e.localNames;if(r!==null){let o=e.index+1;for(let i=0;i<r.length;i+=2){let s=r[i+1],a=s===-1?t(e,n):n[s];n[o++]=a}}}function oD(n,e,t,r){let i=r.get(TE,IE)||t===$n.ShadowDom,s=n.selectRootElement(e,i);return iD(s),s}function iD(n){sD(n)}var sD=()=>null;function aD(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function cD(n,e,t,r,o,i){let s=e[W];if(Ig(n,s,e,t,r)){Dr(n)&&uD(e,n.index);return}n.type&3&&(t=aD(t)),lD(n,e,t,r,o,i)}function lD(n,e,t,r,o,i){if(n.type&3){let s=Cn(n,e);r=i!=null?i(r,n.value||"",t):r,o.setProperty(s,t,r)}else n.type&12}function uD(n,e){let t=$t(e,n);t[G]&16||(t[G]|=64)}function dD(n,e,t){let r=t.directiveStart,o=t.directiveEnd;Dr(t)&&x_(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||cE(t,e);let i=t.initialInputs;for(let s=r;s<o;s++){let a=n.data[s],c=$p(e,n,s,t);if(Qi(c,e),i!==null&&pD(e,s-r,c,a,t,i),Ao(a)){let l=$t(t.index,e);l[ot]=$p(e,n,s,t)}}}function fD(n,e,t){let r=t.directiveStart,o=t.directiveEnd,i=t.index,s=pC();try{Rr(i);for(let a=r;a<o;a++){let c=n.data[a],l=e[a];Eu(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&hD(c,l)}}finally{Rr(-1),Eu(s)}}function hD(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function zE(n,e){let t=n.directiveRegistry,r=null;if(t)for(let o=0;o<t.length;o++){let i=t[o];D_(e,i.selectors,!1)&&(r??=[],Ao(i)?r.unshift(i):r.push(i))}return r}function pD(n,e,t,r,o,i){let s=i[e];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],l=s[a+1];Wp(r,t,c,l)}}function gD(n,e,t,r,o){let i=it+t,s=e[W],a=o(s,e,n,r,t);e[i]=a,Ki(n,!0);let c=n.type===2;return c?(bE(e[$e],a,n),(rC()===0||Na(n))&&Qi(a,e),oC()):Qi(a,e),wu()&&(!c||!ag(n))&&vg(s,e,a,n),n}function mD(n){let e=n;return wp()?uC():(e=e.parent,Ki(e,!1)),e}function yD(n,e){let t=n[Ar];if(!t)return;let r;try{r=t.get(Dt,null)}catch{r=null}r?.(e)}function Ig(n,e,t,r,o){let i=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let c=0;c<s.length;c+=2){let l=s[c],u=s[c+1],f=e.data[l];Wp(f,t[l],u,o),a=!0}if(i)for(let c of i){let l=t[c],u=e.data[c];Wp(u,l,r,o),a=!0}return a}function vD(n,e){let t=$t(e,n),r=t[W];CD(r,t);let o=t[tn];o!==null&&t[Aa]===null&&(t[Aa]=SE(o,t[Ar])),fe(18),Tg(r,t,t[ot]),fe(19,t[ot])}function CD(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Tg(n,e,t){Iu(e);try{let r=n.viewQuery;r!==null&&Kp(1,r,t);let o=n.template;o!==null&&VE(n,e,o,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[wo]?.finishViewCreation(n),n.staticContentQueries&&wE(n,e),n.staticViewQueries&&Kp(2,n.viewQuery,t);let i=n.components;i!==null&&ED(e,i)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[G]&=-5,Tu()}}function ED(n,e){for(let t=0;t<e.length;t++)vD(n,e[t])}function ID(n,e,t,r){let o=Y(null);try{let i=e.tView,a=n[G]&4096?4096:16,c=ug(n,i,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[To]=l;let u=n[wo];return u!==null&&(c[wo]=u.createEmbeddedView(i)),Tg(i,c,t),c}finally{Y(o)}}function HC(n,e){return!e||e.firstChild===null||gE(n)}function Ba(n,e,t,r,o=!1){for(;t!==null;){if(t.type===128){t=o?t.projectionNext:t.next;continue}let i=e[t.index];i!==null&&r.push(Vt(i)),nn(i)&&GE(i,r);let s=t.type;if(s&8)Ba(n,e,t.child,r);else if(s&32){let a=fg(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=jE(e,t);if(Array.isArray(a))r.push(...a);else{let c=Er(e[jt]);Ba(c[W],c,a,r,!0)}}t=o?t.projectionNext:t.next}return r}function GE(n,e){for(let t=Ct;t<n.length;t++){let r=n[t],o=r[W].firstChild;o!==null&&Ba(r[W],r,o,e)}n[_r]!==n[tn]&&e.push(n[_r])}function qE(n){if(n[mu]!==null){for(let e of n[mu])e.impl.addSequence(e);n[mu].length=0}}var KE=[];function TD(n){return n[_t]??SD(n)}function SD(n){let e=KE.pop()??Object.create(AD);return e.lView=n,e}function wD(n){n.lView[_t]!==n&&(n.lView=null,KE.push(n))}var AD=A(m({},la),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Pa(n.lView)},consumerOnSignalRead(){this.lView[_t]=this}});function _D(n){let e=n[_t]??Object.create(DD);return e.lView=n,e}var DD=A(m({},la),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Er(n.lView);for(;e&&!WE(e[W]);)e=Er(e);e&&Ep(e)},consumerOnSignalRead(){this.lView[_t]=this}});function WE(n){return n.type!==2}function YE(n){if(n[Da]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[Da])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[G]&8192)}}var bD=100;function QE(n,e=0){let r=n[Vn].rendererFactory,o=!1;o||r.begin?.();try{RD(n,e)}finally{o||r.end?.()}}function RD(n,e){let t=Ap();try{_p(!0),Zp(n,e);let r=0;for(;Oa(n);){if(r===bD)throw new _(103,!1);r++,Zp(n,1)}}finally{_p(t)}}function MD(n,e,t,r){if(_o(e))return;let o=e[G],i=!1,s=!1;Iu(e);let a=!0,c=null,l=null;i||(WE(n)?(l=TD(e),c=da(l)):Ul()===null?(a=!1,l=_D(e),c=da(l)):e[_t]&&(ha(e[_t]),e[_t]=null));try{Cp(e),dC(n.bindingStartIndex),t!==null&&VE(n,e,t,2,r);let u=(o&3)===3;if(!i)if(u){let p=n.preOrderCheckHooks;p!==null&&Ru(e,p,null)}else{let p=n.preOrderHooks;p!==null&&Mu(e,p,0,null),Lp(e,0)}if(s||ND(e),YE(e),JE(e,0),n.contentQueries!==null&&wE(n,e),!i)if(u){let p=n.contentCheckHooks;p!==null&&Ru(e,p)}else{let p=n.contentHooks;p!==null&&Mu(e,p,1),Lp(e,1)}OD(n,e);let f=n.components;f!==null&&XE(e,f,0);let g=n.viewQuery;if(g!==null&&Kp(2,g,r),!i)if(u){let p=n.viewCheckHooks;p!==null&&Ru(e,p)}else{let p=n.viewHooks;p!==null&&Mu(e,p,2),Lp(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[gu]){for(let p of e[gu])p();e[gu]=null}i||(qE(e),e[G]&=-73)}catch(u){throw i||Pa(e),u}finally{l!==null&&(Hl(l,c),a&&wD(l)),Tu()}}function JE(n,e){for(let t=yE(n);t!==null;t=vE(t))for(let r=Ct;r<t.length;r++){let o=t[r];ZE(o,e)}}function ND(n){for(let e=yE(n);e!==null;e=vE(e)){if(!(e[G]&2))continue;let t=e[Ma];for(let r=0;r<t.length;r++){let o=t[r];Ep(o)}}}function kD(n,e,t){fe(18);let r=$t(e,n);ZE(r,t),fe(19,r[ot])}function ZE(n,e){vu(n)&&Zp(n,e)}function Zp(n,e){let r=n[W],o=n[G],i=n[_t],s=!!(e===0&&o&16);if(s||=!!(o&64&&e===0),s||=!!(o&1024),s||=!!(i?.dirty&&fa(i)),s||=!1,i&&(i.dirty=!1),n[G]&=-9217,s)MD(r,n,r.template,n[ot]);else if(o&8192){let a=Y(null);try{YE(n),JE(n,1);let c=r.components;c!==null&&XE(n,c,1),qE(n)}finally{Y(a)}}}function XE(n,e,t){for(let r=0;r<e.length;r++)kD(n,e[r],t)}function OD(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let o=t[r];if(o<0)Rr(~o);else{let i=o,s=t[++r],a=t[++r];hC(s,i);let c=e[i];fe(24,c),a(2,c),fe(25,c)}}}finally{Rr(-1)}}function Sg(n,e){let t=Ap()?64:1088;for(n[Vn].changeDetectionScheduler?.notify(e);n;){n[G]|=t;let r=Er(n);if(qi(n)&&!r)return n;n=r}return null}function eI(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function PD(n,e,t,r=!0){let o=e[W];if(xD(o,e,n,t),r){let s=Jp(t,n),a=e[$e],c=a.parentNode(n[_r]);c!==null&&q_(o,n[Bt],a,e,c,s)}let i=e[Aa];i!==null&&i.firstChild!==null&&(i.firstChild=null)}function Xp(n,e){if(n.length<=Ct)return;let t=Ct+e,r=n[t];if(r){let o=r[To];o!==null&&o!==n&&yg(o,r),e>0&&(n[t-1][Ht]=r[Ht]);let i=Ta(n,Ct+e);G_(r[W],r);let s=i[wo];s!==null&&s.detachView(i[W]),r[Ke]=null,r[Ht]=null,r[G]&=-129}return r}function xD(n,e,t,r){let o=Ct+r,i=t.length;r>0&&(t[o-1][Ht]=e),r<i-Ct?(e[Ht]=t[o],cp(t,Ct+r,e)):(t.push(e),e[Ht]=null),e[Ke]=t;let s=e[To];s!==null&&t!==s&&tI(s,e);let a=e[wo];a!==null&&a.insertView(n),Cu(e),e[G]|=128}function tI(n,e){let t=n[Ma],r=e[Ke];if(vn(r))n[G]|=2;else{let o=r[Ke][jt];e[jt]!==o&&(n[G]|=2)}t===null?n[Ma]=[e]:t.push(e)}var Mr=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[W];return Ba(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[ot]}set context(e){this._lView[ot]=e}get destroyed(){return _o(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Ke];if(nn(e)){let t=e[Ra],r=t?t.indexOf(this):-1;r>-1&&(Xp(e,r),Ta(t,r))}this._attachedToViewContainer=!1}BE(this._lView[W],this._lView)}onDestroy(e){Ip(this._lView,e)}markForCheck(){Sg(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[G]&=-129}reattach(){Cu(this._lView),this._lView[G]|=128}detectChanges(){this._lView[G]|=1024,QE(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new _(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=qi(this._lView),t=this._lView[To];t!==null&&!e&&yg(t,this._lView),HE(this._lView[W],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new _(902,!1);this._appRef=e;let t=qi(this._lView),r=this._lView[To];r!==null&&!t&&tI(r,this._lView),Cu(this._lView)}};var qa=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=LD;constructor(t,r,o){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=o}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,o){let i=ID(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:o});return new Mr(i)}}return n})();function LD(){return FD(zt(),Ie())}function FD(n,e){return n.type&4?new qa(e,n,qu(n,e)):null}function wg(n,e,t,r,o){let i=n.data[e];if(i===null)i=UD(n,e,t,r,o),fC()&&(i.flags|=32);else if(i.type&64){i.type=t,i.value=r,i.attrs=o;let s=lC();i.injectorIndex=s===null?-1:s.injectorIndex}return Ki(i,!0),i}function UD(n,e,t,r,o){let i=Sp(),s=wp(),a=s?i:i&&i.parent,c=n.data[e]=BD(n,a,t,e,r,o);return HD(n,c,i,s),c}function HD(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function BD(n,e,t,r,o,i){let s=e?e.injectorIndex:-1,a=0;return sC()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:o,attrs:i,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var hH=new RegExp(`^(\\d+)*(${h_}|${f_})*(.*)`);var jD=()=>null;function BC(n,e){return jD(n,e)}var nI=class{},Xu=class{},eg=class{resolveComponentFactory(e){throw new _(917,!1)}},Ka=class{static NULL=new eg},Ro=class{},Ag=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>VD()}return n})();function VD(){let n=Ie(),e=zt(),t=$t(e.index,n);return(vn(t)?t:n)[$e]}var rI=(()=>{class n{static \u0275prov=O({token:n,providedIn:"root",factory:()=>null})}return n})();var Nu={},tg=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let o=this.injector.get(e,Nu,r);return o!==Nu||t===Nu?o:this.parentInjector.get(e,t,r)}};function jC(n,e,t){let r=t?n.styles:null,o=t?n.classes:null,i=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")i=a;else if(i==1)o=Jh(o,a);else if(i==2){let c=a,l=e[++s];r=Jh(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=o:n.classesWithoutHost=o}function Ye(n,e=0){let t=Ie();if(t===null)return P(n,e);let r=zt();return fE(r,t,vt(n),e)}function oI(n,e,t,r,o){let i=r===null?null:{"":-1},s=o(n,t);if(s!==null){let a=s,c=null,l=null;for(let u of s)if(u.resolveHostDirectives!==null){[a,c,l]=u.resolveHostDirectives(s);break}GD(n,e,t,a,i,c,l)}i!==null&&r!==null&&$D(t,r,i)}function $D(n,e,t){let r=n.localNames=[];for(let o=0;o<e.length;o+=2){let i=t[e[o+1]];if(i==null)throw new _(-301,!1);r.push(e[o],i)}}function zD(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function GD(n,e,t,r,o,i,s){let a=r.length,c=!1;for(let g=0;g<a;g++){let p=r[g];!c&&Ao(p)&&(c=!0,zD(n,t,g)),t_(cE(t,e),n,p.type)}JD(t,n.data.length,a);for(let g=0;g<a;g++){let p=r[g];p.providersResolver&&p.providersResolver(p)}let l=!1,u=!1,f=kE(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let g=0;g<a;g++){let p=r[g];if(t.mergedAttrs=rg(t.mergedAttrs,p.hostAttrs),KD(n,t,e,f,p),QD(f,p,o),s!==null&&s.has(p)){let[S,w]=s.get(p);t.directiveToIndex.set(p.type,[f,S+t.directiveStart,w+t.directiveStart])}else(i===null||!i.has(p))&&t.directiveToIndex.set(p.type,f);p.contentQueries!==null&&(t.flags|=4),(p.hostBindings!==null||p.hostAttrs!==null||p.hostVars!==0)&&(t.flags|=64);let I=p.type.prototype;!l&&(I.ngOnChanges||I.ngOnInit||I.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),l=!0),!u&&(I.ngOnChanges||I.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),u=!0),f++}qD(n,t,i)}function qD(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let o=n.data[r];if(t===null||!t.has(o))VC(0,e,o,r),VC(1,e,o,r),zC(e,r,!1);else{let i=t.get(o);$C(0,e,i,r),$C(1,e,i,r),zC(e,r,!0)}}}function VC(n,e,t,r){let o=n===0?t.inputs:t.outputs;for(let i in o)if(o.hasOwnProperty(i)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[i]??=[],s[i].push(r),iI(e,i)}}function $C(n,e,t,r){let o=n===0?t.inputs:t.outputs;for(let i in o)if(o.hasOwnProperty(i)){let s=o[i],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,i),iI(e,s)}}function iI(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function zC(n,e,t){let{attrs:r,inputs:o,hostDirectiveInputs:i}=n;if(r===null||!t&&o===null||t&&i===null||cg(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!t&&o.hasOwnProperty(c)){let l=o[c];for(let u of l)if(u===e){s??=[],s.push(c,r[a+1]);break}}else if(t&&i.hasOwnProperty(c)){let l=i[c];for(let u=0;u<l.length;u+=2)if(l[u]===e){s??=[],s.push(l[u+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function KD(n,e,t,r,o){n.data[r]=o;let i=o.factory||(o.factory=Cr(o.type,!0)),s=new Ha(i,Ao(o),Ye,null);n.blueprint[r]=s,t[r]=s,WD(n,e,r,kE(n,t,o.hostVars,No),o)}function WD(n,e,t,r,o){let i=o.hostBindings;if(i){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;YD(s)!=a&&s.push(a),s.push(t,r,i)}}function YD(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function QD(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Ao(e)&&(t[""]=n)}}function JD(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function sI(n,e,t,r,o,i,s,a){let c=e[W],l=c.consts,u=ka(l,s),f=wg(c,n,t,r,u);return i&&oI(c,e,f,ka(l,a),o),f.mergedAttrs=rg(f.mergedAttrs,f.attrs),f.attrs!==null&&jC(f,f.attrs,!1),f.mergedAttrs!==null&&jC(f,f.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,f),f}function aI(n,e){rE(n,e),yp(e)&&n.queries.elementEnd(e)}function _g(n){return lI(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function cI(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function lI(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function uI(n,e,t){return n[e]=t}function ja(n,e,t){if(t===No)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function dI(n,e,t,r){let o=ja(n,e,t);return ja(n,e+1,r)||o}function ZD(n,e,t,r,o){let i=dI(n,e,t,r);return ja(n,e+2,o)||i}function Hp(n,e,t){return function r(o){let i=Dr(n)?$t(n.index,e):e;Sg(i,5);let s=e[ot],a=GC(e,s,t,o),c=r.__ngNextListenerFn__;for(;c;)a=GC(e,s,c,o)&&a,c=c.__ngNextListenerFn__;return a}}function GC(n,e,t,r){let o=Y(null);try{return fe(6,e,t),t(r)!==!1}catch(i){return yD(n,i),!1}finally{fe(7,e,t),Y(o)}}function XD(n,e,t,r,o,i,s,a){let c=Na(n),l=!1,u=null;if(!r&&c&&(u=tb(e,t,i,n.index)),u!==null){let f=u.__ngLastListenerFn__||u;f.__ngNextListenerFn__=s,u.__ngLastListenerFn__=s,l=!0}else{let f=Cn(n,t),g=r?r(f):f;g_(t,g,i,a);let p=o.listen(g,i,a);if(!eb(i)){let I=r?S=>r(Vt(S[n.index])):n.index;fI(I,e,t,i,a,p,!1)}}return l}function eb(n){return n.startsWith("animation")||n.startsWith("transition")}function tb(n,e,t,r){let o=n.cleanup;if(o!=null)for(let i=0;i<o.length-1;i+=2){let s=o[i];if(s===t&&o[i+1]===r){let a=e[zi],c=o[i+2];return a&&a.length>c?a[c]:null}typeof s=="string"&&(i+=2)}return null}function fI(n,e,t,r,o,i,s){let a=e.firstCreatePass?nC(e):null,c=tC(t),l=c.length;c.push(o,i),a&&a.push(r,n,l,(l+1)*(s?-1:1))}function qC(n,e,t,r,o,i){let s=e[t],a=e[W],l=a.data[t].outputs[r],f=s[l].subscribe(i);fI(n.index,a,e,o,i,f,!0)}var ng=Symbol("BINDING");var Hu=class extends Ka{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=wr(e);return new Zi(t,this.ngModule)}};function nb(n){return Object.keys(n).map(e=>{let[t,r,o]=n[e],i={propName:t,templateName:e,isSignal:(r&Ju.SignalBased)!==0};return o&&(i.transform=o),i})}function rb(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function ob(n,e,t){let r=e instanceof Oe?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new tg(t,r):t}function ib(n){let e=n.get(Ro,null);if(e===null)throw new _(407,!1);let t=n.get(rI,null),r=n.get(Ir,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function sb(n,e){let t=hI(n);return _E(e,t,t==="svg"?Wv:t==="math"?Yv:null)}function hI(n){return(n.selectors[0][0]||"div").toLowerCase()}var Zi=class extends Xu{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=nb(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=rb(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=N_(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,o,i,s){fe(22);let a=Y(null);try{let c=this.componentDef,l=ab(r,c,s,i),u=ob(c,o||this.ngModule,e),f=ib(u),g=f.rendererFactory.createRenderer(null,c),p=r?oD(g,r,c.encapsulation,u):sb(c,g),I=s?.some(KC)||i?.some(N=>typeof N!="function"&&N.bindings.some(KC)),S=ug(null,l,null,512|NE(c),null,null,f,g,u,null,SE(p,u,!0));S[it]=p,Iu(S);let w=null;try{let N=sI(it,S,2,"#host",()=>l.directiveRegistry,!0,0);bE(g,p,N),Qi(p,S),Eg(l,S,N),AE(l,N,S),aI(l,N),t!==void 0&&lb(N,this.ngContentSelectors,t),w=$t(N.index,S),S[ot]=w[ot],Tg(l,S,null)}catch(N){throw w!==null&&Gp(w),Gp(S),N}finally{fe(23),Tu()}return new Bu(this.componentType,S,!!I)}finally{Y(a)}}};function ab(n,e,t,r){let o=n?["ng-version","20.3.15"]:k_(e.selectors[0]),i=null,s=null,a=0;if(t)for(let u of t)a+=u[ng].requiredVars,u.create&&(u.targetIdx=0,(i??=[]).push(u)),u.update&&(u.targetIdx=0,(s??=[]).push(u));if(r)for(let u=0;u<r.length;u++){let f=r[u];if(typeof f!="function")for(let g of f.bindings){a+=g[ng].requiredVars;let p=u+1;g.create&&(g.targetIdx=p,(i??=[]).push(g)),g.update&&(g.targetIdx=p,(s??=[]).push(g))}}let c=[e];if(r)for(let u of r){let f=typeof u=="function"?u:u.type,g=fp(f);c.push(g)}return lg(0,null,cb(i,s),1,a,c,null,null,null,[o],null)}function cb(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function KC(n){let e=n[ng].kind;return e==="input"||e==="twoWay"}var Bu=class extends nI{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=yu(t[W],it),this.location=qu(this._tNode,t),this.instance=$t(this._tNode.index,t)[ot],this.hostView=this.changeDetectorRef=new Mr(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView,i=Ig(r,o[W],o,e,t);this.previousInputValues.set(e,t);let s=$t(r.index,o);Sg(s,1)}get injector(){return new bo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function lb(n,e,t){let r=n.projection=[];for(let o=0;o<e.length;o++){let i=t[o];r.push(i!=null&&i.length?Array.from(i):null)}}var ko=(()=>{class n{static __NG_ELEMENT_ID__=ub}return n})();function ub(){let n=zt();return fb(n,Ie())}var db=ko,pI=class extends db{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return qu(this._hostTNode,this._hostLView)}get injector(){return new bo(this._hostTNode,this._hostLView)}get parentInjector(){let e=og(this._hostTNode,this._hostLView);if(iE(e)){let t=Pu(e,this._hostLView),r=Ou(e),o=t[W].data[r+8];return new bo(o,t)}else return new bo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=WC(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Ct}createEmbeddedView(e,t,r){let o,i;typeof r=="number"?o=r:r!=null&&(o=r.index,i=r.injector);let s=BC(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},i,s);return this.insertImpl(a,o,HC(this._hostTNode,s)),a}createComponent(e,t,r,o,i,s,a){let c=e&&!BA(e),l;if(c)l=t;else{let w=t||{};l=w.index,r=w.injector,o=w.projectableNodes,i=w.environmentInjector||w.ngModuleRef,s=w.directives,a=w.bindings}let u=c?e:new Zi(wr(e)),f=r||this.parentInjector;if(!i&&u.ngModule==null){let N=(c?f:this.parentInjector).get(Oe,null);N&&(i=N)}let g=wr(u.componentType??{}),p=BC(this._lContainer,g?.id??null),I=p?.firstChild??null,S=u.create(f,o,I,i,s,a);return this.insertImpl(S.hostView,l,HC(this._hostTNode,p)),S}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let o=e._lView;if(Zv(o)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=o[Ke],l=new pI(c,c[Bt],c[Ke]);l.detach(l.indexOf(e))}}let i=this._adjustIndex(t),s=this._lContainer;return PD(s,o,i,r),e.attachToViewContainerRef(),cp(Bp(s),i,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=WC(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Xp(this._lContainer,t);r&&(Ta(Bp(this._lContainer),t),BE(r[W],r))}detach(e){let t=this._adjustIndex(e,-1),r=Xp(this._lContainer,t);return r&&Ta(Bp(this._lContainer),t)!=null?new Mr(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function WC(n){return n[Ra]}function Bp(n){return n[Ra]||(n[Ra]=[])}function fb(n,e){let t,r=e[n.index];return nn(r)?t=r:(t=eI(r,e,null,n),e[n.index]=t,dg(e,t)),pb(t,e,n,r),new pI(t,n,e)}function hb(n,e){let t=n[$e],r=t.createComment(""),o=Cn(e,n),i=t.parentNode(o);return Lu(t,i,r,t.nextSibling(o),!1),r}var pb=yb,gb=()=>!1;function mb(n,e,t){return gb(n,e,t)}function yb(n,e,t,r){if(n[_r])return;let o;t.type&8?o=Vt(r):o=hb(e,t),n[_r]=o}var Mo=class{},ed=class{};var ju=class extends Mo{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Hu(this);constructor(e,t,r,o=!0){super(),this.ngModuleType=e,this._parent=t;let i=dp(e);this._bootstrapComponents=RE(i.bootstrap),this._r3Injector=kp(e,t,[{provide:Mo,useValue:this},{provide:Ka,useValue:this.componentFactoryResolver},...r],vr(e),new Set(["environment"])),o&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Vu=class extends ed{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new ju(this.moduleType,e,[])}};var Va=class extends Mo{injector;componentFactoryResolver=new Hu(this);instance=null;constructor(e){super();let t=new mo([...e.providers,{provide:Mo,useValue:this},{provide:Ka,useValue:this.componentFactoryResolver}],e.parent||wa(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Wa(n,e,t=null){return new Va({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var vb=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=hp(!1,t.type),o=r.length>0?Wa([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,o)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=O({token:n,providedIn:"environment",factory:()=>new n(P(Oe))})}return n})();function Tn(n){return $a(()=>{let e=gI(n),t=A(m({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===ig.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?o=>o.get(vb).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||$n.Emulated,styles:n.styles||en,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&pg("NgStandalone"),mI(t);let r=n.dependencies;return t.directiveDefs=YC(r,Cb),t.pipeDefs=YC(r,jv),t.id=Tb(t),t})}function Cb(n){return wr(n)||fp(n)}function Oo(n){return $a(()=>({type:n.type,bootstrap:n.bootstrap||en,declarations:n.declarations||en,imports:n.imports||en,exports:n.exports||en,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Eb(n,e){if(n==null)return Eo;let t={};for(let r in n)if(n.hasOwnProperty(r)){let o=n[r],i,s,a,c;Array.isArray(o)?(a=o[0],i=o[1],s=o[2]??i,c=o[3]||null):(i=o,s=o,a=Ju.None,c=null),t[i]=[r,a,c],e[i]=s}return t}function Ib(n){if(n==null)return Eo;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Po(n){return $a(()=>{let e=gI(n);return mI(e),e})}function Dg(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function gI(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Eo,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||en,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:Eb(n.inputs,e),outputs:Ib(n.outputs),debugInfo:null}}function mI(n){n.features?.forEach(e=>e(n))}function YC(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let o of t){let i=e(o);i!==null&&r.push(i)}return r}:null}function Tb(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let i of r.join("|"))e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Sb(n,e,t,r,o,i,s,a){if(t.firstCreatePass){n.mergedAttrs=rg(n.mergedAttrs,n.attrs);let u=n.tView=lg(2,n,o,i,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),u.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),Ki(n,!1);let c=Ab(t,e,n,r);wu()&&vg(t,e,c,n),Qi(c,e);let l=eI(c,e,c,n);e[r+it]=l,dg(e,l),mb(l,n,e)}function wb(n,e,t,r,o,i,s,a,c,l,u){let f=t+it,g;return e.firstCreatePass?(g=wg(e,f,4,s||null,a||null),Tp()&&oI(e,n,g,ka(e.consts,l),zE),rE(e,g)):g=e.data[f],Sb(g,n,e,t,r,o,i,c),Na(g)&&Eg(e,n,g),l!=null&&$E(n,g,u),g}function bt(n,e,t,r,o,i,s,a){let c=Ie(),l=br(),u=ka(l.consts,i);return wb(c,l,n,e,t,r,o,u,void 0,s,a),bt}var Ab=_b;function _b(n,e,t,r){return Au(!0),e[$e].createComment("")}var bg=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var Rg=new k("");function Xi(n){return!!n&&typeof n.then=="function"}function Mg(n){return!!n&&typeof n.subscribe=="function"}var yI=new k("");var Ng=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=E(yI,{optional:!0})??[];injector=E(mn);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let o of this.appInits){let i=We(this.injector,o);if(Xi(i))t.push(i);else if(Mg(i)){let s=new Promise((a,c)=>{i.subscribe({complete:a,error:c})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(o=>{this.reject(o)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),td=new k("");function vI(){Sh(()=>{let n="";throw new _(600,n)})}function CI(n){return n.isBoundToModule}var Db=10;var xo=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=E(Dt);afterRenderManager=E(FE);zonelessEnabled=E(_u);rootEffectScheduler=E(xp);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new we;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=E(En);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(K(t=>!t))}constructor(){E(Ga,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:o=>{o&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=E(Oe);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,o=mn.NULL){return this._injector.get(xe).run(()=>{fe(10);let s=t instanceof Xu;if(!this._injector.get(Ng).done){let I="";throw new _(405,I)}let c;s?c=t:c=this._injector.get(Ka).resolveComponentFactory(t),this.componentTypes.push(c.componentType);let l=CI(c)?void 0:this._injector.get(Mo),u=r||c.selector,f=c.create(o,[],u,l),g=f.location.nativeElement,p=f.injector.get(Rg,null);return p?.registerApplication(g),f.onDestroy(()=>{this.detachView(f.hostView),Ua(this.components,f),p?.unregisterApplication(g)}),this._loadComponent(f),fe(11,f),f})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){fe(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(hg.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new _(101,!1);let t=Y(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,Y(t),this.afterTick.next(),fe(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Ro,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<Db;)fe(14),this.synchronizeOnce(),fe(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:o}of this.allViews){if(!r&&!Oa(o))continue;let i=r&&!this.zonelessEnabled?0:1;QE(o,i),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Oa(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Ua(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(o){this.internalErrorHandler(o)}this.components.push(t),this._injector.get(td,[]).forEach(o=>o(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Ua(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new _(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ua(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var EH=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function le(n,e,t){let r=Ie(),o=bp();if(ja(r,o,e)){let i=br(),s=CC();cD(s,r,n,e,r[$e],t)}return le}function QC(n,e,t,r,o){Ig(e,n,t,o?"class":"style",r)}function M(n,e,t,r){let o=Ie(),i=o[W],s=n+it,a=i.firstCreatePass?sI(s,o,2,e,zE,Tp(),t,r):i.data[s];if(gD(a,o,n,e,bb),Na(a)){let c=o[W];Eg(c,o,a),AE(c,a,o)}return r!=null&&$E(o,a),M}function D(){let n=br(),e=zt(),t=mD(e);return n.firstCreatePass&&aI(n,t),aC(t)&&cC(),iC(),t.classesWithoutHost!=null&&qA(t)&&QC(n,t,Ie(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&KA(t)&&QC(n,t,Ie(),t.stylesWithoutHost,!1),D}function te(n,e,t,r){return M(n,e,t,r),D(),te}var bb=(n,e,t,r,o)=>(Au(!0),_E(e[$e],r,EC()));var bu=void 0;function Rb(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var Mb=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],bu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],bu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",bu,"{1} 'at' {0}",bu],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",Rb],jp={};function Rt(n){let e=Nb(n),t=JC(e);if(t)return t;let r=e.split("-")[0];if(t=JC(r),t)return t;if(r==="en")return Mb;throw new _(701,!1)}function JC(n){return n in jp||(jp[n]=vo.ng&&vo.ng.common&&vo.ng.common.locales&&vo.ng.common.locales[n]),jp[n]}var Ae=(function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n})(Ae||{});function Nb(n){return n.toLowerCase().replace(/_/g,"-")}var Ya="en-US";var kb=Ya;function EI(n){typeof n=="string"&&(kb=n.toLowerCase().replace(/_/g,"-"))}function zn(n,e,t){let r=Ie(),o=br(),i=zt();return Ob(o,r,r[$e],i,n,e,t),zn}function Ob(n,e,t,r,o,i,s){let a=!0,c=null;if((r.type&3||s)&&(c??=Hp(r,e,i),XD(r,n,e,s,t,o,i,c)&&(a=!1)),a){let l=r.outputs?.[o],u=r.hostDirectiveOutputs?.[o];if(u&&u.length)for(let f=0;f<u.length;f+=2){let g=u[f],p=u[f+1];c??=Hp(r,e,i),qC(r,e,g,p,o,c)}if(l&&l.length)for(let f of l)c??=Hp(r,e,i),qC(r,e,f,o,o,c)}}function Sn(n=1){return vC(n)}function L(n,e=""){let t=Ie(),r=br(),o=n+it,i=r.firstCreatePass?wg(r,o,1,e,null):r.data[o],s=Pb(r,t,i,e,n);t[o]=s,wu()&&vg(r,t,s,i),Ki(i,!1)}var Pb=(n,e,t,r,o)=>(Au(!0),y_(e[$e],r));function xb(n,e,t,r=""){return ja(n,bp(),t)?e+ip(t)+r:No}function Lo(n){return at("",n),Lo}function at(n,e,t){let r=Ie(),o=xb(r,n,e,t);return o!==No&&Lb(r,Su(),o),at}function Lb(n,e,t){let r=Qv(e,n);v_(n[$e],r,t)}function nd(n,e,t,r,o,i){return Ub(Ie(),Dp(),n,e,t,r,o,i)}function II(n,e){let t=n[e];return t===No?void 0:t}function Fb(n,e,t,r,o,i,s){let a=e+t;return dI(n,a,o,i)?uI(n,a+2,s?r.call(s,o,i):r(o,i)):II(n,a+2)}function Ub(n,e,t,r,o,i,s,a){let c=e+t;return ZD(n,c,o,i,s)?uI(n,c+3,a?r.call(a,o,i,s):r(o,i,s)):II(n,c+3)}function kg(n,e){let t=br(),r,o=n+it;t.firstCreatePass?(r=Hb(e,t.pipeRegistry),t.data[o]=r,r.onDestroy&&(t.destroyHooks??=[]).push(o,r.onDestroy)):r=t.data[o];let i=r.factory||(r.factory=Cr(r.type,!0)),s,a=rt(Ye);try{let c=xu(!1),l=i();return xu(c),vp(t,Ie(),o,l),l}finally{rt(a)}}function Hb(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function Og(n,e,t,r){let o=n+it,i=Ie(),s=Jv(i,o);return Bb(i,o)?Fb(i,Dp(),e,s.transform,t,r,s):s.transform(t,r)}function Bb(n,e){return n[W].data[e].pure}var $u=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Pg=(()=>{class n{compileModuleSync(t){return new Vu(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),o=dp(t),i=RE(o.declarations).reduce((s,a)=>{let c=wr(a);return c&&s.push(new Zi(c)),s},[]);return new $u(r,i)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var jb=(()=>{class n{zone=E(xe);changeDetectionScheduler=E(Ir);applicationRef=E(xo);applicationErrorHandler=E(Dt);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function TI({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new xe(A(m({},SI()),{scheduleInRootZone:t})),[{provide:xe,useFactory:n},{provide:Sr,multi:!0,useFactory:()=>{let r=E(jb,{optional:!0});return()=>r.initialize()}},{provide:Sr,multi:!0,useFactory:()=>{let r=E(Vb);return()=>{r.initialize()}}},e===!0?{provide:Op,useValue:!0}:[],{provide:Pp,useValue:t??PE},{provide:Dt,useFactory:()=>{let r=E(xe),o=E(Oe),i;return s=>{r.runOutsideAngular(()=>{o.destroyed&&!i?setTimeout(()=>{throw s}):(i??=o.get(yn),i.handleError(s))})}}}]}function SI(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var Vb=(()=>{class n{subscription=new Me;initialized=!1;zone=E(xe);pendingTasks=E(En);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{xe.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{xe.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var wI=(()=>{class n{applicationErrorHandler=E(Dt);appRef=E(xo);taskService=E(En);ngZone=E(xe);zonelessEnabled=E(_u);tracing=E(Ga,{optional:!0});disableScheduling=E(Op,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Me;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Fu):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(E(Pp,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Uu||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let o=this.useMicrotaskScheduler?OC:xE;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>o(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>o(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Fu+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,OC(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function $b(){return typeof $localize<"u"&&$localize.locale||Ya}var Qa=new k("",{providedIn:"root",factory:()=>E(Qa,{optional:!0,skipSelf:!0})||$b()});function Gn(n){return Ov(n)}var AI=class{[mt];constructor(e){this[mt]=e}destroy(){this[mt].destroy()}};var RI=Symbol("InputSignalNode#UNSET"),oR=A(m({},Bl),{transformFn:void 0,applyValueToInputSignal(n,e){Ni(n,e)}});function MI(n,e){let t=Object.create(oR);t.value=n,t.transformFn=e?.transform;function r(){if(ua(t),t.value===RI){let o=null;throw new _(-950,o)}return t.value}return r[mt]=t,r}var iR=new k("");iR.__NG_ELEMENT_ID__=n=>{let e=zt();if(e===null)throw new _(204,!1);if(e.type&2)return e.value;if(n&8)return null;throw new _(204,!1)};function _I(n,e){return MI(n,e)}function sR(n){return MI(RI,n)}var NI=(_I.required=sR,_I);var xg=new k(""),aR=new k("");function Ja(n){return!n.moduleRef}function cR(n){let e=Ja(n)?n.r3Injector:n.moduleRef.injector,t=e.get(xe);return t.run(()=>{Ja(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Dt),o;if(t.runOutsideAngular(()=>{o=t.onError.subscribe({next:r})}),Ja(n)){let i=()=>e.destroy(),s=n.platformInjector.get(xg);s.add(i),e.onDestroy(()=>{o.unsubscribe(),s.delete(i)})}else{let i=()=>n.moduleRef.destroy(),s=n.platformInjector.get(xg);s.add(i),n.moduleRef.onDestroy(()=>{Ua(n.allPlatformModules,n.moduleRef),o.unsubscribe(),s.delete(i)})}return uR(r,t,()=>{let i=e.get(En),s=i.add(),a=e.get(Ng);return a.runInitializers(),a.donePromise.then(()=>{let c=e.get(Qa,Ya);if(EI(c||Ya),!e.get(aR,!0))return Ja(n)?e.get(xo):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Ja(n)){let u=e.get(xo);return n.rootComponent!==void 0&&u.bootstrap(n.rootComponent),u}else return lR?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void i.remove(s))})})}var lR;function uR(n,e,t){try{let r=t();return Xi(r)?r.catch(o=>{throw e.runOutsideAngular(()=>n(o)),o}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var rd=null;function dR(n=[],e){return mn.create({name:e,providers:[{provide:Sa,useValue:"platform"},{provide:xg,useValue:new Set([()=>rd=null])},...n]})}function fR(n=[]){if(rd)return rd;let e=dR(n);return rd=e,vI(),hR(e),e}function hR(n){let e=n.get(Yu,null);We(n,()=>{e?.forEach(t=>t())})}var jg=(()=>{class n{static __NG_ELEMENT_ID__=pR}return n})();function pR(n){return gR(zt(),Ie(),(n&16)===16)}function gR(n,e,t){if(Dr(n)&&!t){let r=$t(n.index,e);return new Mr(r,r)}else if(n.type&175){let r=e[jt];return new Mr(r,e)}return null}var Lg=class{constructor(){}supports(e){return _g(e)}create(e){return new Fg(e)}},mR=(n,e)=>e,Fg=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||mR}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,o=0,i=null;for(;t||r;){let s=!r||t&&t.currentIndex<DI(r,o,i)?t:r,a=DI(s,o,i),c=s.currentIndex;if(s===r)o--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)o++;else{i||(i=[]);let l=a-o,u=c-o;if(l!=u){for(let g=0;g<l;g++){let p=g<i.length?i[g]:i[g]=0,I=p+g;u<=I&&I<l&&(i[g]=p+1)}let f=s.previousIndex;i[f]=u-l}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!_g(e))throw new _(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,o,i,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)i=e[a],s=this._trackByFn(a,i),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,i,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,i,s,a)),Object.is(t.item,i)||this._addIdentityChange(t,i)),t=t._next}else o=0,cI(e,a=>{s=this._trackByFn(o,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,o),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,o)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,o++}),this.length=o;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,o){let i;return e===null?i=this._itTail:(i=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,i,o)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,o),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,i,o)):e=this._addAfter(new Ug(t,r),i,o)),e}_verifyReinsertion(e,t,r,o){let i=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return i!==null?e=this._reinsertAfter(i,e._prev,o):e.currentIndex!=o&&(e.currentIndex=o,this._addToMoves(e,o)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let o=e._prevRemoved,i=e._nextRemoved;return o===null?this._removalsHead=i:o._nextRemoved=i,i===null?this._removalsTail=o:i._prevRemoved=o,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let o=t===null?this._itHead:t._next;return e._next=o,e._prev=t,o===null?this._itTail=e:o._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new od),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new od),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Ug=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},Hg=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},od=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Hg,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,o=this.map.get(r);return o?o.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function DI(n,e,t){let r=n.previousIndex;if(r===null)return r;let o=0;return t&&r<t.length&&(o=t[r]),r+e+o}function bI(){return new Vg([new Lg])}var Vg=(()=>{class n{factories;static \u0275prov=O({token:n,providedIn:"root",factory:bI});constructor(t){this.factories=t}static create(t,r){if(r!=null){let o=r.factories.slice();t=t.concat(o)}return new n(t)}static extend(t){return{provide:n,useFactory:()=>{let r=E(n,{optional:!0,skipSelf:!0});return n.create(t,r||bI())}}}find(t){let r=this.factories.find(o=>o.supports(t));if(r!=null)return r;throw new _(901,!1)}}return n})();function kI(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:o}=n;fe(8);try{let i=o?.injector??fR(r),s=[TI({}),{provide:Ir,useExisting:wI},TC,...t||[]],a=new Va({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return cR({r3Injector:a.injector,platformInjector:i,rootComponent:e})}catch(i){return Promise.reject(i)}finally{fe(9)}}var xI=null;function qn(){return xI}function $g(n){xI??=n}var Za=class{},zg=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=O({token:n,factory:()=>E(LI),providedIn:"platform"})}return n})();var LI=(()=>{class n extends zg{_location;_history;_doc=E(Pe);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return qn().getBaseHref(this._doc)}onPopState(t){let r=qn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=qn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,o){this._history.pushState(t,r,o)}replaceState(t,r,o){this._history.replaceState(t,r,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=O({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function FI(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function OI(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function kr(n){return n&&n[0]!=="?"?`?${n}`:n}var id=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=O({token:n,factory:()=>E(HI),providedIn:"root"})}return n})(),UI=new k(""),HI=(()=>{class n extends id{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??E(Pe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return FI(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+kr(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,i){let s=this.prepareExternalUrl(o+kr(i));this._platformLocation.pushState(t,r,s)}replaceState(t,r,o,i){let s=this.prepareExternalUrl(o+kr(i));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(P(zg),P(UI,8))};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Kn=(()=>{class n{_subject=new we;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=CR(OI(PI(r))),this._locationStrategy.onPopState(o=>{this._subject.next({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+kr(r))}normalize(t){return n.stripTrailingSlash(vR(this._basePath,PI(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._locationStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+kr(r)),o)}replaceState(t,r="",o=null){this._locationStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+kr(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r??void 0,complete:o??void 0})}static normalizeQueryParams=kr;static joinWithSlash=FI;static stripTrailingSlash=OI;static \u0275fac=function(r){return new(r||n)(P(id))};static \u0275prov=O({token:n,factory:()=>yR(),providedIn:"root"})}return n})();function yR(){return new Kn(P(id))}function vR(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function PI(n){return n.replace(/\/index.html$/,"")}function CR(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var et=(function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n})(et||{}),de=(function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n})(de||{}),Et=(function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n})(Et||{}),Yn={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function zI(n){return Rt(n)[Ae.LocaleId]}function GI(n,e,t){let r=Rt(n),o=[r[Ae.DayPeriodsFormat],r[Ae.DayPeriodsStandalone]],i=qt(o,e);return qt(i,t)}function qI(n,e,t){let r=Rt(n),o=[r[Ae.DaysFormat],r[Ae.DaysStandalone]],i=qt(o,e);return qt(i,t)}function KI(n,e,t){let r=Rt(n),o=[r[Ae.MonthsFormat],r[Ae.MonthsStandalone]],i=qt(o,e);return qt(i,t)}function WI(n,e){let r=Rt(n)[Ae.Eras];return qt(r,e)}function Xa(n,e){let t=Rt(n);return qt(t[Ae.DateFormat],e)}function ec(n,e){let t=Rt(n);return qt(t[Ae.TimeFormat],e)}function tc(n,e){let r=Rt(n)[Ae.DateTimeFormat];return qt(r,e)}function nc(n,e){let t=Rt(n),r=t[Ae.NumberSymbols][e];if(typeof r>"u"){if(e===Yn.CurrencyDecimal)return t[Ae.NumberSymbols][Yn.Decimal];if(e===Yn.CurrencyGroup)return t[Ae.NumberSymbols][Yn.Group]}return r}function YI(n){if(!n[Ae.ExtraData])throw new _(2303,!1)}function QI(n){let e=Rt(n);return YI(e),(e[Ae.ExtraData][2]||[]).map(r=>typeof r=="string"?Gg(r):[Gg(r[0]),Gg(r[1])])}function JI(n,e,t){let r=Rt(n);YI(r);let o=[r[Ae.ExtraData][0],r[Ae.ExtraData][1]],i=qt(o,e)||[];return qt(i,t)||[]}function qt(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new _(2304,!1)}function Gg(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var ER=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,sd={},IR=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function ZI(n,e,t,r){let o=MR(n);e=Wn(t,e)||e;let s=[],a;for(;e;)if(a=IR.exec(e),a){s=s.concat(a.slice(1));let u=s.pop();if(!u)break;e=u}else{s.push(e);break}let c=o.getTimezoneOffset();r&&(c=eT(r,c),o=RR(o,r));let l="";return s.forEach(u=>{let f=DR(u);l+=f?f(o,t,c):u==="''"?"'":u.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function dd(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Wn(n,e){let t=zI(n);if(sd[t]??={},sd[t][e])return sd[t][e];let r="";switch(e){case"shortDate":r=Xa(n,Et.Short);break;case"mediumDate":r=Xa(n,Et.Medium);break;case"longDate":r=Xa(n,Et.Long);break;case"fullDate":r=Xa(n,Et.Full);break;case"shortTime":r=ec(n,Et.Short);break;case"mediumTime":r=ec(n,Et.Medium);break;case"longTime":r=ec(n,Et.Long);break;case"fullTime":r=ec(n,Et.Full);break;case"short":let o=Wn(n,"shortTime"),i=Wn(n,"shortDate");r=ad(tc(n,Et.Short),[o,i]);break;case"medium":let s=Wn(n,"mediumTime"),a=Wn(n,"mediumDate");r=ad(tc(n,Et.Medium),[s,a]);break;case"long":let c=Wn(n,"longTime"),l=Wn(n,"longDate");r=ad(tc(n,Et.Long),[c,l]);break;case"full":let u=Wn(n,"fullTime"),f=Wn(n,"fullDate");r=ad(tc(n,Et.Full),[u,f]);break}return r&&(sd[t][e]=r),r}function ad(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function on(n,e,t="-",r,o){let i="";(n<0||o&&n<=0)&&(o?n=-n+1:(n=-n,i=t));let s=String(n);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),i+s}function TR(n,e){return on(n,3).substring(0,e)}function Ne(n,e,t=0,r=!1,o=!1){return function(i,s){let a=SR(n,i);if((t>0||a>-t)&&(a+=t),n===3)a===0&&t===-12&&(a=12);else if(n===6)return TR(a,e);let c=nc(s,Yn.MinusSign);return on(a,e,c,r,o)}}function SR(n,e){switch(n){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new _(2301,!1)}}function pe(n,e,t=et.Format,r=!1){return function(o,i){return wR(o,i,n,e,t,r)}}function wR(n,e,t,r,o,i){switch(t){case 2:return KI(e,o,r)[n.getMonth()];case 1:return qI(e,o,r)[n.getDay()];case 0:let s=n.getHours(),a=n.getMinutes();if(i){let l=QI(e),u=JI(e,o,r),f=l.findIndex(g=>{if(Array.isArray(g)){let[p,I]=g,S=s>=p.hours&&a>=p.minutes,w=s<I.hours||s===I.hours&&a<I.minutes;if(p.hours<I.hours){if(S&&w)return!0}else if(S||w)return!0}else if(g.hours===s&&g.minutes===a)return!0;return!1});if(f!==-1)return u[f]}return GI(e,o,r)[s<12?0:1];case 3:return WI(e,r)[n.getFullYear()<=0?0:1];default:let c=t;throw new _(2302,!1)}}function cd(n){return function(e,t,r){let o=-1*r,i=nc(t,Yn.MinusSign),s=o>0?Math.floor(o/60):Math.ceil(o/60);switch(n){case 0:return(o>=0?"+":"")+on(s,2,i)+on(Math.abs(o%60),2,i);case 1:return"GMT"+(o>=0?"+":"")+on(s,1,i);case 2:return"GMT"+(o>=0?"+":"")+on(s,2,i)+":"+on(Math.abs(o%60),2,i);case 3:return r===0?"Z":(o>=0?"+":"")+on(s,2,i)+":"+on(Math.abs(o%60),2,i);default:throw new _(2310,!1)}}}var AR=0,ud=4;function _R(n){let e=dd(n,AR,1).getDay();return dd(n,0,1+(e<=ud?ud:ud+7)-e)}function XI(n){let e=n.getDay(),t=e===0?-3:ud-e;return dd(n.getFullYear(),n.getMonth(),n.getDate()+t)}function qg(n,e=!1){return function(t,r){let o;if(e){let i=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();o=1+Math.floor((s+i)/7)}else{let i=XI(t),s=_R(i.getFullYear()),a=i.getTime()-s.getTime();o=1+Math.round(a/6048e5)}return on(o,n,nc(r,Yn.MinusSign))}}function ld(n,e=!1){return function(t,r){let i=XI(t).getFullYear();return on(i,n,nc(r,Yn.MinusSign),e)}}var Kg={};function DR(n){if(Kg[n])return Kg[n];let e;switch(n){case"G":case"GG":case"GGG":e=pe(3,de.Abbreviated);break;case"GGGG":e=pe(3,de.Wide);break;case"GGGGG":e=pe(3,de.Narrow);break;case"y":e=Ne(0,1,0,!1,!0);break;case"yy":e=Ne(0,2,0,!0,!0);break;case"yyy":e=Ne(0,3,0,!1,!0);break;case"yyyy":e=Ne(0,4,0,!1,!0);break;case"Y":e=ld(1);break;case"YY":e=ld(2,!0);break;case"YYY":e=ld(3);break;case"YYYY":e=ld(4);break;case"M":case"L":e=Ne(1,1,1);break;case"MM":case"LL":e=Ne(1,2,1);break;case"MMM":e=pe(2,de.Abbreviated);break;case"MMMM":e=pe(2,de.Wide);break;case"MMMMM":e=pe(2,de.Narrow);break;case"LLL":e=pe(2,de.Abbreviated,et.Standalone);break;case"LLLL":e=pe(2,de.Wide,et.Standalone);break;case"LLLLL":e=pe(2,de.Narrow,et.Standalone);break;case"w":e=qg(1);break;case"ww":e=qg(2);break;case"W":e=qg(1,!0);break;case"d":e=Ne(2,1);break;case"dd":e=Ne(2,2);break;case"c":case"cc":e=Ne(7,1);break;case"ccc":e=pe(1,de.Abbreviated,et.Standalone);break;case"cccc":e=pe(1,de.Wide,et.Standalone);break;case"ccccc":e=pe(1,de.Narrow,et.Standalone);break;case"cccccc":e=pe(1,de.Short,et.Standalone);break;case"E":case"EE":case"EEE":e=pe(1,de.Abbreviated);break;case"EEEE":e=pe(1,de.Wide);break;case"EEEEE":e=pe(1,de.Narrow);break;case"EEEEEE":e=pe(1,de.Short);break;case"a":case"aa":case"aaa":e=pe(0,de.Abbreviated);break;case"aaaa":e=pe(0,de.Wide);break;case"aaaaa":e=pe(0,de.Narrow);break;case"b":case"bb":case"bbb":e=pe(0,de.Abbreviated,et.Standalone,!0);break;case"bbbb":e=pe(0,de.Wide,et.Standalone,!0);break;case"bbbbb":e=pe(0,de.Narrow,et.Standalone,!0);break;case"B":case"BB":case"BBB":e=pe(0,de.Abbreviated,et.Format,!0);break;case"BBBB":e=pe(0,de.Wide,et.Format,!0);break;case"BBBBB":e=pe(0,de.Narrow,et.Format,!0);break;case"h":e=Ne(3,1,-12);break;case"hh":e=Ne(3,2,-12);break;case"H":e=Ne(3,1);break;case"HH":e=Ne(3,2);break;case"m":e=Ne(4,1);break;case"mm":e=Ne(4,2);break;case"s":e=Ne(5,1);break;case"ss":e=Ne(5,2);break;case"S":e=Ne(6,1);break;case"SS":e=Ne(6,2);break;case"SSS":e=Ne(6,3);break;case"Z":case"ZZ":case"ZZZ":e=cd(0);break;case"ZZZZZ":e=cd(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=cd(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=cd(2);break;default:return null}return Kg[n]=e,e}function eT(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function bR(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function RR(n,e,t){let o=n.getTimezoneOffset(),i=eT(e,o);return bR(n,-1*(i-o))}function MR(n){if(BI(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[o,i=1,s=1]=n.split("-").map(a=>+a);return dd(o,i-1,s)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(ER))return NR(r)}let e=new Date(n);if(!BI(e))throw new _(2311,!1);return e}function NR(n){let e=new Date(0),t=0,r=0,o=n[8]?e.setUTCFullYear:e.setFullYear,i=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),o.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-t,a=Number(n[5]||0)-r,c=Number(n[6]||0),l=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return i.call(e,s,a,c,l),e}function BI(n){return n instanceof Date&&!isNaN(n.valueOf())}var Wg=/\s+/,jI=[],rc=(()=>{class n{_ngEl;_renderer;initialClasses=jI;rawClass;stateMap=new Map;constructor(t,r){this._ngEl=t,this._renderer=r}set klass(t){this.initialClasses=t!=null?t.trim().split(Wg):jI}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(Wg):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let o=this.stateMap.get(t);o!==void 0?(o.enabled!==r&&(o.changed=!0,o.enabled=r),o.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],o=t[1];o.changed?(this._toggleClass(r,o.enabled),o.changed=!1):o.touched||(o.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),o.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(Wg).forEach(o=>{r?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}static \u0275fac=function(r){return new(r||n)(Ye(Ku),Ye(Ag))};static \u0275dir=Po({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var fd=class{$implicit;ngForOf;index;count;constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},pd=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((o,i,s)=>{if(o.previousIndex==null)r.createEmbeddedView(this._template,new fd(o.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(i===null?void 0:i);else if(i!==null){let a=r.get(i);r.move(a,s),VI(a,o)}});for(let o=0,i=r.length;o<i;o++){let a=r.get(o).context;a.index=o,a.count=i,a.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{let i=r.get(o.currentIndex);VI(i,o)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(Ye(ko),Ye(qa),Ye(Vg))};static \u0275dir=Po({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function VI(n,e){n.context.$implicit=e.item}var oc=(()=>{class n{_viewContainer;_context=new hd;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){$I(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){$I(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(Ye(ko),Ye(qa))};static \u0275dir=Po({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),hd=class{$implicit=null;ngIf=null};function $I(n,e){if(n&&!n.createEmbeddedView)throw new _(2020,!1)}function kR(n,e){return new _(2100,!1)}var OR="mediumDate",tT=new k(""),nT=new k(""),Yg=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(t,r,o){this.locale=t,this.defaultTimezone=r,this.defaultOptions=o}transform(t,r,o,i){if(t==null||t===""||t!==t)return null;try{let s=r??this.defaultOptions?.dateFormat??OR,a=o??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return ZI(t,s,i||this.locale,a)}catch(s){throw kR(n,s.message)}}static \u0275fac=function(r){return new(r||n)(Ye(Qa,16),Ye(tT,24),Ye(nT,24))};static \u0275pipe=Dg({name:"date",type:n,pure:!0})}return n})();var Or=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Oo({type:n});static \u0275inj=Tr({})}return n})();function ic(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[o,i]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(i)}return null}var Fo=class{};var rT="browser";var sc=class{_doc;constructor(e){this._doc=e}manager},gd=(()=>{class n extends sc{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o,i){return t.addEventListener(r,o,i),()=>this.removeEventListener(t,r,o,i)}removeEventListener(t,r,o,i){return t.removeEventListener(r,o,i)}static \u0275fac=function(r){return new(r||n)(P(Pe))};static \u0275prov=O({token:n,factory:n.\u0275fac})}return n})(),yd=new k(""),tm=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(s=>{s.manager=this});let o=t.filter(s=>!(s instanceof gd));this._plugins=o.slice().reverse();let i=t.find(s=>s instanceof gd);i&&this._plugins.push(i)}addEventListener(t,r,o,i){return this._findPluginFor(r).addEventListener(t,r,o,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(i=>i.supports(t)),!r)throw new _(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(P(yd),P(xe))};static \u0275prov=O({token:n,factory:n.\u0275fac})}return n})(),Jg="ng-app-id";function oT(n){for(let e of n)e.remove()}function iT(n,e){let t=e.createElement("style");return t.textContent=n,t}function PR(n,e,t,r){let o=n.head?.querySelectorAll(`style[${Jg}="${e}"],link[${Jg}="${e}"]`);if(o)for(let i of o)i.removeAttribute(Jg),i instanceof HTMLLinkElement?r.set(i.href.slice(i.href.lastIndexOf("/")+1),{usage:0,elements:[i]}):i.textContent&&t.set(i.textContent,{usage:0,elements:[i]})}function Xg(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var nm=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,o,i={}){this.doc=t,this.appId=r,this.nonce=o,PR(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let o of t)this.addUsage(o,this.inline,iT);r?.forEach(o=>this.addUsage(o,this.external,Xg))}removeStyles(t,r){for(let o of t)this.removeUsage(o,this.inline);r?.forEach(o=>this.removeUsage(o,this.external))}addUsage(t,r,o){let i=r.get(t);i?i.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,o(t,this.doc)))})}removeUsage(t,r){let o=r.get(t);o&&(o.usage--,o.usage<=0&&(oT(o.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])oT(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:o}]of this.inline)o.push(this.addElement(t,iT(r,this.doc)));for(let[r,{elements:o}]of this.external)o.push(this.addElement(t,Xg(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(P(Pe),P(Wu),P(Qu,8),P(za))};static \u0275prov=O({token:n,factory:n.\u0275fac})}return n})(),Zg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},rm=/%COMP%/g;var aT="%COMP%",xR=`_nghost-${aT}`,LR=`_ngcontent-${aT}`,FR=!0,UR=new k("",{providedIn:"root",factory:()=>FR});function HR(n){return LR.replace(rm,n)}function BR(n){return xR.replace(rm,n)}function cT(n,e){return e.map(t=>t.replace(rm,n))}var om=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,o,i,s,a,c=null,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestroy=i,this.doc=s,this.ngZone=a,this.nonce=c,this.tracingService=l,this.platformIsServer=!1,this.defaultRenderer=new ac(t,s,a,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let o=this.getOrCreateRenderer(t,r);return o instanceof md?o.applyToHost(t):o instanceof cc&&o.applyStyles(),o}getOrCreateRenderer(t,r){let o=this.rendererByCompId,i=o.get(r.id);if(!i){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,f=this.platformIsServer,g=this.tracingService;switch(r.encapsulation){case $n.Emulated:i=new md(c,l,r,this.appId,u,s,a,f,g);break;case $n.ShadowDom:return new em(c,l,t,r,s,a,this.nonce,f,g);default:i=new cc(c,l,r,u,s,a,f,g);break}o.set(r.id,i)}return i}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(P(tm),P(nm),P(Wu),P(UR),P(Pe),P(xe),P(Qu),P(Ga,8))};static \u0275prov=O({token:n,factory:n.\u0275fac})}return n})(),ac=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,o,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=o,this.tracingService=i}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(Zg[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(sT(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(sT(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new _(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;let i=Zg[o];i?e.setAttributeNS(i,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let o=Zg[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(Nr.DashCase|Nr.Important)?e.style.setProperty(t,r,o&Nr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Nr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,o){if(typeof e=="string"&&(e=qn().getGlobalEventTarget(this.doc,e),!e))throw new _(5102,!1);let i=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(i=this.tracingService.wrapEventListener(e,t,i)),this.eventManager.addEventListener(e,t,i,o)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function sT(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var em=class extends ac{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,o,i,s,a,c,l){super(e,i,s,c,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=o.styles;u=cT(o.id,u);for(let g of u){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=g,this.shadowRoot.appendChild(p)}let f=o.getExternalStyles?.();if(f)for(let g of f){let p=Xg(g,i);a&&p.setAttribute("nonce",a),this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},cc=class extends ac{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,o,i,s,a,c,l){super(e,i,s,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=o;let u=r.styles;this.styles=l?cT(l,u):u,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Ji.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},md=class extends cc{contentAttr;hostAttr;constructor(e,t,r,o,i,s,a,c,l){let u=o+"-"+r.id;super(e,t,r,i,s,a,c,l,u),this.contentAttr=HR(u),this.hostAttr=BR(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var vd=class n extends Za{supportsDOMEvents=!0;static makeCurrent(){$g(new n)}onAndCancel(e,t,r,o){return e.addEventListener(t,r,o),()=>{e.removeEventListener(t,r,o)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=jR();return t==null?null:VR(t)}resetBaseElement(){lc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return ic(document.cookie,e)}},lc=null;function jR(){return lc=lc||document.head.querySelector("base"),lc?lc.getAttribute("href"):null}function VR(n){return new URL(n,document.baseURI).pathname}var $R=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=O({token:n,factory:n.\u0275fac})}return n})(),lT=["alt","control","meta","shift"],zR={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},GR={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},uT=(()=>{class n extends sc{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,o,i){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>qn().onAndCancel(t,s.domEventName,a,i))}static parseEventName(t){let r=t.toLowerCase().split("."),o=r.shift();if(r.length===0||!(o==="keydown"||o==="keyup"))return null;let i=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),lT.forEach(l=>{let u=r.indexOf(l);u>-1&&(r.splice(u,1),s+=l+".")}),s+=i,r.length!=0||i.length===0)return null;let c={};return c.domEventName=o,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let o=zR[t.key]||t.key,i="";return r.indexOf("code.")>-1&&(o=t.code,i="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),lT.forEach(s=>{if(s!==o){let a=GR[s];a(t)&&(i+=s+".")}}),i+=o,i===r)}static eventCallback(t,r,o){return i=>{n.matchEventFullKeyCode(i,t)&&o.runGuarded(()=>r(i))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(P(Pe))};static \u0275prov=O({token:n,factory:n.\u0275fac})}return n})();function im(n,e,t){let r=m({rootComponent:n,platformRef:t?.platformRef},qR(e));return kI(r)}function qR(n){return{appProviders:[...JR,...n?.providers??[]],platformProviders:QR}}function KR(){vd.makeCurrent()}function WR(){return new yn}function YR(){return sg(document),document}var QR=[{provide:za,useValue:rT},{provide:Yu,useValue:KR,multi:!0},{provide:Pe,useFactory:YR}];var JR=[{provide:Sa,useValue:"root"},{provide:yn,useFactory:WR},{provide:yd,useClass:gd,multi:!0,deps:[Pe]},{provide:yd,useClass:uT,multi:!0,deps:[Pe]},om,nm,tm,{provide:Ro,useExisting:om},{provide:Fo,useClass:$R},[]];var ts=class{},fc=class{},Uo=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let o=t.slice(0,r),i=t.slice(r+1).trim();this.addHeaderEntry(o,i)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.addHeaderEntry(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let o=(e.op==="a"?this.headers.get(t):void 0)||[];o.push(...r),this.headers.set(t,o);break;case"d":let i=e.value;if(!i)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>i.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}addHeaderEntry(e,t){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(t):this.headers.set(r,[t])}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(i=>i.toString()),o=e.toLowerCase();this.headers.set(o,r),this.maybeSetNormalizedName(e,o)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var Ed=class{encodeKey(e){return dT(e)}encodeValue(e){return dT(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function ZR(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(o=>{let i=o.indexOf("="),[s,a]=i==-1?[e.decodeKey(o),""]:[e.decodeKey(o.slice(0,i)),e.decodeValue(o.slice(i+1))],c=t.get(s)||[];c.push(a),t.set(s,c)}),t}var XR=/%(\d[a-f0-9])/gi,eM={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function dT(n){return encodeURIComponent(n).replace(XR,(e,t)=>eM[t]??e)}function Cd(n){return`${n}`}var Pr=class n{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new Ed,e.fromString){if(e.fromObject)throw new _(2805,!1);this.map=ZR(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],o=Array.isArray(r)?r.map(Cd):[Cd(r)];this.map.set(t,o)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let o=e[r];Array.isArray(o)?o.forEach(i=>{t.push({param:r,value:i,op:"a"})}):t.push({param:r,value:o,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(Cd(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],o=r.indexOf(Cd(e.value));o!==-1&&r.splice(o,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var Id=class{map=new Map;set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function tM(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function fT(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function hT(n){return typeof Blob<"u"&&n instanceof Blob}function pT(n){return typeof FormData<"u"&&n instanceof FormData}function nM(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var gT="Content-Type",mT="Accept",yT="X-Request-URL",vT="text/plain",CT="application/json",rM=`${CT}, ${vT}, */*`,uc=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;credentials;keepalive=!1;cache;priority;mode;redirect;referrer;integrity;responseType="json";method;params;urlWithParams;transferCache;timeout;constructor(e,t,r,o){this.url=t,this.method=e.toUpperCase();let i;if(tM(this.method)||o?(this.body=r!==void 0?r:null,i=o):i=r,i){if(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,this.keepalive=!!i.keepalive,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.context&&(this.context=i.context),i.params&&(this.params=i.params),i.priority&&(this.priority=i.priority),i.cache&&(this.cache=i.cache),i.credentials&&(this.credentials=i.credentials),typeof i.timeout=="number"){if(i.timeout<1||!Number.isInteger(i.timeout))throw new _(2822,"");this.timeout=i.timeout}i.mode&&(this.mode=i.mode),i.redirect&&(this.redirect=i.redirect),i.integrity&&(this.integrity=i.integrity),i.referrer&&(this.referrer=i.referrer),this.transferCache=i.transferCache}if(this.headers??=new Uo,this.context??=new Id,!this.params)this.params=new Pr,this.urlWithParams=t;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),c=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+c+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||fT(this.body)||hT(this.body)||pT(this.body)||nM(this.body)?this.body:this.body instanceof Pr?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||pT(this.body)?null:hT(this.body)?this.body.type||null:fT(this.body)?null:typeof this.body=="string"?vT:this.body instanceof Pr?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?CT:null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,o=e.responseType||this.responseType,i=e.keepalive??this.keepalive,s=e.priority||this.priority,a=e.cache||this.cache,c=e.mode||this.mode,l=e.redirect||this.redirect,u=e.credentials||this.credentials,f=e.referrer||this.referrer,g=e.integrity||this.integrity,p=e.transferCache??this.transferCache,I=e.timeout??this.timeout,S=e.body!==void 0?e.body:this.body,w=e.withCredentials??this.withCredentials,N=e.reportProgress??this.reportProgress,ue=e.headers||this.headers,Be=e.params||this.params,Re=e.context??this.context;return e.setHeaders!==void 0&&(ue=Object.keys(e.setHeaders).reduce((Ft,co)=>Ft.set(co,e.setHeaders[co]),ue)),e.setParams&&(Be=Object.keys(e.setParams).reduce((Ft,co)=>Ft.set(co,e.setParams[co]),Be)),new n(t,r,S,{params:Be,headers:ue,context:Re,reportProgress:N,responseType:o,withCredentials:w,transferCache:p,keepalive:i,cache:a,priority:s,timeout:I,mode:c,redirect:l,credentials:u,referrer:f,integrity:g})}},es=(function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n})(es||{}),ns=class{headers;status;statusText;url;ok;type;redirected;constructor(e,t=200,r="OK"){this.headers=e.headers||new Uo,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.redirected=e.redirected,this.ok=this.status>=200&&this.status<300}},Td=class n extends ns{constructor(e={}){super(e)}type=es.ResponseHeader;clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Sd=class n extends ns{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=es.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0,redirected:e.redirected??this.redirected})}},dc=class extends ns{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},oM=200,iM=204;function sm(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,credentials:n.credentials,transferCache:n.transferCache,timeout:n.timeout,keepalive:n.keepalive,priority:n.priority,cache:n.cache,mode:n.mode,redirect:n.redirect,integrity:n.integrity,referrer:n.referrer}}var sM=(()=>{class n{handler;constructor(t){this.handler=t}request(t,r,o={}){let i;if(t instanceof uc)i=t;else{let c;o.headers instanceof Uo?c=o.headers:c=new Uo(o.headers);let l;o.params&&(o.params instanceof Pr?l=o.params:l=new Pr({fromObject:o.params})),i=new uc(t,r,o.body!==void 0?o.body:null,{headers:c,context:o.context,params:l,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials,transferCache:o.transferCache,keepalive:o.keepalive,priority:o.priority,cache:o.cache,mode:o.mode,redirect:o.redirect,credentials:o.credentials,referrer:o.referrer,integrity:o.integrity,timeout:o.timeout})}let s=x(i).pipe(Xt(c=>this.handler.handle(c)));if(t instanceof uc||o.observe==="events")return s;let a=s.pipe(nt(c=>c instanceof Sd));switch(o.observe||"body"){case"body":switch(i.responseType){case"arraybuffer":return a.pipe(K(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new _(2806,!1);return c.body}));case"blob":return a.pipe(K(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new _(2807,!1);return c.body}));case"text":return a.pipe(K(c=>{if(c.body!==null&&typeof c.body!="string")throw new _(2808,!1);return c.body}));case"json":default:return a.pipe(K(c=>c.body))}case"response":return a;default:throw new _(2809,!1)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new Pr().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,o={}){return this.request("PATCH",t,sm(o,r))}post(t,r,o={}){return this.request("POST",t,sm(o,r))}put(t,r,o={}){return this.request("PUT",t,sm(o,r))}static \u0275fac=function(r){return new(r||n)(P(ts))};static \u0275prov=O({token:n,factory:n.\u0275fac})}return n})();var aM=new k("");function cM(n,e){return e(n)}function lM(n,e,t){return(r,o)=>We(t,()=>e(r,i=>n(i,o)))}var ET=new k(""),uM=new k(""),IT=new k("",{providedIn:"root",factory:()=>!0});var wd=(()=>{class n extends ts{backend;injector;chain=null;pendingTasks=E(Du);contributeToStability=E(IT);constructor(t,r){super(),this.backend=t,this.injector=r}handle(t){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(ET),...this.injector.get(uM,[])]));this.chain=r.reduceRight((o,i)=>lM(o,i,this.injector),cM)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(t,o=>this.backend.handle(o)).pipe(ho(r))}else return this.chain(t,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||n)(P(fc),P(Oe))};static \u0275prov=O({token:n,factory:n.\u0275fac})}return n})();var dM=/^\)\]\}',?\n/,fM=RegExp(`^${yT}:`,"m");function hM(n){return"responseURL"in n&&n.responseURL?n.responseURL:fM.test(n.getAllResponseHeaders())?n.getResponseHeader(yT):null}var am=(()=>{class n{xhrFactory;constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new _(-2800,!1);let r=this.xhrFactory;return x(null).pipe(qe(()=>new Z(i=>{let s=r.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((w,N)=>s.setRequestHeader(w,N.join(","))),t.headers.has(mT)||s.setRequestHeader(mT,rM),!t.headers.has(gT)){let w=t.detectContentTypeHeader();w!==null&&s.setRequestHeader(gT,w)}if(t.timeout&&(s.timeout=t.timeout),t.responseType){let w=t.responseType.toLowerCase();s.responseType=w!=="json"?w:"text"}let a=t.serializeBody(),c=null,l=()=>{if(c!==null)return c;let w=s.statusText||"OK",N=new Uo(s.getAllResponseHeaders()),ue=hM(s)||t.url;return c=new Td({headers:N,status:s.status,statusText:w,url:ue}),c},u=()=>{let{headers:w,status:N,statusText:ue,url:Be}=l(),Re=null;N!==iM&&(Re=typeof s.response>"u"?s.responseText:s.response),N===0&&(N=Re?oM:0);let Ft=N>=200&&N<300;if(t.responseType==="json"&&typeof Re=="string"){let co=Re;Re=Re.replace(dM,"");try{Re=Re!==""?JSON.parse(Re):null}catch(kw){Re=co,Ft&&(Ft=!1,Re={error:kw,text:Re})}}Ft?(i.next(new Sd({body:Re,headers:w,status:N,statusText:ue,url:Be||void 0})),i.complete()):i.error(new dc({error:Re,headers:w,status:N,statusText:ue,url:Be||void 0}))},f=w=>{let{url:N}=l(),ue=new dc({error:w,status:s.status||0,statusText:s.statusText||"Unknown Error",url:N||void 0});i.error(ue)},g=f;t.timeout&&(g=w=>{let{url:N}=l(),ue=new dc({error:new DOMException("Request timed out","TimeoutError"),status:s.status||0,statusText:s.statusText||"Request timeout",url:N||void 0});i.error(ue)});let p=!1,I=w=>{p||(i.next(l()),p=!0);let N={type:es.DownloadProgress,loaded:w.loaded};w.lengthComputable&&(N.total=w.total),t.responseType==="text"&&s.responseText&&(N.partialText=s.responseText),i.next(N)},S=w=>{let N={type:es.UploadProgress,loaded:w.loaded};w.lengthComputable&&(N.total=w.total),i.next(N)};return s.addEventListener("load",u),s.addEventListener("error",f),s.addEventListener("timeout",g),s.addEventListener("abort",f),t.reportProgress&&(s.addEventListener("progress",I),a!==null&&s.upload&&s.upload.addEventListener("progress",S)),s.send(a),i.next({type:es.Sent}),()=>{s.removeEventListener("error",f),s.removeEventListener("abort",f),s.removeEventListener("load",u),s.removeEventListener("timeout",g),t.reportProgress&&(s.removeEventListener("progress",I),a!==null&&s.upload&&s.upload.removeEventListener("progress",S)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(r){return new(r||n)(P(Fo))};static \u0275prov=O({token:n,factory:n.\u0275fac})}return n})(),TT=new k(""),pM="XSRF-TOKEN",gM=new k("",{providedIn:"root",factory:()=>pM}),mM="X-XSRF-TOKEN",yM=new k("",{providedIn:"root",factory:()=>mM}),hc=class{},vM=(()=>{class n{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(t,r){this.doc=t,this.cookieName=r}getToken(){let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=ic(t,this.cookieName),this.lastCookieString=t),this.lastToken}static \u0275fac=function(r){return new(r||n)(P(Pe),P(gM))};static \u0275prov=O({token:n,factory:n.\u0275fac})}return n})(),CM=/^(?:https?:)?\/\//i;function EM(n,e){if(!E(TT)||n.method==="GET"||n.method==="HEAD"||CM.test(n.url))return e(n);let t=E(hc).getToken(),r=E(yM);return t!=null&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,t)})),e(n)}function cm(...n){let e=[sM,am,wd,{provide:ts,useExisting:wd},{provide:fc,useFactory:()=>E(aM,{optional:!0})??E(am)},{provide:ET,useValue:EM,multi:!0},{provide:TT,useValue:!0},{provide:hc,useClass:vM}];for(let t of n)e.push(...t.\u0275providers);return $i(e)}var ST=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(P(Pe))};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var V="primary",bc=Symbol("RouteTitle"),hm=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function jo(n){return new hm(n)}function NT(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let o={};for(let i=0;i<r.length;i++){let s=r[i],a=n[i];if(s[0]===":")o[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function TM(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!wn(n[t],e[t]))return!1;return!0}function wn(n,e){let t=n?pm(n):void 0,r=e?pm(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let i=0;i<t.length;i++)if(o=t[i],!kT(n[o],e[o]))return!1;return!0}function pm(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function kT(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((o,i)=>r[i]===o)}else return n===e}function OT(n){return n.length>0?n[n.length-1]:null}function Zn(n){return Lh(n)?n:Xi(n)?se(Promise.resolve(n)):x(n)}var SM={exact:xT,subset:LT},PT={exact:wM,subset:AM,ignored:()=>!0};function wT(n,e,t){return SM[t.paths](n.root,e.root,t.matrixParams)&&PT[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function wM(n,e){return wn(n,e)}function xT(n,e,t){if(!Ho(n.segments,e.segments)||!Dd(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!xT(n.children[r],e.children[r],t))return!1;return!0}function AM(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>kT(n[t],e[t]))}function LT(n,e,t){return FT(n,e,e.segments,t)}function FT(n,e,t,r){if(n.segments.length>t.length){let o=n.segments.slice(0,t.length);return!(!Ho(o,t)||e.hasChildren()||!Dd(o,t,r))}else if(n.segments.length===t.length){if(!Ho(n.segments,t)||!Dd(n.segments,t,r))return!1;for(let o in e.children)if(!n.children[o]||!LT(n.children[o],e.children[o],r))return!1;return!0}else{let o=t.slice(0,n.segments.length),i=t.slice(n.segments.length);return!Ho(n.segments,o)||!Dd(n.segments,o,r)||!n.children[V]?!1:FT(n.children[V],e,i,r)}}function Dd(n,e,t){return e.every((r,o)=>PT[t](n[o].parameters,r.parameters))}var _n=class{root;queryParams;fragment;_queryParamMap;constructor(e=new ae([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=jo(this.queryParams),this._queryParamMap}toString(){return bM.serialize(this)}},ae=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return bd(this)}},xr=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=jo(this.parameters),this._parameterMap}toString(){return HT(this)}};function _M(n,e){return Ho(n,e)&&n.every((t,r)=>wn(t.parameters,e[r].parameters))}function Ho(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function DM(n,e){let t=[];return Object.entries(n.children).forEach(([r,o])=>{r===V&&(t=t.concat(e(o,r)))}),Object.entries(n.children).forEach(([r,o])=>{r!==V&&(t=t.concat(e(o,r)))}),t}var Rc=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=O({token:n,factory:()=>new Vo,providedIn:"root"})}return n})(),Vo=class{parse(e){let t=new mm(e);return new _n(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${pc(e.root,!0)}`,r=NM(e.queryParams),o=typeof e.fragment=="string"?`#${RM(e.fragment)}`:"";return`${t}${r}${o}`}},bM=new Vo;function bd(n){return n.segments.map(e=>HT(e)).join("/")}function pc(n,e){if(!n.hasChildren())return bd(n);if(e){let t=n.children[V]?pc(n.children[V],!1):"",r=[];return Object.entries(n.children).forEach(([o,i])=>{o!==V&&r.push(`${o}:${pc(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=DM(n,(r,o)=>o===V?[pc(n.children[V],!1)]:[`${o}:${pc(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[V]!=null?`${bd(n)}/${t[0]}`:`${bd(n)}/(${t.join("//")})`}}function UT(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ad(n){return UT(n).replace(/%3B/gi,";")}function RM(n){return encodeURI(n)}function gm(n){return UT(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Rd(n){return decodeURIComponent(n)}function AT(n){return Rd(n.replace(/\+/g,"%20"))}function HT(n){return`${gm(n.path)}${MM(n.parameters)}`}function MM(n){return Object.entries(n).map(([e,t])=>`;${gm(e)}=${gm(t)}`).join("")}function NM(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(o=>`${Ad(t)}=${Ad(o)}`).join("&"):`${Ad(t)}=${Ad(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var kM=/^[^\/()?;#]+/;function lm(n){let e=n.match(kM);return e?e[0]:""}var OM=/^[^\/()?;=#]+/;function PM(n){let e=n.match(OM);return e?e[0]:""}var xM=/^[^=?&#]+/;function LM(n){let e=n.match(xM);return e?e[0]:""}var FM=/^[^&#]+/;function UM(n){let e=n.match(FM);return e?e[0]:""}var mm=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ae([],{}):new ae([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[V]=new ae(e,t)),r}parseSegment(){let e=lm(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new _(4009,!1);return this.capture(e),new xr(Rd(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=PM(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=lm(this.remaining);o&&(r=o,this.capture(r))}e[Rd(t)]=Rd(r)}parseQueryParam(e){let t=LM(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=UM(this.remaining);s&&(r=s,this.capture(r))}let o=AT(t),i=AT(r);if(e.hasOwnProperty(o)){let s=e[o];Array.isArray(s)||(s=[s],e[o]=s),s.push(i)}else e[o]=i}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=lm(this.remaining),o=this.remaining[r.length];if(o!=="/"&&o!==")"&&o!==";")throw new _(4010,!1);let i;r.indexOf(":")>-1?(i=r.slice(0,r.indexOf(":")),this.capture(i),this.capture(":")):e&&(i=V);let s=this.parseChildren();t[i??V]=Object.keys(s).length===1&&s[V]?s[V]:new ae([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new _(4011,!1)}};function BT(n){return n.segments.length>0?new ae([],{[V]:n}):n}function jT(n){let e={};for(let[r,o]of Object.entries(n.children)){let i=jT(o);if(r===V&&i.segments.length===0&&i.hasChildren())for(let[s,a]of Object.entries(i.children))e[s]=a;else(i.segments.length>0||i.hasChildren())&&(e[r]=i)}let t=new ae(n.segments,e);return HM(t)}function HM(n){if(n.numberOfChildren===1&&n.children[V]){let e=n.children[V];return new ae(n.segments.concat(e.segments),e.children)}return n}function as(n){return n instanceof _n}function VT(n,e,t=null,r=null){let o=$T(n);return zT(o,e,t,r)}function $T(n){let e;function t(i){let s={};for(let c of i.children){let l=t(c);s[c.outlet]=l}let a=new ae(i.url,s);return i===n&&(e=a),a}let r=t(n.root),o=BT(r);return e??o}function zT(n,e,t,r){let o=n;for(;o.parent;)o=o.parent;if(e.length===0)return um(o,o,o,t,r);let i=BM(e);if(i.toRoot())return um(o,o,new ae([],{}),t,r);let s=jM(i,o,n),a=s.processChildren?mc(s.segmentGroup,s.index,i.commands):qT(s.segmentGroup,s.index,i.commands);return um(o,s.segmentGroup,a,t,r)}function Md(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Cc(n){return typeof n=="object"&&n!=null&&n.outlets}function um(n,e,t,r,o){let i={};r&&Object.entries(r).forEach(([c,l])=>{i[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let s;n===e?s=t:s=GT(n,e,t);let a=BT(jT(s));return new _n(a,i,o)}function GT(n,e,t){let r={};return Object.entries(n.children).forEach(([o,i])=>{i===e?r[o]=t:r[o]=GT(i,e,t)}),new ae(n.segments,r)}var Nd=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Md(r[0]))throw new _(4003,!1);let o=r.find(Cc);if(o&&o!==OT(r))throw new _(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function BM(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Nd(!0,0,n);let e=0,t=!1,r=n.reduce((o,i,s)=>{if(typeof i=="object"&&i!=null){if(i.outlets){let a={};return Object.entries(i.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...o,{outlets:a}]}if(i.segmentPath)return[...o,i.segmentPath]}return typeof i!="string"?[...o,i]:s===0?(i.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&o.push(a))}),o):[...o,i]},[]);return new Nd(t,e,r)}var is=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function jM(n,e,t){if(n.isAbsolute)return new is(e,!0,0);if(!t)return new is(e,!1,NaN);if(t.parent===null)return new is(t,!0,0);let r=Md(n.commands[0])?0:1,o=t.segments.length-1+r;return VM(t,o,n.numberOfDoubleDots)}function VM(n,e,t){let r=n,o=e,i=t;for(;i>o;){if(i-=o,r=r.parent,!r)throw new _(4005,!1);o=r.segments.length}return new is(r,!1,o-i)}function $M(n){return Cc(n[0])?n[0].outlets:{[V]:n}}function qT(n,e,t){if(n??=new ae([],{}),n.segments.length===0&&n.hasChildren())return mc(n,e,t);let r=zM(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let i=new ae(n.segments.slice(0,r.pathIndex),{});return i.children[V]=new ae(n.segments.slice(r.pathIndex),n.children),mc(i,0,o)}else return r.match&&o.length===0?new ae(n.segments,{}):r.match&&!n.hasChildren()?ym(n,e,t):r.match?mc(n,0,o):ym(n,e,t)}function mc(n,e,t){if(t.length===0)return new ae(n.segments,{});{let r=$M(t),o={};if(Object.keys(r).some(i=>i!==V)&&n.children[V]&&n.numberOfChildren===1&&n.children[V].segments.length===0){let i=mc(n.children[V],e,t);return new ae(n.segments,i.children)}return Object.entries(r).forEach(([i,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(o[i]=qT(n.children[i],e,s))}),Object.entries(n.children).forEach(([i,s])=>{r[i]===void 0&&(o[i]=s)}),new ae(n.segments,o)}}function zM(n,e,t){let r=0,o=e,i={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return i;let s=n.segments[o],a=t[r];if(Cc(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(o>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!DT(c,l,s))return i;r+=2}else{if(!DT(c,{},s))return i;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}function ym(n,e,t){let r=n.segments.slice(0,e),o=0;for(;o<t.length;){let i=t[o];if(Cc(i)){let c=GM(i.outlets);return new ae(r,c)}if(o===0&&Md(t[0])){let c=n.segments[e];r.push(new xr(c.path,_T(t[0]))),o++;continue}let s=Cc(i)?i.outlets[V]:`${i}`,a=o<t.length-1?t[o+1]:null;s&&a&&Md(a)?(r.push(new xr(s,_T(a))),o+=2):(r.push(new xr(s,{})),o++)}return new ae(r,{})}function GM(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=ym(new ae([],{}),0,r))}),e}function _T(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function DT(n,e,t){return n==t.path&&wn(e,t.parameters)}var yc="imperative",ze=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(ze||{}),Nt=class{id;url;constructor(e,t){this.id=e,this.url=t}},$o=class extends Nt{type=ze.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",o=null){super(e,t),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Qn=class extends Nt{urlAfterRedirects;type=ze.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},ct=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(ct||{}),Ec=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(Ec||{}),An=class extends Nt{reason;code;type=ze.NavigationCancel;constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Jn=class extends Nt{reason;code;type=ze.NavigationSkipped;constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o}},cs=class extends Nt{error;target;type=ze.NavigationError;constructor(e,t,r,o){super(e,t),this.error=r,this.target=o}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Ic=class extends Nt{urlAfterRedirects;state;type=ze.RoutesRecognized;constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},kd=class extends Nt{urlAfterRedirects;state;type=ze.GuardsCheckStart;constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Od=class extends Nt{urlAfterRedirects;state;shouldActivate;type=ze.GuardsCheckEnd;constructor(e,t,r,o,i){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Pd=class extends Nt{urlAfterRedirects;state;type=ze.ResolveStart;constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},xd=class extends Nt{urlAfterRedirects;state;type=ze.ResolveEnd;constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ld=class{route;type=ze.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Fd=class{route;type=ze.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Ud=class{snapshot;type=ze.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Hd=class{snapshot;type=ze.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Bd=class{snapshot;type=ze.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},jd=class{snapshot;type=ze.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Tc=class{},ls=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function qM(n){return!(n instanceof Tc)&&!(n instanceof ls)}function KM(n,e){return n.providers&&!n._injector&&(n._injector=Wa(n.providers,e,`Route: ${n.path}`)),n._injector??e}function sn(n){return n.outlet||V}function WM(n,e){let t=n.filter(r=>sn(r)===e);return t.push(...n.filter(r=>sn(r)!==e)),t}function fs(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Vd=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return fs(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new hs(this.rootInjector)}},hs=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let o=this.getOrCreateContext(t);o.outlet=r,this.contexts.set(t,o)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Vd(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(P(Oe))};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),$d=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=vm(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=vm(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Cm(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return Cm(e,this._root).map(t=>t.value)}};function vm(n,e){if(n===e.value)return e;for(let t of e.children){let r=vm(n,t);if(r)return r}return null}function Cm(n,e){if(n===e.value)return[e];for(let t of e.children){let r=Cm(n,t);if(r.length)return r.unshift(e),r}return[]}var Mt=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function os(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Sc=class extends $d{snapshot;constructor(e,t){super(e),this.snapshot=t,Dm(this,e)}toString(){return this.snapshot.toString()}};function KT(n){let e=YM(n),t=new ve([new xr("",{})]),r=new ve({}),o=new ve({}),i=new ve({}),s=new ve(""),a=new Lr(t,r,i,s,o,V,n,e.root);return a.snapshot=e.root,new Sc(new Mt(a,[]),e)}function YM(n){let e={},t={},r={},i=new Bo([],e,r,"",t,V,n,null,{});return new wc("",new Mt(i,[]))}var Lr=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,o,i,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=o,this.dataSubject=i,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(K(l=>l[bc]))??x(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=i}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(K(e=>jo(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(K(e=>jo(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function zd(n,e,t="emptyOnly"){let r,{routeConfig:o}=n;return e!==null&&(t==="always"||o?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:m(m({},e.params),n.params),data:m(m({},e.data),n.data),resolve:m(m(m(m({},n.data),e.data),o?.data),n._resolvedData)}:r={params:m({},n.params),data:m({},n.data),resolve:m(m({},n.data),n._resolvedData??{})},o&&YT(o)&&(r.resolve[bc]=o.title),r}var Bo=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[bc]}constructor(e,t,r,o,i,s,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=i,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=jo(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=jo(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},wc=class extends $d{url;constructor(e,t){super(t),this.url=e,Dm(this,t)}toString(){return WT(this._root)}};function Dm(n,e){e.value._routerState=n,e.children.forEach(t=>Dm(n,t))}function WT(n){let e=n.children.length>0?` { ${n.children.map(WT).join(", ")} } `:"";return`${n.value}${e}`}function dm(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,wn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),wn(e.params,t.params)||n.paramsSubject.next(t.params),TM(e.url,t.url)||n.urlSubject.next(t.url),wn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Em(n,e){let t=wn(n.params,e.params)&&_M(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||Em(n.parent,e.parent))}function YT(n){return typeof n.title=="string"||n.title===null}var QT=new k(""),Mc=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=V;activateEvents=new st;deactivateEvents=new st;attachEvents=new st;detachEvents=new st;routerOutletData=NI();parentContexts=E(hs);location=E(ko);changeDetector=E(jg);inputBinder=E(Wd,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:o}=t.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new _(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new _(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new _(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new _(4013,!1);this._activatedRoute=t;let o=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new Im(t,a,o.injector,this.routerOutletData);this.activated=o.createComponent(s,{index:o.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Po({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[zu]})}return n})(),Im=class{route;childContexts;parent;outletData;constructor(e,t,r,o){this.route=e,this.childContexts=t,this.parent=r,this.outletData=o}get(e,t){return e===Lr?this.route:e===hs?this.childContexts:e===QT?this.outletData:this.parent.get(e,t)}},Wd=new k("");var bm=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Tn({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,o){r&1&&te(0,"router-outlet")},dependencies:[Mc],encapsulation:2})}return n})();function Rm(n){let e=n.children&&n.children.map(Rm),t=e?A(m({},n),{children:e}):m({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==V&&(t.component=bm),t}function QM(n,e,t){let r=Ac(n,e._root,t?t._root:void 0);return new Sc(r,e)}function Ac(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let o=JM(n,e,t);return new Mt(r,o)}else{if(n.shouldAttach(e.value)){let i=n.retrieve(e.value);if(i!==null){let s=i.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Ac(n,a)),s}}let r=ZM(e.value),o=e.children.map(i=>Ac(n,i));return new Mt(r,o)}}function JM(n,e,t){return e.children.map(r=>{for(let o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return Ac(n,r,o);return Ac(n,r)})}function ZM(n){return new Lr(new ve(n.url),new ve(n.params),new ve(n.queryParams),new ve(n.fragment),new ve(n.data),n.outlet,n.component,n)}var us=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},JT="ngNavigationCancelingError";function Gd(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=as(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,o=ZT(!1,ct.Redirect);return o.url=t,o.navigationBehaviorOptions=r,o}function ZT(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[JT]=!0,t.cancellationCode=e,t}function XM(n){return XT(n)&&as(n.url)}function XT(n){return!!n&&n[JT]}var eN=(n,e,t,r)=>K(o=>(new Tm(e,o.targetRouterState,o.currentRouterState,t,r).activate(n),o)),Tm=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,o,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o,this.inputBindingEnabled=i}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),dm(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let o=os(t);e.children.forEach(i=>{let s=i.value.outlet;this.deactivateRoutes(i,o[s],r),delete o[s]}),Object.values(o).forEach(i=>{this.deactivateRouteAndItsChildren(i,r)})}deactivateRoutes(e,t,r){let o=e.value,i=t?t.value:null;if(o===i)if(o.component){let s=r.getContext(o.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else i&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,i=os(e);for(let s of Object.values(i))this.deactivateRouteAndItsChildren(s,o);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,i=os(e);for(let s of Object.values(i))this.deactivateRouteAndItsChildren(s,o);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let o=os(t);e.children.forEach(i=>{this.activateRoutes(i,o[i.value.outlet],r),this.forwardEvent(new jd(i.value.snapshot))}),e.children.length&&this.forwardEvent(new Hd(e.value.snapshot))}activateRoutes(e,t,r){let o=e.value,i=t?t.value:null;if(dm(o),o===i)if(o.component){let s=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(o.component){let s=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){let a=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),dm(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=o,s.outlet&&s.outlet.activateWith(o,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},qd=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ss=class{component;route;constructor(e,t){this.component=e,this.route=t}};function tN(n,e,t){let r=n._root,o=e?e._root:null;return gc(r,o,t,[r.value])}function nN(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function ps(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!Xh(n)?n:e.get(n):r}function gc(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){let i=os(e);return n.children.forEach(s=>{rN(s,i[s.value.outlet],t,r.concat([s.value]),o),delete i[s.value.outlet]}),Object.entries(i).forEach(([s,a])=>vc(a,t.getContext(s),o)),o}function rN(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){let i=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&i.routeConfig===s.routeConfig){let c=oN(s,i,i.routeConfig.runGuardsAndResolvers);c?o.canActivateChecks.push(new qd(r)):(i.data=s.data,i._resolvedData=s._resolvedData),i.component?gc(n,e,a?a.children:null,r,o):gc(n,e,t,r,o),c&&a&&a.outlet&&a.outlet.isActivated&&o.canDeactivateChecks.push(new ss(a.outlet.component,s))}else s&&vc(e,a,o),o.canActivateChecks.push(new qd(r)),i.component?gc(n,null,a?a.children:null,r,o):gc(n,null,t,r,o);return o}function oN(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Ho(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ho(n.url,e.url)||!wn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Em(n,e)||!wn(n.queryParams,e.queryParams);case"paramsChange":default:return!Em(n,e)}}function vc(n,e,t){let r=os(n),o=n.value;Object.entries(r).forEach(([i,s])=>{o.component?e?vc(s,e.children.getContext(i),t):vc(s,null,t):vc(s,e,t)}),o.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new ss(e.outlet.component,o)):t.canDeactivateChecks.push(new ss(null,o)):t.canDeactivateChecks.push(new ss(null,o))}function Nc(n){return typeof n=="function"}function iN(n){return typeof n=="boolean"}function sN(n){return n&&Nc(n.canLoad)}function aN(n){return n&&Nc(n.canActivate)}function cN(n){return n&&Nc(n.canActivateChild)}function lN(n){return n&&Nc(n.canDeactivate)}function uN(n){return n&&Nc(n.canMatch)}function eS(n){return n instanceof Hn||n?.name==="EmptyError"}var _d=Symbol("INITIAL_VALUE");function ds(){return qe(n=>ou(n.map(e=>e.pipe(gn(1),Hh(_d)))).pipe(K(e=>{for(let t of e)if(t!==!0){if(t===_d)return _d;if(t===!1||dN(t))return t}return!0}),nt(e=>e!==_d),gn(1)))}function dN(n){return as(n)||n instanceof us}function fN(n,e){return ke(t=>{let{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:i,canDeactivateChecks:s}}=t;return s.length===0&&i.length===0?x(A(m({},t),{guardsResult:!0})):hN(s,r,o,n).pipe(ke(a=>a&&iN(a)?pN(r,i,n,e):x(a)),K(a=>A(m({},t),{guardsResult:a})))})}function hN(n,e,t,r){return se(n).pipe(ke(o=>CN(o.component,o.route,t,e,r)),Bn(o=>o!==!0,!0))}function pN(n,e,t,r){return se(e).pipe(Xt(o=>Bi(mN(o.route.parent,r),gN(o.route,r),vN(n,o.path,t),yN(n,o.route,t))),Bn(o=>o!==!0,!0))}function gN(n,e){return n!==null&&e&&e(new Bd(n)),x(!0)}function mN(n,e){return n!==null&&e&&e(new Ud(n)),x(!0)}function yN(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return x(!0);let o=r.map(i=>ya(()=>{let s=fs(e)??t,a=ps(i,s),c=aN(a)?a.canActivate(e,n):We(s,()=>a(e,n));return Zn(c).pipe(Bn())}));return x(o).pipe(ds())}function vN(n,e,t){let r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(s=>nN(s)).filter(s=>s!==null).map(s=>ya(()=>{let a=s.guards.map(c=>{let l=fs(s.node)??t,u=ps(c,l),f=cN(u)?u.canActivateChild(r,n):We(l,()=>u(r,n));return Zn(f).pipe(Bn())});return x(a).pipe(ds())}));return x(i).pipe(ds())}function CN(n,e,t,r,o){let i=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!i||i.length===0)return x(!0);let s=i.map(a=>{let c=fs(e)??o,l=ps(a,c),u=lN(l)?l.canDeactivate(n,e,t,r):We(c,()=>l(n,e,t,r));return Zn(u).pipe(Bn())});return x(s).pipe(ds())}function EN(n,e,t,r){let o=e.canLoad;if(o===void 0||o.length===0)return x(!0);let i=o.map(s=>{let a=ps(s,n),c=sN(a)?a.canLoad(e,t):We(n,()=>a(e,t));return Zn(c)});return x(i).pipe(ds(),tS(r))}function tS(n){return Nh(Ve(e=>{if(typeof e!="boolean")throw Gd(n,e)}),K(e=>e===!0))}function IN(n,e,t,r){let o=e.canMatch;if(!o||o.length===0)return x(!0);let i=o.map(s=>{let a=ps(s,n),c=uN(a)?a.canMatch(e,t):We(n,()=>a(e,t));return Zn(c)});return x(i).pipe(ds(),tS(r))}var _c=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Dc=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function rs(n){return Hi(new _c(n))}function TN(n){return Hi(new _(4e3,!1))}function SN(n){return Hi(ZT(!1,ct.GuardRejected))}var Sm=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),o.numberOfChildren===0)return x(r);if(o.numberOfChildren>1||!o.children[V])return TN(`${e.redirectTo}`);o=o.children[V]}}applyRedirectCommands(e,t,r,o,i){return wN(t,o,i).pipe(K(s=>{if(s instanceof _n)throw new Dc(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new Dc(a);return a}))}applyRedirectCreateUrlTree(e,t,r,o){let i=this.createSegmentGroup(e,t.root,r,o);return new _n(i,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([o,i])=>{if(typeof i=="string"&&i[0]===":"){let a=i.substring(1);r[o]=t[a]}else r[o]=i}),r}createSegmentGroup(e,t,r,o){let i=this.createSegments(e,t.segments,r,o),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,o)}),new ae(i,s)}createSegments(e,t,r,o){return t.map(i=>i.path[0]===":"?this.findPosParam(e,i,o):this.findOrReturn(i,r))}findPosParam(e,t,r){let o=r[t.path.substring(1)];if(!o)throw new _(4001,!1);return o}findOrReturn(e,t){let r=0;for(let o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}};function wN(n,e,t){if(typeof n=="string")return x(n);let r=n,{queryParams:o,fragment:i,routeConfig:s,url:a,outlet:c,params:l,data:u,title:f}=e;return Zn(We(t,()=>r({params:l,data:u,queryParams:o,fragment:i,routeConfig:s,url:a,outlet:c,title:f})))}var wm={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function AN(n,e,t,r,o){let i=nS(n,e,t);return i.matched?(r=KM(e,r),IN(r,e,t,o).pipe(K(s=>s===!0?i:m({},wm)))):x(i)}function nS(n,e,t){if(e.path==="**")return _N(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?m({},wm):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let o=(e.matcher||NT)(t,n,e);if(!o)return m({},wm);let i={};Object.entries(o.posParams??{}).forEach(([a,c])=>{i[a]=c.path});let s=o.consumed.length>0?m(m({},i),o.consumed[o.consumed.length-1].parameters):i;return{matched:!0,consumedSegments:o.consumed,remainingSegments:t.slice(o.consumed.length),parameters:s,positionalParamSegments:o.posParams??{}}}function _N(n){return{matched:!0,parameters:n.length>0?OT(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function bT(n,e,t,r){return t.length>0&&RN(n,t,r)?{segmentGroup:new ae(e,bN(r,new ae(t,n.children))),slicedSegments:[]}:t.length===0&&MN(n,t,r)?{segmentGroup:new ae(n.segments,DN(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new ae(n.segments,n.children),slicedSegments:t}}function DN(n,e,t,r){let o={};for(let i of t)if(Yd(n,e,i)&&!r[sn(i)]){let s=new ae([],{});o[sn(i)]=s}return m(m({},r),o)}function bN(n,e){let t={};t[V]=e;for(let r of n)if(r.path===""&&sn(r)!==V){let o=new ae([],{});t[sn(r)]=o}return t}function RN(n,e,t){return t.some(r=>Yd(n,e,r)&&sn(r)!==V)}function MN(n,e,t){return t.some(r=>Yd(n,e,r))}function Yd(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function NN(n,e,t){return e.length===0&&!n.children[t]}var Am=class{};function kN(n,e,t,r,o,i,s="emptyOnly"){return new _m(n,e,t,r,o,s,i).recognize()}var ON=31,_m=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,o,i,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=o,this.urlTree=i,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Sm(this.urlSerializer,this.urlTree)}noMatchError(e){return new _(4002,`'${e.segmentGroup}'`)}recognize(){let e=bT(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(K(({children:t,rootSnapshot:r})=>{let o=new Mt(r,t),i=new wc("",o),s=VT(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,i.url=this.urlSerializer.serialize(s),{state:i,tree:s}}))}match(e){let t=new Bo([],Object.freeze({}),Object.freeze(m({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),V,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,V,t).pipe(K(r=>({children:r,rootSnapshot:t})),pn(r=>{if(r instanceof Dc)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof _c?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,o,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,i):this.processSegment(e,t,r,r.segments,o,!0,i).pipe(K(s=>s instanceof Mt?[s]:[]))}processChildren(e,t,r,o){let i=[];for(let s of Object.keys(r.children))s==="primary"?i.unshift(s):i.push(s);return se(i).pipe(Xt(s=>{let a=r.children[s],c=WM(t,s);return this.processSegmentGroup(e,c,a,s,o)}),Uh((s,a)=>(s.push(...a),s)),yr(null),Fh(),ke(s=>{if(s===null)return rs(r);let a=rS(s);return PN(a),x(a)}))}processSegment(e,t,r,o,i,s,a){return se(t).pipe(Xt(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,o,i,s,a).pipe(pn(l=>{if(l instanceof _c)return x(null);throw l}))),Bn(c=>!!c),pn(c=>{if(eS(c))return NN(r,o,i)?x(new Am):rs(r);throw c}))}processSegmentAgainstRoute(e,t,r,o,i,s,a,c){return sn(r)!==s&&(s===V||!Yd(o,i,r))?rs(o):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,o,r,i,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,o,t,r,i,s,c):rs(o)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,i,s,a){let{matched:c,parameters:l,consumedSegments:u,positionalParamSegments:f,remainingSegments:g}=nS(t,o,i);if(!c)return rs(t);typeof o.redirectTo=="string"&&o.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>ON&&(this.allowRedirects=!1));let p=new Bo(i,l,Object.freeze(m({},this.urlTree.queryParams)),this.urlTree.fragment,RT(o),sn(o),o.component??o._loadedComponent??null,o,MT(o)),I=zd(p,a,this.paramsInheritanceStrategy);return p.params=Object.freeze(I.params),p.data=Object.freeze(I.data),this.applyRedirects.applyRedirectCommands(u,o.redirectTo,f,p,e).pipe(qe(w=>this.applyRedirects.lineralizeSegments(o,w)),ke(w=>this.processSegment(e,r,t,w.concat(g),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,o,i,s){let a=AN(t,r,o,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(qe(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,o).pipe(qe(({routes:l})=>{let u=r._loadedInjector??e,{parameters:f,consumedSegments:g,remainingSegments:p}=c,I=new Bo(g,f,Object.freeze(m({},this.urlTree.queryParams)),this.urlTree.fragment,RT(r),sn(r),r.component??r._loadedComponent??null,r,MT(r)),S=zd(I,s,this.paramsInheritanceStrategy);I.params=Object.freeze(S.params),I.data=Object.freeze(S.data);let{segmentGroup:w,slicedSegments:N}=bT(t,g,p,l);if(N.length===0&&w.hasChildren())return this.processChildren(u,l,w,I).pipe(K(Be=>new Mt(I,Be)));if(l.length===0&&N.length===0)return x(new Mt(I,[]));let ue=sn(r)===i;return this.processSegment(u,l,w,N,ue?V:i,!0,I).pipe(K(Be=>new Mt(I,Be instanceof Mt?[Be]:[])))}))):rs(t)))}getChildConfig(e,t,r){return t.children?x({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?x({routes:t._loadedRoutes,injector:t._loadedInjector}):EN(e,t,r,this.urlSerializer).pipe(ke(o=>o?this.configLoader.loadChildren(e,t).pipe(Ve(i=>{t._loadedRoutes=i.routes,t._loadedInjector=i.injector})):SN(t))):x({routes:[],injector:e})}};function PN(n){n.sort((e,t)=>e.value.outlet===V?-1:t.value.outlet===V?1:e.value.outlet.localeCompare(t.value.outlet))}function xN(n){let e=n.value.routeConfig;return e&&e.path===""}function rS(n){let e=[],t=new Set;for(let r of n){if(!xN(r)){e.push(r);continue}let o=e.find(i=>r.value.routeConfig===i.value.routeConfig);o!==void 0?(o.children.push(...r.children),t.add(o)):e.push(r)}for(let r of t){let o=rS(r.children);e.push(new Mt(r.value,o))}return e.filter(r=>!t.has(r))}function RT(n){return n.data||{}}function MT(n){return n.resolve||{}}function LN(n,e,t,r,o,i){return ke(s=>kN(n,e,t,r,s.extractedUrl,o,i).pipe(K(({state:a,tree:c})=>A(m({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function FN(n,e){return ke(t=>{let{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return x(t);let i=new Set(o.map(c=>c.route)),s=new Set;for(let c of i)if(!s.has(c))for(let l of oS(c))s.add(l);let a=0;return se(s).pipe(Xt(c=>i.has(c)?UN(c,r,n,e):(c.data=zd(c,c.parent,n).resolve,x(void 0))),Ve(()=>a++),ji(1),ke(c=>a===s.size?x(t):tt))})}function oS(n){let e=n.children.map(t=>oS(t)).flat();return[n,...e]}function UN(n,e,t,r){let o=n.routeConfig,i=n._resolve;return o?.title!==void 0&&!YT(o)&&(i[bc]=o.title),ya(()=>(n.data=zd(n,n.parent,t).resolve,HN(i,n,e,r).pipe(K(s=>(n._resolvedData=s,n.data=m(m({},n.data),s),null)))))}function HN(n,e,t,r){let o=pm(n);if(o.length===0)return x({});let i={};return se(o).pipe(ke(s=>BN(n[s],e,t,r).pipe(Bn(),Ve(a=>{if(a instanceof us)throw Gd(new Vo,a);i[s]=a}))),ji(1),K(()=>i),pn(s=>eS(s)?tt:Hi(s)))}function BN(n,e,t,r){let o=fs(e)??r,i=ps(n,o),s=i.resolve?i.resolve(e,t):We(o,()=>i(e,t));return Zn(s)}function fm(n){return qe(e=>{let t=n(e);return t?se(t).pipe(K(()=>e)):x(e)})}var Mm=(()=>{class n{buildTitle(t){let r,o=t.root;for(;o!==void 0;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(i=>i.outlet===V);return r}getResolvedTitleForRoute(t){return t.data[bc]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=O({token:n,factory:()=>E(iS),providedIn:"root"})}return n})(),iS=(()=>{class n extends Mm{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(P(ST))};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),kc=new k("",{providedIn:"root",factory:()=>({})}),Oc=new k(""),sS=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=E(Pg);loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return x(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let o=Zn(We(t,()=>r.loadComponent())).pipe(K(cS),qe(lS),Ve(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),ho(()=>{this.componentLoaders.delete(r)})),i=new Ui(o,()=>new we).pipe(Fi());return this.componentLoaders.set(r,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return x({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=aS(r,this.compiler,t,this.onLoadEndListener).pipe(ho(()=>{this.childrenLoaders.delete(r)})),s=new Ui(i,()=>new we).pipe(Fi());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function aS(n,e,t,r){return Zn(We(t,()=>n.loadChildren())).pipe(K(cS),qe(lS),ke(o=>o instanceof ed||Array.isArray(o)?x(o):se(e.compileModuleAsync(o))),K(o=>{r&&r(n);let i,s,a=!1;return Array.isArray(o)?(s=o,a=!0):(i=o.create(t).injector,s=i.get(Oc,[],{optional:!0,self:!0}).flat()),{routes:s.map(Rm),injector:i}}))}function jN(n){return n&&typeof n=="object"&&"default"in n}function cS(n){return jN(n)?n.default:n}function lS(n){return x(n)}var Qd=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=O({token:n,factory:()=>E(VN),providedIn:"root"})}return n})(),VN=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),uS=new k("");var dS=new k(""),fS=(()=>{class n{currentNavigation=xa(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new we;transitionAbortWithErrorSubject=new we;configLoader=E(sS);environmentInjector=E(Oe);destroyRef=E(Do);urlSerializer=E(Rc);rootContexts=E(hs);location=E(Kn);inputBindingEnabled=E(Wd,{optional:!0})!==null;titleStrategy=E(Mm);options=E(kc,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=E(Qd);createViewTransition=E(uS,{optional:!0});navigationErrorHandler=E(dS,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>x(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=o=>this.events.next(new Ld(o)),r=o=>this.events.next(new Fd(o));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;Gn(()=>{this.transitions?.next(A(m({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))})}setupNavigations(t){return this.transitions=new ve(null),this.transitions.pipe(nt(r=>r!==null),qe(r=>{let o=!1;return x(r).pipe(qe(i=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",ct.SupersededByNewNavigation),tt;this.currentTransition=r,this.currentNavigation.set({id:i.id,initialUrl:i.rawUrl,extractedUrl:i.extractedUrl,targetBrowserUrl:typeof i.extras.browserUrl=="string"?this.urlSerializer.parse(i.extras.browserUrl):i.extras.browserUrl,trigger:i.source,extras:i.extras,previousNavigation:this.lastSuccessfulNavigation?A(m({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>i.abortController.abort()});let s=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=i.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!s&&a!=="reload")return this.events.next(new Jn(i.id,this.urlSerializer.serialize(i.rawUrl),"",Ec.IgnoredSameUrlNavigation)),i.resolve(!1),tt;if(this.urlHandlingStrategy.shouldProcessUrl(i.rawUrl))return x(i).pipe(qe(c=>(this.events.next(new $o(c.id,this.urlSerializer.serialize(c.extractedUrl),c.source,c.restoredState)),c.id!==this.navigationId?tt:Promise.resolve(c))),LN(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Ve(c=>{r.targetSnapshot=c.targetSnapshot,r.urlAfterRedirects=c.urlAfterRedirects,this.currentNavigation.update(u=>(u.finalUrl=c.urlAfterRedirects,u));let l=new Ic(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(i.currentRawUrl)){let{id:c,extractedUrl:l,source:u,restoredState:f,extras:g}=i,p=new $o(c,this.urlSerializer.serialize(l),u,f);this.events.next(p);let I=KT(this.rootComponentType).snapshot;return this.currentTransition=r=A(m({},i),{targetSnapshot:I,urlAfterRedirects:l,extras:A(m({},g),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(S=>(S.finalUrl=l,S)),x(r)}else return this.events.next(new Jn(i.id,this.urlSerializer.serialize(i.extractedUrl),"",Ec.IgnoredByUrlHandlingStrategy)),i.resolve(!1),tt}),Ve(i=>{let s=new kd(i.id,this.urlSerializer.serialize(i.extractedUrl),this.urlSerializer.serialize(i.urlAfterRedirects),i.targetSnapshot);this.events.next(s)}),K(i=>(this.currentTransition=r=A(m({},i),{guards:tN(i.targetSnapshot,i.currentSnapshot,this.rootContexts)}),r)),fN(this.environmentInjector,i=>this.events.next(i)),Ve(i=>{if(r.guardsResult=i.guardsResult,i.guardsResult&&typeof i.guardsResult!="boolean")throw Gd(this.urlSerializer,i.guardsResult);let s=new Od(i.id,this.urlSerializer.serialize(i.extractedUrl),this.urlSerializer.serialize(i.urlAfterRedirects),i.targetSnapshot,!!i.guardsResult);this.events.next(s)}),nt(i=>i.guardsResult?!0:(this.cancelNavigationTransition(i,"",ct.GuardRejected),!1)),fm(i=>{if(i.guards.canActivateChecks.length!==0)return x(i).pipe(Ve(s=>{let a=new Pd(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),qe(s=>{let a=!1;return x(s).pipe(FN(this.paramsInheritanceStrategy,this.environmentInjector),Ve({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",ct.NoDataFromResolver)}}))}),Ve(s=>{let a=new xd(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),fm(i=>{let s=a=>{let c=[];if(a.routeConfig?.loadComponent){let l=fs(a)??this.environmentInjector;c.push(this.configLoader.loadComponent(l,a.routeConfig).pipe(Ve(u=>{a.component=u}),K(()=>{})))}for(let l of a.children)c.push(...s(l));return c};return ou(s(i.targetSnapshot.root)).pipe(yr(null),gn(1))}),fm(()=>this.afterPreactivation()),qe(()=>{let{currentSnapshot:i,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,i.root,s.root);return a?se(a).pipe(K(()=>r)):x(r)}),K(i=>{let s=QM(t.routeReuseStrategy,i.targetSnapshot,i.currentRouterState);return this.currentTransition=r=A(m({},i),{targetRouterState:s}),this.currentNavigation.update(a=>(a.targetRouterState=s,a)),r}),Ve(()=>{this.events.next(new Tc)}),eN(this.rootContexts,t.routeReuseStrategy,i=>this.events.next(i),this.inputBindingEnabled),gn(1),su(new Z(i=>{let s=r.abortController.signal,a=()=>i.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(nt(()=>!o&&!r.targetRouterState),Ve(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",ct.Aborted)}))),Ve({next:i=>{o=!0,this.lastSuccessfulNavigation=Gn(this.currentNavigation),this.events.next(new Qn(i.id,this.urlSerializer.serialize(i.extractedUrl),this.urlSerializer.serialize(i.urlAfterRedirects))),this.titleStrategy?.updateTitle(i.targetRouterState.snapshot),i.resolve(!0)},complete:()=>{o=!0}}),su(this.transitionAbortWithErrorSubject.pipe(Ve(i=>{throw i}))),ho(()=>{o||this.cancelNavigationTransition(r,"",ct.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),pn(i=>{if(this.destroyed)return r.resolve(!1),tt;if(o=!0,XT(i))this.events.next(new An(r.id,this.urlSerializer.serialize(r.extractedUrl),i.message,i.cancellationCode)),XM(i)?this.events.next(new ls(i.url,i.navigationBehaviorOptions)):r.resolve(!1);else{let s=new cs(r.id,this.urlSerializer.serialize(r.extractedUrl),i,r.targetSnapshot??void 0);try{let a=We(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof us){let{message:c,cancellationCode:l}=Gd(this.urlSerializer,a);this.events.next(new An(r.id,this.urlSerializer.serialize(r.extractedUrl),c,l)),this.events.next(new ls(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),i}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return tt}))}))}cancelNavigationTransition(t,r,o){let i=new An(t.id,this.urlSerializer.serialize(t.extractedUrl),r,o);this.events.next(i),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=Gn(this.currentNavigation),o=r?.targetBrowserUrl??r?.extractedUrl;return t.toString()!==o?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function $N(n){return n!==yc}var hS=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=O({token:n,factory:()=>E(zN),providedIn:"root"})}return n})(),Kd=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},zN=(()=>{class n extends Kd{static \u0275fac=(()=>{let t;return function(o){return(t||(t=Gu(n)))(o||n)}})();static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),pS=(()=>{class n{urlSerializer=E(Rc);options=E(kc,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=E(Kn);urlHandlingStrategy=E(Qd);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new _n;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:o}){let i=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=o??i;return s instanceof _n?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:o}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,o),this.routerState=t):this.rawUrlTree=o}routerState=KT(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=O({token:n,factory:()=>E(GN),providedIn:"root"})}return n})(),GN=(()=>{class n extends pS{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof $o?this.updateStateMemento():t instanceof Jn?this.commitTransition(r):t instanceof Ic?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Tc?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof An&&t.code!==ct.SupersededByNewNavigation&&t.code!==ct.Redirect?this.restoreHistory(r):t instanceof cs?this.restoreHistory(r,!0):t instanceof Qn&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:o}){let{replaceUrl:i,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||i){let a=this.browserPageId,c=m(m({},s),this.generateNgRouterState(o,a));this.location.replaceState(t,"",c)}else{let a=m(m({},s),this.generateNgRouterState(o,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,i=this.currentPageId-o;i!==0?this.location.historyGo(i):this.getCurrentUrlTree()===t.finalUrl&&i===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(o){return(t||(t=Gu(n)))(o||n)}})();static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Nm(n,e){n.events.pipe(nt(t=>t instanceof Qn||t instanceof An||t instanceof cs||t instanceof Jn),K(t=>t instanceof Qn||t instanceof Jn?0:(t instanceof An?t.code===ct.Redirect||t.code===ct.SupersededByNewNavigation:!1)?2:1),nt(t=>t!==2),gn(1)).subscribe(()=>{e()})}var qN={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},KN={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Kt=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=E(bg);stateManager=E(pS);options=E(kc,{optional:!0})||{};pendingTasks=E(En);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=E(fS);urlSerializer=E(Rc);location=E(Kn);urlHandlingStrategy=E(Qd);injector=E(Oe);_events=new we;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=E(hS);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=E(Oc,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!E(Wd,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Me;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let o=this.navigationTransitions.currentTransition,i=Gn(this.navigationTransitions.currentNavigation);if(o!==null&&i!==null){if(this.stateManager.handleRouterEvent(r,i),r instanceof An&&r.code!==ct.Redirect&&r.code!==ct.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Qn)this.navigated=!0;else if(r instanceof ls){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,o.currentRawUrl),c=m({browserUrl:o.extras.browserUrl,info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:o.extras.replaceUrl||this.urlUpdateStrategy==="eager"||$N(o.source)},s);this.scheduleNavigation(a,yc,null,c,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}qM(r)&&this._events.next(r)}catch(o){this.navigationTransitions.transitionAbortWithErrorSubject.next(o)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),yc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,o)=>{this.navigateToSyncWithBrowser(t,o,r)})}navigateToSyncWithBrowser(t,r,o){let i={replaceUrl:!0},s=o?.navigationId?o:null;if(o){let c=m({},o);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(i.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,i).catch(c=>{this.disposed||this.injector.get(Dt)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return Gn(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Rm),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:o,queryParams:i,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=m(m({},this.currentUrlTree.queryParams),i);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=i||null}u!==null&&(u=this.removeEmptyProps(u));let f;try{let g=o?o.snapshot:this.routerState.snapshot.root;f=$T(g)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),f=this.currentUrlTree.root}return zT(f,t,u,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let o=as(t)?t:this.parseUrl(t),i=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(i,yc,null,r)}navigate(t,r={skipLocationChange:!1}){return WN(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(yo(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,r){let o;if(r===!0?o=m({},qN):r===!1?o=m({},KN):o=r,as(t))return wT(this.currentUrlTree,t,o);let i=this.parseUrl(t);return wT(this.currentUrlTree,i,o)}removeEmptyProps(t){return Object.entries(t).reduce((r,[o,i])=>(i!=null&&(r[o]=i),r),{})}scheduleNavigation(t,r,o,i,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((f,g)=>{a=f,c=g});let u=this.pendingTasks.add();return Nm(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:i,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(f=>Promise.reject(f))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function WN(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new _(4008,!1)}var QN=new k("");function km(n,...e){return $i([{provide:Oc,multi:!0,useValue:n},[],{provide:Lr,useFactory:JN,deps:[Kt]},{provide:td,multi:!0,useFactory:ZN},e.map(t=>t.\u0275providers)])}function JN(n){return n.routerState.root}function ZN(){let n=E(mn);return e=>{let t=n.get(xo);if(e!==t.components[0])return;let r=n.get(Kt),o=n.get(XN);n.get(ek)===1&&r.initialNavigation(),n.get(tk,null,{optional:!0})?.setUpPreloading(),n.get(QN,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),o.closed||(o.next(),o.complete(),o.unsubscribe())}}var XN=new k("",{factory:()=>new we}),ek=new k("",{providedIn:"root",factory:()=>1});var tk=new k("");var Vf={};Ut(Vf,{blockAPICallsBeforeInitialize:()=>Bf,blockAcquireTokenInPopups:()=>ZS,blockNonBrowserEnvironment:()=>Hf,blockRedirectInIframe:()=>JS,blockReloadInHiddenIframes:()=>QS,clearHash:()=>zy,createGuid:()=>Ky,getCurrentUri:()=>gt,getHomepage:()=>qy,invoke:()=>ft,invokeAsync:()=>C,isInIframe:()=>Al,isInPopup:()=>YS,preconnect:()=>Dl,preflightCheck:()=>_l,redirectPreflightCheck:()=>jf,replaceHash:()=>Gy});var y={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",CACHE_PREFIX:"msal",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_RESPONSE_TYPE:"code",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",FRAGMENT_RESPONSE_MODE:"fragment",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],TOKEN_RESPONSE_TYPE:"token",ID_TOKEN_RESPONSE_TYPE:"id_token",SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},gs={SUCCESS:200,SUCCESS_RANGE_START:200,SUCCESS_RANGE_END:299,REDIRECT:302,CLIENT_ERROR:400,CLIENT_ERROR_RANGE_START:400,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,REQUEST_TIMEOUT:408,TOO_MANY_REQUESTS:429,CLIENT_ERROR_RANGE_END:499,SERVER_ERROR:500,SERVER_ERROR_RANGE_START:500,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,SERVER_ERROR_RANGE_END:599,MULTI_SIDED_ERROR:600},kt=[y.OPENID_SCOPE,y.PROFILE_SCOPE,y.OFFLINE_ACCESS_SCOPE],Om=[...kt,y.EMAIL_SCOPE],_e={CONTENT_TYPE:"Content-Type",CONTENT_LENGTH:"Content-Length",RETRY_AFTER:"Retry-After",CCS_HEADER:"X-AnchorMailbox",WWWAuthenticate:"WWW-Authenticate",AuthenticationInfo:"Authentication-Info",X_MS_REQUEST_ID:"x-ms-request-id",X_MS_HTTP_VERSION:"x-ms-httpver"},De={ID_TOKEN:"idtoken",CLIENT_INFO:"client.info",ADAL_ID_TOKEN:"adal.idtoken",ERROR:"error",ERROR_DESC:"error.description",ACTIVE_ACCOUNT:"active-account",ACTIVE_ACCOUNT_FILTERS:"active-account-filters"},an={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},ms={ACCESS_TOKEN:"access_token",XMS_CC:"xms_cc"},me={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"},Jd={PLAIN:"plain",S256:"S256"},cn={QUERY:"query",FRAGMENT:"fragment"},Pm=A(m({},cn),{FORM_POST:"form_post"}),Pc={IMPLICIT_GRANT:"implicit",AUTHORIZATION_CODE_GRANT:"authorization_code",CLIENT_CREDENTIALS_GRANT:"client_credentials",RESOURCE_OWNER_PASSWORD_GRANT:"password",REFRESH_TOKEN_GRANT:"refresh_token",DEVICE_CODE_GRANT:"device_code",JWT_BEARER:"urn:ietf:params:oauth:grant-type:jwt-bearer"},ys={MSSTS_ACCOUNT_TYPE:"MSSTS",ADFS_ACCOUNT_TYPE:"ADFS",MSAV1_ACCOUNT_TYPE:"MSA",GENERIC_ACCOUNT_TYPE:"Generic"},Te={CACHE_KEY_SEPARATOR:"-",CLIENT_INFO_SEPARATOR:"."},F={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"};var xc="appmetadata",gS="client_info",Fr="1",vs={CACHE_KEY:"authority-metadata",REFRESH_TIME_SECONDS:3600*24},lt={CONFIG:"config",CACHE:"cache",NETWORK:"network",HARDCODED_VALUES:"hardcoded_values"},Le={SCHEMA_VERSION:5,MAX_CUR_HEADER_BYTES:80,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},Q={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},Xn={DEFAULT_THROTTLE_TIME_SECONDS:60,DEFAULT_MAX_THROTTLE_TIME_SECONDS:3600,THROTTLING_PREFIX:"throttling",X_MS_LIB_CAPABILITY_VALUE:"retry-after, h429"},Zd={INVALID_GRANT_ERROR:"invalid_grant",CLIENT_MISMATCH_ERROR:"client_mismatch"},Xd={username:"username",password:"password"},Lc={httpSuccess:200,httpBadRequest:400},zo={FAILED_AUTO_DETECTION:"1",INTERNAL_CACHE:"2",ENVIRONMENT_VARIABLE:"3",IMDS:"4"},ef={CONFIGURED_MATCHES_DETECTED:"1",CONFIGURED_NO_AUTO_DETECTION:"2",CONFIGURED_NOT_DETECTED:"3",AUTO_DETECTION_REQUESTED_SUCCESSFUL:"4",AUTO_DETECTION_REQUESTED_FAILED:"5"},ln={NOT_APPLICABLE:"0",FORCE_REFRESH_OR_CLAIMS:"1",NO_CACHED_ACCESS_TOKEN:"2",CACHED_ACCESS_TOKEN_EXPIRED:"3",PROACTIVELY_REFRESHED:"4"},tf={Jwt:"JWT",Jwk:"JWK",Pop:"pop"};var xm=300;var Go={};Ut(Go,{postRequestFailed:()=>Uc,unexpectedError:()=>Fc});var Fc="unexpected_error",Uc="post_request_failed";var nf={[Fc]:"Unexpected error in authentication.",[Uc]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."},mS={unexpectedError:{code:Fc,desc:nf[Fc]},postRequestFailed:{code:Uc,desc:nf[Uc]}},$=class n extends Error{constructor(e,t,r){let o=t?`${e}: ${t}`:e;super(o),Object.setPrototypeOf(this,n.prototype),this.errorCode=e||y.EMPTY_STRING,this.errorMessage=t||y.EMPTY_STRING,this.subError=r||y.EMPTY_STRING,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}};function Hc(n,e){return new $(n,e?`${nf[n]} ${e}`:nf[n])}var Fe={};Ut(Fe,{authTimeNotFound:()=>er,authorizationCodeMissingFromServerResponse:()=>si,bindingKeyNotRemoved:()=>Qc,cannotAppendScopeSet:()=>ri,cannotRemoveEmptyScope:()=>ni,clientInfoDecodingError:()=>Ur,clientInfoEmptyError:()=>qo,deviceCodeExpired:()=>$c,deviceCodePollingCancelled:()=>Vc,deviceCodeUnknownError:()=>zc,emptyInputScopeSet:()=>jr,endSessionEndpointNotSupported:()=>ai,endpointResolutionError:()=>ut,hashNotDeserialized:()=>Qo,invalidAssertion:()=>Kc,invalidCacheEnvironment:()=>nr,invalidCacheRecord:()=>oi,invalidClientCredential:()=>Wc,invalidState:()=>un,keyIdMissing:()=>ci,maxAgeTranspired:()=>Xo,methodNotImplemented:()=>H,missingTenantIdError:()=>Xc,multipleMatchingAccounts:()=>jc,multipleMatchingAppMetadata:()=>ei,multipleMatchingTokens:()=>Bc,nestedAppAuthBridgeDisabled:()=>el,networkError:()=>Wo,noAccountFound:()=>Gc,noAccountInSilentRequest:()=>tr,noCryptoObject:()=>Vr,noNetworkConnectivity:()=>Jc,nonceMismatch:()=>Zo,nullOrEmptyToken:()=>Ko,openIdConfigError:()=>Yo,requestCannotBeMade:()=>ti,stateMismatch:()=>Jo,stateNotFound:()=>Br,tokenClaimsCnfRequiredForSignedJwt:()=>ii,tokenParsingError:()=>Hr,tokenRefreshRequired:()=>Dn,unexpectedCredentialType:()=>qc,userCanceled:()=>Zc,userTimeoutReached:()=>Yc});var Ur="client_info_decoding_error",qo="client_info_empty_error",Hr="token_parsing_error",Ko="null_or_empty_token",ut="endpoints_resolution_error",Wo="network_error",Yo="openid_config_error",Qo="hash_not_deserialized",un="invalid_state",Jo="state_mismatch",Br="state_not_found",Zo="nonce_mismatch",er="auth_time_not_found",Xo="max_age_transpired",Bc="multiple_matching_tokens",jc="multiple_matching_accounts",ei="multiple_matching_appMetadata",ti="request_cannot_be_made",ni="cannot_remove_empty_scope",ri="cannot_append_scopeset",jr="empty_input_scopeset",Vc="device_code_polling_cancelled",$c="device_code_expired",zc="device_code_unknown_error",tr="no_account_in_silent_request",oi="invalid_cache_record",nr="invalid_cache_environment",Gc="no_account_found",Vr="no_crypto_object",qc="unexpected_credential_type",Kc="invalid_assertion",Wc="invalid_client_credential",Dn="token_refresh_required",Yc="user_timeout_reached",ii="token_claims_cnf_required_for_signedjwt",si="authorization_code_missing_from_server_response",Qc="binding_key_not_removed",ai="end_session_endpoint_not_supported",ci="key_id_missing",Jc="no_network_connectivity",Zc="user_canceled",Xc="missing_tenant_id_error",H="method_not_implemented",el="nested_app_auth_bridge_disabled";var B={[Ur]:"The client info could not be parsed/decoded correctly",[qo]:"The client info was empty",[Hr]:"Token cannot be parsed",[Ko]:"The token is null or empty",[ut]:"Endpoints cannot be resolved",[Wo]:"Network request failed",[Yo]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[Qo]:"The hash parameters could not be deserialized",[un]:"State was not the expected format",[Jo]:"State mismatch error",[Br]:"State not found",[Zo]:"Nonce mismatch error",[er]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[Xo]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[Bc]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[jc]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[ei]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[ti]:"Token request cannot be made without authorization code or refresh token.",[ni]:"Cannot remove null or empty scope from ScopeSet",[ri]:"Cannot append ScopeSet",[jr]:"Empty input ScopeSet cannot be processed",[Vc]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[$c]:"Device code is expired.",[zc]:"Device code stopped polling for unknown reasons.",[tr]:"Please pass an account object, silent flow is not supported without account information",[oi]:"Cache record object was null or undefined.",[nr]:"Invalid environment when attempting to create cache entry",[Gc]:"No account found in cache for given key.",[Vr]:"No crypto object detected.",[qc]:"Unexpected credential type.",[Kc]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[Wc]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[Dn]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[Yc]:"User defined timeout for device code polling reached",[ii]:"Cannot generate a POP jwt if the token_claims are not populated",[si]:"Server response does not contain an authorization code to proceed",[Qc]:"Could not remove the credential's binding key from storage.",[ai]:"The provided authority does not support logout",[ci]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[Jc]:"No network connectivity. Check your internet connection.",[Zc]:"User cancelled the flow.",[Xc]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[H]:"This method has not been implemented",[el]:"The nested app auth bridge is disabled"},yS={clientInfoDecodingError:{code:Ur,desc:B[Ur]},clientInfoEmptyError:{code:qo,desc:B[qo]},tokenParsingError:{code:Hr,desc:B[Hr]},nullOrEmptyToken:{code:Ko,desc:B[Ko]},endpointResolutionError:{code:ut,desc:B[ut]},networkError:{code:Wo,desc:B[Wo]},unableToGetOpenidConfigError:{code:Yo,desc:B[Yo]},hashNotDeserialized:{code:Qo,desc:B[Qo]},invalidStateError:{code:un,desc:B[un]},stateMismatchError:{code:Jo,desc:B[Jo]},stateNotFoundError:{code:Br,desc:B[Br]},nonceMismatchError:{code:Zo,desc:B[Zo]},authTimeNotFoundError:{code:er,desc:B[er]},maxAgeTranspired:{code:Xo,desc:B[Xo]},multipleMatchingTokens:{code:Bc,desc:B[Bc]},multipleMatchingAccounts:{code:jc,desc:B[jc]},multipleMatchingAppMetadata:{code:ei,desc:B[ei]},tokenRequestCannotBeMade:{code:ti,desc:B[ti]},removeEmptyScopeError:{code:ni,desc:B[ni]},appendScopeSetError:{code:ri,desc:B[ri]},emptyInputScopeSetError:{code:jr,desc:B[jr]},DeviceCodePollingCancelled:{code:Vc,desc:B[Vc]},DeviceCodeExpired:{code:$c,desc:B[$c]},DeviceCodeUnknownError:{code:zc,desc:B[zc]},NoAccountInSilentRequest:{code:tr,desc:B[tr]},invalidCacheRecord:{code:oi,desc:B[oi]},invalidCacheEnvironment:{code:nr,desc:B[nr]},noAccountFound:{code:Gc,desc:B[Gc]},noCryptoObj:{code:Vr,desc:B[Vr]},unexpectedCredentialType:{code:qc,desc:B[qc]},invalidAssertion:{code:Kc,desc:B[Kc]},invalidClientCredential:{code:Wc,desc:B[Wc]},tokenRefreshRequired:{code:Dn,desc:B[Dn]},userTimeoutReached:{code:Yc,desc:B[Yc]},tokenClaimsRequired:{code:ii,desc:B[ii]},noAuthorizationCodeFromServer:{code:si,desc:B[si]},bindingKeyNotRemovedError:{code:Qc,desc:B[Qc]},logoutNotSupported:{code:ai,desc:B[ai]},keyIdMissing:{code:ci,desc:B[ci]},noNetworkConnectivity:{code:Jc,desc:B[Jc]},userCanceledError:{code:Zc,desc:B[Zc]},missingTenantIdError:{code:Xc,desc:B[Xc]},nestedAppAuthBridgeDisabled:{code:el,desc:B[el]}},li=class n extends ${constructor(e,t){super(e,t?`${B[e]}: ${t}`:B[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,n.prototype)}};function v(n,e){return new li(n,e)}var $r={createNewGuid:()=>{throw v(H)},base64Decode:()=>{throw v(H)},base64Encode:()=>{throw v(H)},base64UrlEncode:()=>{throw v(H)},encodeKid:()=>{throw v(H)},getPublicKeyThumbprint(){return h(this,null,function*(){throw v(H)})},removeTokenBindingKey(){return h(this,null,function*(){throw v(H)})},clearKeystore(){return h(this,null,function*(){throw v(H)})},signJwt(){return h(this,null,function*(){throw v(H)})},hashString(){return h(this,null,function*(){throw v(H)})}};var ne=(function(n){return n[n.Error=0]="Error",n[n.Warning=1]="Warning",n[n.Info=2]="Info",n[n.Verbose=3]="Verbose",n[n.Trace=4]="Trace",n})(ne||{}),It=class n{constructor(e,t,r){this.level=ne.Info;let o=()=>{},i=e||n.createDefaultLoggerOptions();this.localCallback=i.loggerCallback||o,this.piiLoggingEnabled=i.piiLoggingEnabled||!1,this.level=typeof i.logLevel=="number"?i.logLevel:ne.Info,this.correlationId=i.correlationId||y.EMPTY_STRING,this.packageName=t||y.EMPTY_STRING,this.packageVersion=r||y.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:ne.Info}}clone(e,t,r){return new n({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:r||this.correlationId},e,t)}logMessage(e,t){if(t.logLevel>this.level||!this.piiLoggingEnabled&&t.containsPii)return;let i=`${`[${new Date().toUTCString()}] : [${t.correlationId||this.correlationId||""}]`} : ${this.packageName}@${this.packageVersion} : ${ne[t.logLevel]} - ${e}`;this.executeCallback(t.logLevel,i,t.containsPii||!1)}executeCallback(e,t,r){this.localCallback&&this.localCallback(e,t,r)}error(e,t){this.logMessage(e,{logLevel:ne.Error,containsPii:!1,correlationId:t||y.EMPTY_STRING})}errorPii(e,t){this.logMessage(e,{logLevel:ne.Error,containsPii:!0,correlationId:t||y.EMPTY_STRING})}warning(e,t){this.logMessage(e,{logLevel:ne.Warning,containsPii:!1,correlationId:t||y.EMPTY_STRING})}warningPii(e,t){this.logMessage(e,{logLevel:ne.Warning,containsPii:!0,correlationId:t||y.EMPTY_STRING})}info(e,t){this.logMessage(e,{logLevel:ne.Info,containsPii:!1,correlationId:t||y.EMPTY_STRING})}infoPii(e,t){this.logMessage(e,{logLevel:ne.Info,containsPii:!0,correlationId:t||y.EMPTY_STRING})}verbose(e,t){this.logMessage(e,{logLevel:ne.Warning,containsPii:!1,correlationId:t||y.EMPTY_STRING})}verbosePii(e,t){this.logMessage(e,{logLevel:ne.Warning,containsPii:!0,correlationId:t||y.EMPTY_STRING})}trace(e,t){this.logMessage(e,{logLevel:ne.Trace,containsPii:!1,correlationId:t||y.EMPTY_STRING})}tracePii(e,t){this.logMessage(e,{logLevel:ne.Trace,containsPii:!0,correlationId:t||y.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}};var rf="@azure/msal-common",Cs="14.16.1";var zr={None:"none",AzurePublic:"https://login.microsoftonline.com",AzurePpe:"https://login.windows-ppe.net",AzureChina:"https://login.chinacloudapi.cn",AzureGermany:"https://login.microsoftonline.de",AzureUsGovernment:"https://login.microsoftonline.us"};var he={};Ut(he,{createAccessTokenEntity:()=>Um,createIdTokenEntity:()=>Fm,createRefreshTokenEntity:()=>Hm,generateAppMetadataKey:()=>gk,generateAuthorityMetadataExpiresAt:()=>sf,generateCredentialKey:()=>rl,isAccessTokenEntity:()=>ik,isAppMetadataEntity:()=>mk,isAuthorityMetadataEntity:()=>yk,isAuthorityMetadataExpired:()=>af,isCredentialEntity:()=>of,isIdTokenEntity:()=>sk,isRefreshTokenEntity:()=>ak,isServerTelemetryEntity:()=>hk,isThrottlingEntity:()=>pk,updateAuthorityEndpointMetadata:()=>Is,updateCloudDiscoveryMetadata:()=>ol});var Gr={};Ut(Gr,{checkMaxAge:()=>tl,extractTokenClaims:()=>rr,getJWSPayload:()=>vS});function rr(n,e){let t=vS(n);try{let r=e(t);return JSON.parse(r)}catch{throw v(Hr)}}function vS(n){if(!n)throw v(Ko);let t=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(n);if(!t||t.length<4)throw v(Hr);return t[2]}function tl(n,e){if(e===0||Date.now()-3e5>n+e)throw v(Xo)}var nl={};Ut(nl,{delay:()=>ok,isTokenExpired:()=>Es,nowSeconds:()=>Ot,wasClockTurnedBack:()=>Lm});function Ot(){return Math.round(new Date().getTime()/1e3)}function Es(n,e){let t=Number(n)||0;return Ot()+e>t}function Lm(n){return Number(n)>Ot()}function ok(n,e){return new Promise(t=>setTimeout(()=>t(e),n))}function rl(n){return[ck(n),lk(n),uk(n),dk(n),fk(n)].join(Te.CACHE_KEY_SEPARATOR).toLowerCase()}function Fm(n,e,t,r,o){return{credentialType:F.ID_TOKEN,homeAccountId:n,environment:e,clientId:r,secret:t,realm:o}}function Um(n,e,t,r,o,i,s,a,c,l,u,f,g,p,I){let S={homeAccountId:n,credentialType:F.ACCESS_TOKEN,secret:t,cachedAt:Ot().toString(),expiresOn:s.toString(),extendedExpiresOn:a.toString(),environment:e,clientId:r,realm:o,target:i,tokenType:u||Q.BEARER};if(f&&(S.userAssertionHash=f),l&&(S.refreshOn=l.toString()),p&&(S.requestedClaims=p,S.requestedClaimsHash=I),S.tokenType?.toLowerCase()!==Q.BEARER.toLowerCase())switch(S.credentialType=F.ACCESS_TOKEN_WITH_AUTH_SCHEME,S.tokenType){case Q.POP:let w=rr(t,c);if(!w?.cnf?.kid)throw v(ii);S.keyId=w.cnf.kid;break;case Q.SSH:S.keyId=g}return S}function Hm(n,e,t,r,o,i,s){let a={credentialType:F.REFRESH_TOKEN,homeAccountId:n,environment:e,clientId:r,secret:t};return i&&(a.userAssertionHash=i),o&&(a.familyId=o),s&&(a.expiresOn=s.toString()),a}function of(n){return n.hasOwnProperty("homeAccountId")&&n.hasOwnProperty("environment")&&n.hasOwnProperty("credentialType")&&n.hasOwnProperty("clientId")&&n.hasOwnProperty("secret")}function ik(n){return n?of(n)&&n.hasOwnProperty("realm")&&n.hasOwnProperty("target")&&(n.credentialType===F.ACCESS_TOKEN||n.credentialType===F.ACCESS_TOKEN_WITH_AUTH_SCHEME):!1}function sk(n){return n?of(n)&&n.hasOwnProperty("realm")&&n.credentialType===F.ID_TOKEN:!1}function ak(n){return n?of(n)&&n.credentialType===F.REFRESH_TOKEN:!1}function ck(n){return[n.homeAccountId,n.environment].join(Te.CACHE_KEY_SEPARATOR).toLowerCase()}function lk(n){let e=n.credentialType===F.REFRESH_TOKEN&&n.familyId||n.clientId;return[n.credentialType,e,n.realm||""].join(Te.CACHE_KEY_SEPARATOR).toLowerCase()}function uk(n){return(n.target||"").toLowerCase()}function dk(n){return(n.requestedClaimsHash||"").toLowerCase()}function fk(n){return n.tokenType&&n.tokenType.toLowerCase()!==Q.BEARER.toLowerCase()?n.tokenType.toLowerCase():""}function hk(n,e){let t=n.indexOf(Le.CACHE_KEY)===0,r=!0;return e&&(r=e.hasOwnProperty("failedRequests")&&e.hasOwnProperty("errors")&&e.hasOwnProperty("cacheHits")),t&&r}function pk(n,e){let t=!1;n&&(t=n.indexOf(Xn.THROTTLING_PREFIX)===0);let r=!0;return e&&(r=e.hasOwnProperty("throttleTime")),t&&r}function gk({environment:n,clientId:e}){return[xc,n,e].join(Te.CACHE_KEY_SEPARATOR).toLowerCase()}function mk(n,e){return e?n.indexOf(xc)===0&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("environment"):!1}function yk(n,e){return e?n.indexOf(vs.CACHE_KEY)===0&&e.hasOwnProperty("aliases")&&e.hasOwnProperty("preferred_cache")&&e.hasOwnProperty("preferred_network")&&e.hasOwnProperty("canonical_authority")&&e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("aliasesFromNetwork")&&e.hasOwnProperty("endpointsFromNetwork")&&e.hasOwnProperty("expiresAt")&&e.hasOwnProperty("jwks_uri"):!1}function sf(){return Ot()+vs.REFRESH_TIME_SECONDS}function Is(n,e,t){n.authorization_endpoint=e.authorization_endpoint,n.token_endpoint=e.token_endpoint,n.end_session_endpoint=e.end_session_endpoint,n.issuer=e.issuer,n.endpointsFromNetwork=t,n.jwks_uri=e.jwks_uri}function ol(n,e,t){n.aliases=e.aliases,n.preferred_cache=e.preferred_cache,n.preferred_network=e.preferred_network,n.aliasesFromNetwork=t}function af(n){return n.expiresAt<=Ot()}var dn={};Ut(dn,{authorityMismatch:()=>dl,authorityUriInsecure:()=>di,cannotAllowNativeBroker:()=>ul,cannotSetOIDCOptions:()=>ll,claimsRequestParsingError:()=>il,emptyInputScopesError:()=>hi,invalidAuthenticationHeader:()=>cl,invalidAuthorityMetadata:()=>vi,invalidClaims:()=>or,invalidCloudDiscoveryMetadata:()=>qr,invalidCodeChallengeMethod:()=>yi,invalidPromptValue:()=>pi,logoutRequestEmpty:()=>mi,missingNonceAuthenticationHeader:()=>al,missingSshJwk:()=>sr,missingSshKid:()=>sl,pkceParamsMissing:()=>ir,redirectUriEmpty:()=>ui,tokenRequestEmpty:()=>gi,untrustedAuthority:()=>Ci,urlEmptyError:()=>fi,urlParseError:()=>bn});var ui="redirect_uri_empty",il="claims_request_parsing_error",di="authority_uri_insecure",bn="url_parse_error",fi="empty_url_error",hi="empty_input_scopes_error",pi="invalid_prompt_value",or="invalid_claims",gi="token_request_empty",mi="logout_request_empty",yi="invalid_code_challenge_method",ir="pkce_params_missing",qr="invalid_cloud_discovery_metadata",vi="invalid_authority_metadata",Ci="untrusted_authority",sr="missing_ssh_jwk",sl="missing_ssh_kid",al="missing_nonce_authentication_header",cl="invalid_authentication_header",ll="cannot_set_OIDCOptions",ul="cannot_allow_native_broker",dl="authority_mismatch";var Ce={[ui]:"A redirect URI is required for all calls, and none has been set.",[il]:"Could not parse the given claims request object.",[di]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[bn]:"URL could not be parsed into appropriate segments.",[fi]:"URL was empty or null.",[hi]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[pi]:"Please see here for valid configuration options: https://azuread.github.io/microsoft-authentication-library-for-js/ref/modules/_azure_msal_common.html#commonauthorizationurlrequest",[or]:"Given claims parameter must be a stringified JSON object.",[gi]:"Token request was empty and not found in cache.",[mi]:"The logout request was null or undefined.",[yi]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[ir]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[qr]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[vi]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[Ci]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[sr]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[sl]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[al]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[cl]:"Invalid authentication header provided",[ll]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[ul]:"Cannot set allowNativeBroker parameter to true when not in AAD protocol mode.",[dl]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority."},CS={redirectUriNotSet:{code:ui,desc:Ce[ui]},claimsRequestParsingError:{code:il,desc:Ce[il]},authorityUriInsecure:{code:di,desc:Ce[di]},urlParseError:{code:bn,desc:Ce[bn]},urlEmptyError:{code:fi,desc:Ce[fi]},emptyScopesError:{code:hi,desc:Ce[hi]},invalidPrompt:{code:pi,desc:Ce[pi]},invalidClaimsRequest:{code:or,desc:Ce[or]},tokenRequestEmptyError:{code:gi,desc:Ce[gi]},logoutRequestEmptyError:{code:mi,desc:Ce[mi]},invalidCodeChallengeMethod:{code:yi,desc:Ce[yi]},invalidCodeChallengeParams:{code:ir,desc:Ce[ir]},invalidCloudDiscoveryMetadata:{code:qr,desc:Ce[qr]},invalidAuthorityMetadata:{code:vi,desc:Ce[vi]},untrustedAuthority:{code:Ci,desc:Ce[Ci]},missingSshJwk:{code:sr,desc:Ce[sr]},missingSshKid:{code:sl,desc:Ce[sl]},missingNonceAuthenticationHeader:{code:al,desc:Ce[al]},invalidAuthenticationHeader:{code:cl,desc:Ce[cl]},cannotSetOIDCOptions:{code:ll,desc:Ce[ll]},cannotAllowNativeBroker:{code:ul,desc:Ce[ul]},authorityMismatch:{code:dl,desc:Ce[dl]}},fl=class n extends ${constructor(e){super(e,Ce[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,n.prototype)}};function J(n){return new fl(n)}var Ee=class{static isEmptyObj(e){if(e)try{let t=JSON.parse(e);return Object.keys(t).length===0}catch{}return!0}static startsWith(e,t){return e.indexOf(t)===0}static endsWith(e,t){return e.length>=t.length&&e.lastIndexOf(t)===e.length-t.length}static queryStringToObject(e){let t={},r=e.split("&"),o=i=>decodeURIComponent(i.replace(/\+/g," "));return r.forEach(i=>{if(i.trim()){let[s,a]=i.split(/=(.+)/g,2);s&&a&&(t[o(s)]=o(a))}}),t}static trimArrayEntries(e){return e.map(t=>t.trim())}static removeEmptyStringsFromArray(e){return e.filter(t=>!!t)}static jsonParseHelper(e){try{return JSON.parse(e)}catch{return null}}static matchPattern(e,t){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(t)}};var ye=class n{constructor(e){let t=e?Ee.trimArrayEntries([...e]):[],r=t?Ee.removeEmptyStringsFromArray(t):[];this.validateInputScopes(r),this.scopes=new Set,r.forEach(o=>this.scopes.add(o))}static fromString(e){let r=(e||y.EMPTY_STRING).split(" ");return new n(r)}static createSearchScopes(e){let t=new n(e);return t.containsOnlyOIDCScopes()?t.removeScope(y.OFFLINE_ACCESS_SCOPE):t.removeOIDCScopes(),t}validateInputScopes(e){if(!e||e.length<1)throw J(hi)}containsScope(e){let t=this.printScopesLowerCase().split(" "),r=new n(t);return e?r.scopes.has(e.toLowerCase()):!1}containsScopeSet(e){return!e||e.scopes.size<=0?!1:this.scopes.size>=e.scopes.size&&e.asArray().every(t=>this.containsScope(t))}containsOnlyOIDCScopes(){let e=0;return Om.forEach(t=>{this.containsScope(t)&&(e+=1)}),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach(t=>this.appendScope(t))}catch{throw v(ri)}}removeScope(e){if(!e)throw v(ni);this.scopes.delete(e.trim())}removeOIDCScopes(){Om.forEach(e=>{this.scopes.delete(e)})}unionScopeSets(e){if(!e)throw v(jr);let t=new Set;return e.scopes.forEach(r=>t.add(r.toLowerCase())),this.scopes.forEach(r=>t.add(r.toLowerCase())),t}intersectingScopeSets(e){if(!e)throw v(jr);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();let t=this.unionScopeSets(e),r=e.getScopeCount(),o=this.getScopeCount();return t.size<o+r}getScopeCount(){return this.scopes.size}asArray(){let e=[];return this.scopes.forEach(t=>e.push(t)),e}printScopes(){return this.scopes?this.asArray().join(" "):y.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}};function Ts(n,e){if(!n)throw v(qo);try{let t=e(n);return JSON.parse(t)}catch{throw v(Ur)}}function ar(n){if(!n)throw v(Ur);let e=n.split(Te.CLIENT_INFO_SEPARATOR,2);return{uid:e[0],utid:e.length<2?y.EMPTY_STRING:e[1]}}function Ss(n,e){return!!n&&!!e&&n===e.split(".")[1]}function ws(n,e,t,r){if(r){let{oid:o,sub:i,tid:s,name:a,tfp:c,acr:l}=r,u=s||c||l||"";return{tenantId:u,localAccountId:o||i||"",name:a,isHomeTenant:Ss(u,n)}}else return{tenantId:t,localAccountId:e,isHomeTenant:Ss(t,n)}}function Ei(n,e,t,r){let o=n;if(e){let i=e,{isHomeTenant:a}=i,c=Un(i,["isHomeTenant"]);o=m(m({},n),c)}if(t){let s=ws(n.homeAccountId,n.localAccountId,n.tenantId,t),{isHomeTenant:a}=s,c=Un(s,["isHomeTenant"]);return o=A(m(m({},o),c),{idTokenClaims:t,idToken:r}),o}return o}var dt={Default:0,Adfs:1,Dsts:2,Ciam:3};function cf(n){return n&&(n.tid||n.tfp||n.acr)||null}var Qe={AAD:"AAD",OIDC:"OIDC"};var ge=class n{generateAccountId(){return[this.homeAccountId,this.environment].join(Te.CACHE_KEY_SEPARATOR).toLowerCase()}generateAccountKey(){return n.generateAccountCacheKey({homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId})}getAccountInfo(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,name:this.name,nativeAccountId:this.nativeAccountId,authorityType:this.authorityType,tenantProfiles:new Map((this.tenantProfiles||[]).map(e=>[e.tenantId,e]))}}isSingleTenant(){return!this.tenantProfiles}static generateAccountCacheKey(e){let t=e.homeAccountId.split(".")[1];return[e.homeAccountId,e.environment||"",t||e.tenantId||""].join(Te.CACHE_KEY_SEPARATOR).toLowerCase()}static createAccount(e,t,r){let o=new n;t.authorityType===dt.Adfs?o.authorityType=ys.ADFS_ACCOUNT_TYPE:t.protocolMode===Qe.AAD?o.authorityType=ys.MSSTS_ACCOUNT_TYPE:o.authorityType=ys.GENERIC_ACCOUNT_TYPE;let i;e.clientInfo&&r&&(i=Ts(e.clientInfo,r)),o.clientInfo=e.clientInfo,o.homeAccountId=e.homeAccountId,o.nativeAccountId=e.nativeAccountId;let s=e.environment||t&&t.getPreferredCache();if(!s)throw v(nr);o.environment=s,o.realm=i?.utid||cf(e.idTokenClaims)||"",o.localAccountId=i?.uid||e.idTokenClaims?.oid||e.idTokenClaims?.sub||"";let a=e.idTokenClaims?.preferred_username||e.idTokenClaims?.upn,c=e.idTokenClaims?.emails?e.idTokenClaims.emails[0]:null;if(o.username=a||c||"",o.name=e.idTokenClaims?.name||"",o.cloudGraphHostName=e.cloudGraphHostName,o.msGraphHost=e.msGraphHost,e.tenantProfiles)o.tenantProfiles=e.tenantProfiles;else{let l=ws(e.homeAccountId,o.localAccountId,o.realm,e.idTokenClaims);o.tenantProfiles=[l]}return o}static createFromAccountInfo(e,t,r){let o=new n;return o.authorityType=e.authorityType||ys.GENERIC_ACCOUNT_TYPE,o.homeAccountId=e.homeAccountId,o.localAccountId=e.localAccountId,o.nativeAccountId=e.nativeAccountId,o.realm=e.tenantId,o.environment=e.environment,o.username=e.username,o.name=e.name,o.cloudGraphHostName=t,o.msGraphHost=r,o.tenantProfiles=Array.from(e.tenantProfiles?.values()||[]),o}static generateHomeAccountId(e,t,r,o,i){if(!(t===dt.Adfs||t===dt.Dsts)){if(e)try{let s=Ts(e,o.base64Decode);if(s.uid&&s.utid)return`${s.uid}.${s.utid}`}catch{}r.warning("No client info in response")}return i?.sub||""}static isAccountEntity(e){return e?e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType"):!1}static accountInfoIsEqual(e,t,r){if(!e||!t)return!1;let o=!0;if(r){let i=e.idTokenClaims||{},s=t.idTokenClaims||{};o=i.iat===s.iat&&i.nonce===s.nonce}return e.homeAccountId===t.homeAccountId&&e.localAccountId===t.localAccountId&&e.username===t.username&&e.tenantId===t.tenantId&&e.environment===t.environment&&e.nativeAccountId===t.nativeAccountId&&o}};var Kr={};Ut(Kr,{getDeserializedResponse:()=>Bm,stripLeadingHashOrQuery:()=>ES});function ES(n){return n.startsWith("#/")?n.substring(2):n.startsWith("#")||n.startsWith("?")?n.substring(1):n}function Bm(n){if(!n||n.indexOf("=")<0)return null;try{let e=ES(n),t=Object.fromEntries(new URLSearchParams(e));if(t.code||t.error||t.error_description||t.state)return t}catch{throw v(Qo)}return null}var j=class n{get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw J(fi);e.includes("#")||(this._urlString=n.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let t=e.toLowerCase();return Ee.endsWith(t,"?")?t=t.slice(0,-1):Ee.endsWith(t,"?/")&&(t=t.slice(0,-2)),Ee.endsWith(t,"/")||(t+="/"),t}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch{throw J(bn)}if(!e.HostNameAndPort||!e.PathSegments)throw J(bn);if(!e.Protocol||e.Protocol.toLowerCase()!=="https:")throw J(di)}static appendQueryString(e,t){return t?e.indexOf("?")<0?`${e}?${t}`:`${e}&${t}`:e}static removeHashFromUrl(e){return n.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){let t=this.getUrlComponents(),r=t.PathSegments;return e&&r.length!==0&&(r[0]===an.COMMON||r[0]===an.ORGANIZATIONS)&&(r[0]=e),n.constructAuthorityUriFromObject(t)}getUrlComponents(){let e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),t=this.urlString.match(e);if(!t)throw J(bn);let r={Protocol:t[1],HostNameAndPort:t[4],AbsolutePath:t[5],QueryString:t[7]},o=r.AbsolutePath.split("/");return o=o.filter(i=>i&&i.length>0),r.PathSegments=o,r.QueryString&&r.QueryString.endsWith("/")&&(r.QueryString=r.QueryString.substring(0,r.QueryString.length-1)),r}static getDomainFromUrl(e){let t=RegExp("^([^:/?#]+://)?([^/?#]*)"),r=e.match(t);if(!r)throw J(bn);return r[2]}static getAbsoluteUrl(e,t){if(e[0]===y.FORWARD_SLASH){let o=new n(t).getUrlComponents();return o.Protocol+"//"+o.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new n(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}static hashContainsKnownProperties(e){return!!Bm(e)}};var TS={endpointMetadata:{"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},instanceDiscoveryMetadata:{tenant_discovery_endpoint:"https://{canonicalAuthority}/v2.0/.well-known/openid-configuration",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]}},jm=TS.endpointMetadata,Vm=TS.instanceDiscoveryMetadata,$m=new Set;Vm.metadata.forEach(n=>{n.aliases.forEach(e=>{$m.add(e)})});function SS(n,e){let t,r=n.canonicalAuthority;if(r){let o=new j(r).getUrlComponents().HostNameAndPort;t=IS(o,n.cloudDiscoveryMetadata?.metadata,lt.CONFIG,e)||IS(o,Vm.metadata,lt.HARDCODED_VALUES,e)||n.knownAuthorities}return t||[]}function IS(n,e,t,r){if(r?.trace(`getAliasesFromMetadata called with source: ${t}`),n&&e){let o=hl(e,n);if(o)return r?.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${t}, returning aliases`),o.aliases;r?.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${t}`)}return null}function wS(n){return hl(Vm.metadata,n)}function hl(n,e){for(let t=0;t<n.length;t++){let r=n[t];if(r.aliases.includes(e))return r}return null}var uf={};Ut(uf,{cacheErrorUnknown:()=>pl,cacheQuotaExceeded:()=>lf});var lf="cache_quota_exceeded",pl="cache_error_unknown";var zm={[lf]:"Exceeded cache storage capacity.",[pl]:"Unexpected error occurred when using cache storage."},Wr=class n extends Error{constructor(e,t){let r=t||(zm[e]?zm[e]:zm[pl]);super(`${e}: ${r}`),Object.setPrototypeOf(this,n.prototype),this.name="CacheError",this.errorCode=e,this.errorMessage=r}};function gl(n){return n instanceof Error?n.name==="QuotaExceededError"||n.name==="NS_ERROR_DOM_QUOTA_REACHED"||n.message.includes("exceeded the quota")?new Wr(lf):new Wr(n.name,n.message):new Wr(pl)}var cr=class n{constructor(e,t,r,o){this.clientId=e,this.cryptoImpl=t,this.commonLogger=r.clone(rf,Cs),this.staticAuthorityOptions=o}getAllAccounts(e,t){return this.buildTenantProfiles(this.getAccountsFilteredBy(t||{},e),e,t)}getAccountInfoFilteredBy(e,t){let r=this.getAllAccounts(t,e);return r.length>1?r.sort(i=>i.idTokenClaims?-1:1)[0]:r.length===1?r[0]:null}getBaseAccountInfo(e,t){let r=this.getAccountsFilteredBy(e,t);return r.length>0?r[0].getAccountInfo():null}buildTenantProfiles(e,t,r){return e.flatMap(o=>this.getTenantProfilesFromAccountEntity(o,t,r?.tenantId,r))}getTenantedAccountInfoByFilter(e,t,r,o,i){let s=null,a;if(i&&!this.tenantProfileMatchesFilter(r,i))return null;let c=this.getIdToken(e,o,t,r.tenantId);return c&&(a=rr(c.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(a,i))?null:(s=Ei(e,r,a,c?.secret),s)}getTenantProfilesFromAccountEntity(e,t,r,o){let i=e.getAccountInfo(),s=i.tenantProfiles||new Map,a=this.getTokenKeys();if(r){let l=s.get(r);if(l)s=new Map([[r,l]]);else return[]}let c=[];return s.forEach(l=>{let u=this.getTenantedAccountInfoByFilter(i,a,l,t,o);u&&c.push(u)}),c}tenantProfileMatchesFilter(e,t){return!(t.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(e,t.localAccountId)||t.name&&e.name!==t.name||t.isHomeTenant!==void 0&&e.isHomeTenant!==t.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(e,t){return!(t&&(t.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(e,t.localAccountId)||t.loginHint&&!this.matchLoginHintFromTokenClaims(e,t.loginHint)||t.username&&!this.matchUsername(e.preferred_username,t.username)||t.name&&!this.matchName(e,t.name)||t.sid&&!this.matchSid(e,t.sid)))}saveCacheRecord(e,t,r){return h(this,null,function*(){if(!e)throw v(oi);try{e.account&&this.setAccount(e.account,t),e.idToken&&r?.idToken!==!1&&this.setIdTokenCredential(e.idToken,t),e.accessToken&&r?.accessToken!==!1&&(yield this.saveAccessToken(e.accessToken,t)),e.refreshToken&&r?.refreshToken!==!1&&this.setRefreshTokenCredential(e.refreshToken,t),e.appMetadata&&this.setAppMetadata(e.appMetadata,t)}catch(o){throw this.commonLogger?.error("CacheManager.saveCacheRecord: failed"),o instanceof $?o:gl(o)}})}saveAccessToken(e,t){return h(this,null,function*(){let r={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},o=this.getTokenKeys(),i=ye.fromString(e.target);o.accessToken.forEach(s=>{if(!this.accessTokenKeyMatchesFilter(s,r,!1))return;let a=this.getAccessTokenCredential(s,t);a&&this.credentialMatchesFilter(a,r)&&ye.fromString(a.target).intersectingScopeSets(i)&&this.removeAccessToken(s,t)}),this.setAccessTokenCredential(e,t)})}getAccountsFilteredBy(e,t){let r=this.getAccountKeys(),o=[];return r.forEach(i=>{if(!this.isAccountKey(i,e.homeAccountId))return;let s=this.getAccount(i,t,this.commonLogger);if(!s||e.homeAccountId&&!this.matchHomeAccountId(s,e.homeAccountId)||e.username&&!this.matchUsername(s.username,e.username)||e.environment&&!this.matchEnvironment(s,e.environment)||e.realm&&!this.matchRealm(s,e.realm)||e.nativeAccountId&&!this.matchNativeAccountId(s,e.nativeAccountId)||e.authorityType&&!this.matchAuthorityType(s,e.authorityType))return;let a={localAccountId:e?.localAccountId,name:e?.name},c=s.tenantProfiles?.filter(l=>this.tenantProfileMatchesFilter(l,a));c&&c.length===0||o.push(s)}),o}isAccountKey(e,t,r){return!(e.split(Te.CACHE_KEY_SEPARATOR).length<3||t&&!e.toLowerCase().includes(t.toLowerCase())||r&&!e.toLowerCase().includes(r.toLowerCase()))}isCredentialKey(e){if(e.split(Te.CACHE_KEY_SEPARATOR).length<6)return!1;let t=e.toLowerCase();if(t.indexOf(F.ID_TOKEN.toLowerCase())===-1&&t.indexOf(F.ACCESS_TOKEN.toLowerCase())===-1&&t.indexOf(F.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase())===-1&&t.indexOf(F.REFRESH_TOKEN.toLowerCase())===-1)return!1;if(t.indexOf(F.REFRESH_TOKEN.toLowerCase())>-1){let r=`${F.REFRESH_TOKEN}${Te.CACHE_KEY_SEPARATOR}${this.clientId}${Te.CACHE_KEY_SEPARATOR}`,o=`${F.REFRESH_TOKEN}${Te.CACHE_KEY_SEPARATOR}${Fr}${Te.CACHE_KEY_SEPARATOR}`;if(t.indexOf(r.toLowerCase())===-1&&t.indexOf(o.toLowerCase())===-1)return!1}else if(t.indexOf(this.clientId.toLowerCase())===-1)return!1;return!0}credentialMatchesFilter(e,t){return!(t.clientId&&!this.matchClientId(e,t.clientId)||t.userAssertionHash&&!this.matchUserAssertionHash(e,t.userAssertionHash)||typeof t.homeAccountId=="string"&&!this.matchHomeAccountId(e,t.homeAccountId)||t.environment&&!this.matchEnvironment(e,t.environment)||t.realm&&!this.matchRealm(e,t.realm)||t.credentialType&&!this.matchCredentialType(e,t.credentialType)||t.familyId&&!this.matchFamilyId(e,t.familyId)||t.target&&!this.matchTarget(e,t.target)||(t.requestedClaimsHash||e.requestedClaimsHash)&&e.requestedClaimsHash!==t.requestedClaimsHash||e.credentialType===F.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(t.tokenType&&!this.matchTokenType(e,t.tokenType)||t.tokenType===Q.SSH&&t.keyId&&!this.matchKeyId(e,t.keyId)))}getAppMetadataFilteredBy(e){let t=this.getKeys(),r={};return t.forEach(o=>{if(!this.isAppMetadata(o))return;let i=this.getAppMetadata(o);i&&(e.environment&&!this.matchEnvironment(i,e.environment)||e.clientId&&!this.matchClientId(i,e.clientId)||(r[o]=i))}),r}getAuthorityMetadataByAlias(e){let t=this.getAuthorityMetadataKeys(),r=null;return t.forEach(o=>{if(!this.isAuthorityMetadata(o)||o.indexOf(this.clientId)===-1)return;let i=this.getAuthorityMetadata(o);i&&i.aliases.indexOf(e)!==-1&&(r=i)}),r}removeAllAccounts(e){return h(this,null,function*(){let t=this.getAccountKeys(),r=[];t.forEach(o=>{r.push(this.removeAccount(o,e))}),yield Promise.all(r)})}removeAccount(e,t){return h(this,null,function*(){let r=this.getAccount(e,t,this.commonLogger);r&&(yield this.removeAccountContext(r,t),this.removeItem(e,t))})}removeAccountContext(e,t){return h(this,null,function*(){let r=this.getTokenKeys(),o=e.generateAccountId();r.idToken.forEach(i=>{i.indexOf(o)===0&&this.removeIdToken(i,t)}),r.accessToken.forEach(i=>{i.indexOf(o)===0&&this.removeAccessToken(i,t)}),r.refreshToken.forEach(i=>{i.indexOf(o)===0&&this.removeRefreshToken(i,t)}),this.getKeys().forEach(i=>{i.includes(o)&&this.removeItem(i,t)})})}updateOutdatedCachedAccount(e,t,r,o){if(t&&t.isSingleTenant()){this.commonLogger?.verbose("updateOutdatedCachedAccount: Found a single-tenant (outdated) account entity in the cache, migrating to multi-tenant account entity");let i=this.getAccountKeys().filter(u=>u.startsWith(t.homeAccountId)),s=[];i.forEach(u=>{let f=this.getCachedAccountEntity(u,r);f&&s.push(f)});let a=s.find(u=>Ss(u.realm,u.homeAccountId))||s[0];a.tenantProfiles=s.map(u=>({tenantId:u.realm,localAccountId:u.localAccountId,name:u.name,isHomeTenant:Ss(u.realm,u.homeAccountId)}));let c=n.toObject(new ge,m({},a)),l=c.generateAccountKey();return i.forEach(u=>{u!==l&&this.removeOutdatedAccount(e,r)}),this.setAccount(c,r),o?.verbose("Updated an outdated account entity in the cache"),c}return t}removeAccessToken(e,t){let r=this.getAccessTokenCredential(e,t);if(this.removeItem(e,t),!r||r.credentialType.toLowerCase()!==F.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()||r.tokenType!==Q.POP)return;let o=r.keyId;o&&this.cryptoImpl.removeTokenBindingKey(o).catch(()=>{this.commonLogger.error("Binding key could not be removed")})}removeAppMetadata(e){return this.getKeys().forEach(r=>{this.isAppMetadata(r)&&this.removeItem(r,e)}),!0}readAccountFromCache(e,t){let r=ge.generateAccountCacheKey(e);return this.getAccount(r,t,this.commonLogger)}getIdToken(e,t,r,o,i){this.commonLogger.trace("CacheManager - getIdToken called");let s={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:F.ID_TOKEN,clientId:this.clientId,realm:o},a=this.getIdTokensByFilter(s,t,r),c=a.size;if(c<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(c>1){let l=a;if(!o){let u=new Map;a.forEach((g,p)=>{g.realm===e.tenantId&&u.set(p,g)});let f=u.size;if(f<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),a.values().next().value;if(f===1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),u.values().next().value;l=u}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),l.forEach((u,f)=>{this.removeIdToken(f,t)}),i&&t&&i.addFields({multiMatchedID:a.size},t),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),a.values().next().value}getIdTokensByFilter(e,t,r){let o=r&&r.idToken||this.getTokenKeys().idToken,i=new Map;return o.forEach(s=>{if(!this.idTokenKeyMatchesFilter(s,m({clientId:this.clientId},e)))return;let a=this.getIdTokenCredential(s,t);a&&this.credentialMatchesFilter(a,e)&&i.set(s,a)}),i}idTokenKeyMatchesFilter(e,t){let r=e.toLowerCase();return!(t.clientId&&r.indexOf(t.clientId.toLowerCase())===-1||t.homeAccountId&&r.indexOf(t.homeAccountId.toLowerCase())===-1)}removeIdToken(e,t){this.removeItem(e,t)}removeRefreshToken(e,t){this.removeItem(e,t)}getAccessToken(e,t,r,o,i){this.commonLogger.trace("CacheManager - getAccessToken called");let s=ye.createSearchScopes(t.scopes),a=t.authenticationScheme||Q.BEARER,c=a&&a.toLowerCase()!==Q.BEARER.toLowerCase()?F.ACCESS_TOKEN_WITH_AUTH_SCHEME:F.ACCESS_TOKEN,l={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:c,clientId:this.clientId,realm:o||e.tenantId,target:s,tokenType:a,keyId:t.sshKid,requestedClaimsHash:t.requestedClaimsHash},u=r&&r.accessToken||this.getTokenKeys().accessToken,f=[];u.forEach(p=>{if(this.accessTokenKeyMatchesFilter(p,l,!0)){let I=this.getAccessTokenCredential(p,t.correlationId);I&&this.credentialMatchesFilter(I,l)&&f.push(I)}});let g=f.length;return g<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found"),null):g>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them"),f.forEach(p=>{this.removeAccessToken(rl(p),t.correlationId)}),i&&t.correlationId&&i.addFields({multiMatchedAT:f.length},t.correlationId),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token"),f[0])}accessTokenKeyMatchesFilter(e,t,r){let o=e.toLowerCase();if(t.clientId&&o.indexOf(t.clientId.toLowerCase())===-1||t.homeAccountId&&o.indexOf(t.homeAccountId.toLowerCase())===-1||t.realm&&o.indexOf(t.realm.toLowerCase())===-1||t.requestedClaimsHash&&o.indexOf(t.requestedClaimsHash.toLowerCase())===-1)return!1;if(t.target){let i=t.target.asArray();for(let s=0;s<i.length;s++){if(r&&!o.includes(i[s].toLowerCase()))return!1;if(!r&&o.includes(i[s].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(e,t){let r=this.getTokenKeys(),o=[];return r.accessToken.forEach(i=>{if(!this.accessTokenKeyMatchesFilter(i,e,!0))return;let s=this.getAccessTokenCredential(i,t);s&&this.credentialMatchesFilter(s,e)&&o.push(s)}),o}getRefreshToken(e,t,r,o,i){this.commonLogger.trace("CacheManager - getRefreshToken called");let s=t?Fr:void 0,a={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:F.REFRESH_TOKEN,clientId:this.clientId,familyId:s},c=o&&o.refreshToken||this.getTokenKeys().refreshToken,l=[];c.forEach(f=>{if(this.refreshTokenKeyMatchesFilter(f,a)){let g=this.getRefreshTokenCredential(f,r);g&&this.credentialMatchesFilter(g,a)&&l.push(g)}});let u=l.length;return u<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(u>1&&i&&r&&i.addFields({multiMatchedRT:u},r),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),l[0])}refreshTokenKeyMatchesFilter(e,t){let r=e.toLowerCase();return!(t.familyId&&r.indexOf(t.familyId.toLowerCase())===-1||!t.familyId&&t.clientId&&r.indexOf(t.clientId.toLowerCase())===-1||t.homeAccountId&&r.indexOf(t.homeAccountId.toLowerCase())===-1)}readAppMetadataFromCache(e){let t={environment:e,clientId:this.clientId},r=this.getAppMetadataFilteredBy(t),o=Object.keys(r).map(s=>r[s]),i=o.length;if(i<1)return null;if(i>1)throw v(ei);return o[0]}isAppMetadataFOCI(e){let t=this.readAppMetadataFromCache(e);return!!(t&&t.familyId===Fr)}matchHomeAccountId(e,t){return typeof e.homeAccountId=="string"&&t===e.homeAccountId}matchLocalAccountIdFromTokenClaims(e,t){let r=e.oid||e.sub;return t===r}matchLocalAccountIdFromTenantProfile(e,t){return e.localAccountId===t}matchName(e,t){return t.toLowerCase()===e.name?.toLowerCase()}matchUsername(e,t){return!!(e&&typeof e=="string"&&t?.toLowerCase()===e.toLowerCase())}matchUserAssertionHash(e,t){return!!(e.userAssertionHash&&t===e.userAssertionHash)}matchEnvironment(e,t){if(this.staticAuthorityOptions){let o=SS(this.staticAuthorityOptions,this.commonLogger);if(o.includes(t)&&o.includes(e.environment))return!0}let r=this.getAuthorityMetadataByAlias(t);return!!(r&&r.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,t){return e.credentialType&&t.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,t){return!!(e.clientId&&t===e.clientId)}matchFamilyId(e,t){return!!(e.familyId&&t===e.familyId)}matchRealm(e,t){return e.realm?.toLowerCase()===t.toLowerCase()}matchNativeAccountId(e,t){return!!(e.nativeAccountId&&t===e.nativeAccountId)}matchLoginHintFromTokenClaims(e,t){return e.login_hint===t||e.preferred_username===t||e.upn===t}matchSid(e,t){return e.sid===t}matchAuthorityType(e,t){return!!(e.authorityType&&t.toLowerCase()===e.authorityType.toLowerCase())}matchTarget(e,t){return e.credentialType!==F.ACCESS_TOKEN&&e.credentialType!==F.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target?!1:ye.fromString(e.target).containsScopeSet(t)}matchTokenType(e,t){return!!(e.tokenType&&e.tokenType===t)}matchKeyId(e,t){return!!(e.keyId&&e.keyId===t)}isAppMetadata(e){return e.indexOf(xc)!==-1}isAuthorityMetadata(e){return e.indexOf(vs.CACHE_KEY)!==-1}generateAuthorityMetadataCacheKey(e){return`${vs.CACHE_KEY}-${this.clientId}-${e}`}static toObject(e,t){for(let r in t)e[r]=t[r];return e}},ml=class extends cr{setAccount(){throw v(H)}getAccount(){throw v(H)}getCachedAccountEntity(){throw v(H)}setIdTokenCredential(){throw v(H)}getIdTokenCredential(){throw v(H)}setAccessTokenCredential(){throw v(H)}getAccessTokenCredential(){throw v(H)}setRefreshTokenCredential(){throw v(H)}getRefreshTokenCredential(){throw v(H)}setAppMetadata(){throw v(H)}getAppMetadata(){throw v(H)}setServerTelemetry(){throw v(H)}getServerTelemetry(){throw v(H)}setAuthorityMetadata(){throw v(H)}getAuthorityMetadata(){throw v(H)}getAuthorityMetadataKeys(){throw v(H)}setThrottlingCache(){throw v(H)}getThrottlingCache(){throw v(H)}removeItem(){throw v(H)}getKeys(){throw v(H)}getAccountKeys(){throw v(H)}getTokenKeys(){throw v(H)}updateCredentialCacheKey(){throw v(H)}removeOutdatedAccount(){throw v(H)}};var df={tokenRenewalOffsetSeconds:xm,preventCorsPreflight:!1},vk={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:ne.Info,correlationId:y.EMPTY_STRING},Ck={claimsBasedCachingEnabled:!1},Ek={sendGetRequestAsync(){return h(this,null,function*(){throw v(H)})},sendPostRequestAsync(){return h(this,null,function*(){throw v(H)})}},Ik={sku:y.SKU,version:Cs,cpu:y.EMPTY_STRING,os:y.EMPTY_STRING},Tk={clientSecret:y.EMPTY_STRING,clientAssertion:void 0},Sk={azureCloudInstance:zr.None,tenant:`${y.DEFAULT_COMMON_TENANT}`},wk={application:{appName:"",appVersion:""}};function AS({authOptions:n,systemOptions:e,loggerOptions:t,cacheOptions:r,storageInterface:o,networkInterface:i,cryptoInterface:s,clientCredentials:a,libraryInfo:c,telemetry:l,serverTelemetryManager:u,persistencePlugin:f,serializableCache:g}){let p=m(m({},vk),t);return{authOptions:Ak(n),systemOptions:m(m({},df),e),loggerOptions:p,cacheOptions:m(m({},Ck),r),storageInterface:o||new ml(n.clientId,$r,new It(p)),networkInterface:i||Ek,cryptoInterface:s||$r,clientCredentials:a||Tk,libraryInfo:m(m({},Ik),c),telemetry:m(m({},wk),l),serverTelemetryManager:u||null,persistencePlugin:f||null,serializableCache:g||null}}function Ak(n){return m({clientCapabilities:[],azureCloudOptions:Sk,skipAuthorityMetadataCache:!1,instanceAware:!1},n)}function yl(n){return n.authOptions.authority.options.protocolMode===Qe.OIDC}var Ue={HOME_ACCOUNT_ID:"home_account_id",UPN:"UPN"};var ur={};Ut(ur,{ACCESS_TOKEN:()=>bk,BROKER_CLIENT_ID:()=>yf,BROKER_REDIRECT_URI:()=>_y,CCS_HEADER:()=>Lk,CLAIMS:()=>Km,CLIENT_ASSERTION:()=>yy,CLIENT_ASSERTION_TYPE:()=>vy,CLIENT_ID:()=>lr,CLIENT_INFO:()=>Ok,CLIENT_REQUEST_ID:()=>ry,CLIENT_SECRET:()=>my,CODE:()=>Xm,CODE_CHALLENGE:()=>ey,CODE_CHALLENGE_METHOD:()=>ty,CODE_VERIFIER:()=>ny,DEVICE_CODE:()=>gy,DOMAIN_HINT:()=>Ay,ERROR:()=>_k,ERROR_DESCRIPTION:()=>Dk,EXPIRES_IN:()=>Mk,FOCI:()=>xk,GRANT_TYPE:()=>qm,ID_TOKEN:()=>Rk,ID_TOKEN_HINT:()=>py,LOGIN_HINT:()=>wy,LOGOUT_HINT:()=>Ty,NATIVE_BROKER:()=>Iy,NONCE:()=>Jm,OBO_ASSERTION:()=>Cy,ON_BEHALF_OF:()=>Pk,POST_LOGOUT_URI:()=>hy,PROMPT:()=>Zm,REDIRECT_URI:()=>ff,REFRESH_TOKEN:()=>Ym,REFRESH_TOKEN_EXPIRES_IN:()=>Nk,REQUESTED_TOKEN_USE:()=>Ey,REQ_CNF:()=>gf,RESPONSE_MODE:()=>Gm,RESPONSE_TYPE:()=>hf,RETURN_SPA_CODE:()=>mf,SCOPE:()=>Wm,SESSION_STATE:()=>kk,SID:()=>Sy,STATE:()=>Qm,TOKEN_TYPE:()=>pf,X_APP_NAME:()=>dy,X_APP_VER:()=>fy,X_CLIENT_CPU:()=>ay,X_CLIENT_CURR_TELEM:()=>cy,X_CLIENT_EXTRA_SKU:()=>Fk,X_CLIENT_LAST_TELEM:()=>ly,X_CLIENT_OS:()=>sy,X_CLIENT_SKU:()=>oy,X_CLIENT_VER:()=>iy,X_MS_LIB_CAPABILITY:()=>uy});var lr="client_id",ff="redirect_uri",hf="response_type",Gm="response_mode",qm="grant_type",Km="claims",Wm="scope",_k="error",Dk="error_description",bk="access_token",Rk="id_token",Ym="refresh_token",Mk="expires_in",Nk="refresh_token_expires_in",Qm="state",Jm="nonce",Zm="prompt",kk="session_state",Ok="client_info",Xm="code",ey="code_challenge",ty="code_challenge_method",ny="code_verifier",ry="client-request-id",oy="x-client-SKU",iy="x-client-VER",sy="x-client-OS",ay="x-client-CPU",cy="x-client-current-telemetry",ly="x-client-last-telemetry",uy="x-ms-lib-capability",dy="x-app-name",fy="x-app-ver",hy="post_logout_redirect_uri",py="id_token_hint",gy="device_code",my="client_secret",yy="client_assertion",vy="client_assertion_type",pf="token_type",gf="req_cnf",Cy="assertion",Ey="requested_token_use",Pk="on_behalf_of",xk="foci",Lk="X-AnchorMailbox",mf="return_spa_code",Iy="nativebroker",Ty="logout_hint",Sy="sid",wy="login_hint",Ay="domain_hint",Fk="x-client-xtra-sku",yf="brk_client_id",_y="brk_redirect_uri";var Rn=class{static validateRedirectUri(e){if(!e)throw J(ui)}static validatePrompt(e){let t=[];for(let r in me)t.push(me[r]);if(t.indexOf(e)<0)throw J(pi)}static validateClaims(e){try{JSON.parse(e)}catch{throw J(or)}}static validateCodeChallengeParams(e,t){if(!e||!t)throw J(ir);this.validateCodeChallengeMethod(t)}static validateCodeChallengeMethod(e){if([Jd.PLAIN,Jd.S256].indexOf(e)<0)throw J(yi)}};function Uk(n,e,t){if(!e)return;let r=n.get(lr);r&&n.has(yf)&&t?.addFields({embeddedClientId:r,embeddedRedirectUri:n.get(ff)},e)}var Mn=class{constructor(e,t){this.parameters=new Map,this.performanceClient=t,this.correlationId=e}addResponseTypeCode(){this.parameters.set(hf,encodeURIComponent(y.CODE_RESPONSE_TYPE))}addResponseTypeForTokenAndIdToken(){this.parameters.set(hf,encodeURIComponent(`${y.TOKEN_RESPONSE_TYPE} ${y.ID_TOKEN_RESPONSE_TYPE}`))}addResponseMode(e){this.parameters.set(Gm,encodeURIComponent(e||Pm.QUERY))}addNativeBroker(){this.parameters.set(Iy,encodeURIComponent("1"))}addScopes(e,t=!0,r=kt){t&&!r.includes("openid")&&!e.includes("openid")&&r.push("openid");let o=t?[...e||[],...r]:e||[],i=new ye(o);this.parameters.set(Wm,encodeURIComponent(i.printScopes()))}addClientId(e){this.parameters.set(lr,encodeURIComponent(e))}addRedirectUri(e){Rn.validateRedirectUri(e),this.parameters.set(ff,encodeURIComponent(e))}addPostLogoutRedirectUri(e){Rn.validateRedirectUri(e),this.parameters.set(hy,encodeURIComponent(e))}addIdTokenHint(e){this.parameters.set(py,encodeURIComponent(e))}addDomainHint(e){this.parameters.set(Ay,encodeURIComponent(e))}addLoginHint(e){this.parameters.set(wy,encodeURIComponent(e))}addCcsUpn(e){this.parameters.set(_e.CCS_HEADER,encodeURIComponent(`UPN:${e}`))}addCcsOid(e){this.parameters.set(_e.CCS_HEADER,encodeURIComponent(`Oid:${e.uid}@${e.utid}`))}addSid(e){this.parameters.set("sid",encodeURIComponent(e))}addClaims(e,t){let r=this.addClientCapabilitiesToClaims(e,t);Rn.validateClaims(r),this.parameters.set(Km,encodeURIComponent(r))}addCorrelationId(e){this.parameters.set(ry,encodeURIComponent(e))}addLibraryInfo(e){this.parameters.set(oy,e.sku),this.parameters.set(iy,e.version),e.os&&this.parameters.set(sy,e.os),e.cpu&&this.parameters.set(ay,e.cpu)}addApplicationTelemetry(e){e?.appName&&this.parameters.set(dy,e.appName),e?.appVersion&&this.parameters.set(fy,e.appVersion)}addPrompt(e){Rn.validatePrompt(e),this.parameters.set(`${Zm}`,encodeURIComponent(e))}addState(e){e&&this.parameters.set(Qm,encodeURIComponent(e))}addNonce(e){this.parameters.set(Jm,encodeURIComponent(e))}addCodeChallengeParams(e,t){if(Rn.validateCodeChallengeParams(e,t),e&&t)this.parameters.set(ey,encodeURIComponent(e)),this.parameters.set(ty,encodeURIComponent(t));else throw J(ir)}addAuthorizationCode(e){this.parameters.set(Xm,encodeURIComponent(e))}addDeviceCode(e){this.parameters.set(gy,encodeURIComponent(e))}addRefreshToken(e){this.parameters.set(Ym,encodeURIComponent(e))}addCodeVerifier(e){this.parameters.set(ny,encodeURIComponent(e))}addClientSecret(e){this.parameters.set(my,encodeURIComponent(e))}addClientAssertion(e){e&&this.parameters.set(yy,encodeURIComponent(e))}addClientAssertionType(e){e&&this.parameters.set(vy,encodeURIComponent(e))}addOboAssertion(e){this.parameters.set(Cy,encodeURIComponent(e))}addRequestTokenUse(e){this.parameters.set(Ey,encodeURIComponent(e))}addGrantType(e){this.parameters.set(qm,encodeURIComponent(e))}addClientInfo(){this.parameters.set(gS,"1")}addExtraQueryParameters(e){Object.entries(e).forEach(([t,r])=>{!this.parameters.has(t)&&r&&this.parameters.set(t,r)})}addClientCapabilitiesToClaims(e,t){let r;if(!e)r={};else try{r=JSON.parse(e)}catch{throw J(or)}return t&&t.length>0&&(r.hasOwnProperty(ms.ACCESS_TOKEN)||(r[ms.ACCESS_TOKEN]={}),r[ms.ACCESS_TOKEN][ms.XMS_CC]={values:t}),JSON.stringify(r)}addUsername(e){this.parameters.set(Xd.username,encodeURIComponent(e))}addPassword(e){this.parameters.set(Xd.password,encodeURIComponent(e))}addPopToken(e){e&&(this.parameters.set(pf,Q.POP),this.parameters.set(gf,encodeURIComponent(e)))}addSshJwk(e){e&&(this.parameters.set(pf,Q.SSH),this.parameters.set(gf,encodeURIComponent(e)))}addServerTelemetry(e){this.parameters.set(cy,e.generateCurrentRequestHeaderValue()),this.parameters.set(ly,e.generateLastRequestHeaderValue())}addThrottling(){this.parameters.set(uy,Xn.X_MS_LIB_CAPABILITY_VALUE)}addLogoutHint(e){this.parameters.set(Ty,encodeURIComponent(e))}addBrokerParameters(e){let t={};t[yf]=e.brokerClientId,t[_y]=e.brokerRedirectUri,this.addExtraQueryParameters(t)}createQueryString(){let e=new Array;return this.parameters.forEach((t,r)=>{e.push(`${r}=${t}`)}),Uk(this.parameters,this.correlationId,this.performanceClient),e.join("&")}};var Cf={};Ut(Cf,{createDiscoveredInstance:()=>Ry});function _S(n){return n.hasOwnProperty("authorization_endpoint")&&n.hasOwnProperty("token_endpoint")&&n.hasOwnProperty("issuer")&&n.hasOwnProperty("jwks_uri")}function DS(n){return n.hasOwnProperty("tenant_discovery_endpoint")&&n.hasOwnProperty("metadata")}function bS(n){return n.hasOwnProperty("error")&&n.hasOwnProperty("error_description")}var d={AcquireTokenByCode:"acquireTokenByCode",AcquireTokenByRefreshToken:"acquireTokenByRefreshToken",AcquireTokenSilent:"acquireTokenSilent",AcquireTokenSilentAsync:"acquireTokenSilentAsync",AcquireTokenPopup:"acquireTokenPopup",AcquireTokenPreRedirect:"acquireTokenPreRedirect",AcquireTokenRedirect:"acquireTokenRedirect",CryptoOptsGetPublicKeyThumbprint:"cryptoOptsGetPublicKeyThumbprint",CryptoOptsSignJwt:"cryptoOptsSignJwt",SilentCacheClientAcquireToken:"silentCacheClientAcquireToken",SilentIframeClientAcquireToken:"silentIframeClientAcquireToken",AwaitConcurrentIframe:"awaitConcurrentIframe",SilentRefreshClientAcquireToken:"silentRefreshClientAcquireToken",SsoSilent:"ssoSilent",StandardInteractionClientGetDiscoveredAuthority:"standardInteractionClientGetDiscoveredAuthority",FetchAccountIdWithNativeBroker:"fetchAccountIdWithNativeBroker",NativeInteractionClientAcquireToken:"nativeInteractionClientAcquireToken",BaseClientCreateTokenRequestHeaders:"baseClientCreateTokenRequestHeaders",NetworkClientSendPostRequestAsync:"networkClientSendPostRequestAsync",RefreshTokenClientExecutePostToTokenEndpoint:"refreshTokenClientExecutePostToTokenEndpoint",AuthorizationCodeClientExecutePostToTokenEndpoint:"authorizationCodeClientExecutePostToTokenEndpoint",BrokerHandhshake:"brokerHandshake",AcquireTokenByRefreshTokenInBroker:"acquireTokenByRefreshTokenInBroker",AcquireTokenByBroker:"acquireTokenByBroker",RefreshTokenClientExecuteTokenRequest:"refreshTokenClientExecuteTokenRequest",RefreshTokenClientAcquireToken:"refreshTokenClientAcquireToken",RefreshTokenClientAcquireTokenWithCachedRefreshToken:"refreshTokenClientAcquireTokenWithCachedRefreshToken",RefreshTokenClientAcquireTokenByRefreshToken:"refreshTokenClientAcquireTokenByRefreshToken",RefreshTokenClientCreateTokenRequestBody:"refreshTokenClientCreateTokenRequestBody",AcquireTokenFromCache:"acquireTokenFromCache",SilentFlowClientAcquireCachedToken:"silentFlowClientAcquireCachedToken",SilentFlowClientGenerateResultFromCacheRecord:"silentFlowClientGenerateResultFromCacheRecord",AcquireTokenBySilentIframe:"acquireTokenBySilentIframe",InitializeBaseRequest:"initializeBaseRequest",InitializeSilentRequest:"initializeSilentRequest",InitializeClientApplication:"initializeClientApplication",SilentIframeClientTokenHelper:"silentIframeClientTokenHelper",SilentHandlerInitiateAuthRequest:"silentHandlerInitiateAuthRequest",SilentHandlerMonitorIframeForHash:"silentHandlerMonitorIframeForHash",SilentHandlerLoadFrame:"silentHandlerLoadFrame",SilentHandlerLoadFrameSync:"silentHandlerLoadFrameSync",StandardInteractionClientCreateAuthCodeClient:"standardInteractionClientCreateAuthCodeClient",StandardInteractionClientGetClientConfiguration:"standardInteractionClientGetClientConfiguration",StandardInteractionClientInitializeAuthorizationRequest:"standardInteractionClientInitializeAuthorizationRequest",StandardInteractionClientInitializeAuthorizationCodeRequest:"standardInteractionClientInitializeAuthorizationCodeRequest",GetAuthCodeUrl:"getAuthCodeUrl",HandleCodeResponseFromServer:"handleCodeResponseFromServer",HandleCodeResponse:"handleCodeResponse",UpdateTokenEndpointAuthority:"updateTokenEndpointAuthority",AuthClientAcquireToken:"authClientAcquireToken",AuthClientExecuteTokenRequest:"authClientExecuteTokenRequest",AuthClientCreateTokenRequestBody:"authClientCreateTokenRequestBody",AuthClientCreateQueryString:"authClientCreateQueryString",PopTokenGenerateCnf:"popTokenGenerateCnf",PopTokenGenerateKid:"popTokenGenerateKid",HandleServerTokenResponse:"handleServerTokenResponse",DeserializeResponse:"deserializeResponse",AuthorityFactoryCreateDiscoveredInstance:"authorityFactoryCreateDiscoveredInstance",AuthorityResolveEndpointsAsync:"authorityResolveEndpointsAsync",AuthorityResolveEndpointsFromLocalSources:"authorityResolveEndpointsFromLocalSources",AuthorityGetCloudDiscoveryMetadataFromNetwork:"authorityGetCloudDiscoveryMetadataFromNetwork",AuthorityUpdateCloudDiscoveryMetadata:"authorityUpdateCloudDiscoveryMetadata",AuthorityGetEndpointMetadataFromNetwork:"authorityGetEndpointMetadataFromNetwork",AuthorityUpdateEndpointMetadata:"authorityUpdateEndpointMetadata",AuthorityUpdateMetadataWithRegionalInformation:"authorityUpdateMetadataWithRegionalInformation",RegionDiscoveryDetectRegion:"regionDiscoveryDetectRegion",RegionDiscoveryGetRegionFromIMDS:"regionDiscoveryGetRegionFromIMDS",RegionDiscoveryGetCurrentVersion:"regionDiscoveryGetCurrentVersion",AcquireTokenByCodeAsync:"acquireTokenByCodeAsync",GetEndpointMetadataFromNetwork:"getEndpointMetadataFromNetwork",GetCloudDiscoveryMetadataFromNetworkMeasurement:"getCloudDiscoveryMetadataFromNetworkMeasurement",HandleRedirectPromiseMeasurement:"handleRedirectPromise",HandleNativeRedirectPromiseMeasurement:"handleNativeRedirectPromise",UpdateCloudDiscoveryMetadataMeasurement:"updateCloudDiscoveryMetadataMeasurement",UsernamePasswordClientAcquireToken:"usernamePasswordClientAcquireToken",NativeMessageHandlerHandshake:"nativeMessageHandlerHandshake",NativeGenerateAuthResult:"nativeGenerateAuthResult",RemoveHiddenIframe:"removeHiddenIframe",ClearTokensAndKeysWithClaims:"clearTokensAndKeysWithClaims",CacheManagerGetRefreshToken:"cacheManagerGetRefreshToken",GeneratePkceCodes:"generatePkceCodes",GenerateCodeVerifier:"generateCodeVerifier",GenerateCodeChallengeFromVerifier:"generateCodeChallengeFromVerifier",Sha256Digest:"sha256Digest",GetRandomValues:"getRandomValues"},$W=new Map([[d.AcquireTokenByCode,"ATByCode"],[d.AcquireTokenByRefreshToken,"ATByRT"],[d.AcquireTokenSilent,"ATS"],[d.AcquireTokenSilentAsync,"ATSAsync"],[d.AcquireTokenPopup,"ATPopup"],[d.AcquireTokenRedirect,"ATRedirect"],[d.CryptoOptsGetPublicKeyThumbprint,"CryptoGetPKThumb"],[d.CryptoOptsSignJwt,"CryptoSignJwt"],[d.SilentCacheClientAcquireToken,"SltCacheClientAT"],[d.SilentIframeClientAcquireToken,"SltIframeClientAT"],[d.SilentRefreshClientAcquireToken,"SltRClientAT"],[d.SsoSilent,"SsoSlt"],[d.StandardInteractionClientGetDiscoveredAuthority,"StdIntClientGetDiscAuth"],[d.FetchAccountIdWithNativeBroker,"FetchAccIdWithNtvBroker"],[d.NativeInteractionClientAcquireToken,"NtvIntClientAT"],[d.BaseClientCreateTokenRequestHeaders,"BaseClientCreateTReqHead"],[d.NetworkClientSendPostRequestAsync,"NetClientSendPost"],[d.RefreshTokenClientExecutePostToTokenEndpoint,"RTClientExecPost"],[d.AuthorizationCodeClientExecutePostToTokenEndpoint,"AuthCodeClientExecPost"],[d.BrokerHandhshake,"BrokerHandshake"],[d.AcquireTokenByRefreshTokenInBroker,"ATByRTInBroker"],[d.AcquireTokenByBroker,"ATByBroker"],[d.RefreshTokenClientExecuteTokenRequest,"RTClientExecTReq"],[d.RefreshTokenClientAcquireToken,"RTClientAT"],[d.RefreshTokenClientAcquireTokenWithCachedRefreshToken,"RTClientATWithCachedRT"],[d.RefreshTokenClientAcquireTokenByRefreshToken,"RTClientATByRT"],[d.RefreshTokenClientCreateTokenRequestBody,"RTClientCreateTReqBody"],[d.AcquireTokenFromCache,"ATFromCache"],[d.SilentFlowClientAcquireCachedToken,"SltFlowClientATCached"],[d.SilentFlowClientGenerateResultFromCacheRecord,"SltFlowClientGenResFromCache"],[d.AcquireTokenBySilentIframe,"ATBySltIframe"],[d.InitializeBaseRequest,"InitBaseReq"],[d.InitializeSilentRequest,"InitSltReq"],[d.InitializeClientApplication,"InitClientApplication"],[d.SilentIframeClientTokenHelper,"SIClientTHelper"],[d.SilentHandlerInitiateAuthRequest,"SHandlerInitAuthReq"],[d.SilentHandlerMonitorIframeForHash,"SltHandlerMonitorIframeForHash"],[d.SilentHandlerLoadFrame,"SHandlerLoadFrame"],[d.SilentHandlerLoadFrameSync,"SHandlerLoadFrameSync"],[d.StandardInteractionClientCreateAuthCodeClient,"StdIntClientCreateAuthCodeClient"],[d.StandardInteractionClientGetClientConfiguration,"StdIntClientGetClientConf"],[d.StandardInteractionClientInitializeAuthorizationRequest,"StdIntClientInitAuthReq"],[d.StandardInteractionClientInitializeAuthorizationCodeRequest,"StdIntClientInitAuthCodeReq"],[d.GetAuthCodeUrl,"GetAuthCodeUrl"],[d.HandleCodeResponseFromServer,"HandleCodeResFromServer"],[d.HandleCodeResponse,"HandleCodeResp"],[d.UpdateTokenEndpointAuthority,"UpdTEndpointAuth"],[d.AuthClientAcquireToken,"AuthClientAT"],[d.AuthClientExecuteTokenRequest,"AuthClientExecTReq"],[d.AuthClientCreateTokenRequestBody,"AuthClientCreateTReqBody"],[d.AuthClientCreateQueryString,"AuthClientCreateQueryStr"],[d.PopTokenGenerateCnf,"PopTGenCnf"],[d.PopTokenGenerateKid,"PopTGenKid"],[d.HandleServerTokenResponse,"HandleServerTRes"],[d.DeserializeResponse,"DeserializeRes"],[d.AuthorityFactoryCreateDiscoveredInstance,"AuthFactCreateDiscInst"],[d.AuthorityResolveEndpointsAsync,"AuthResolveEndpointsAsync"],[d.AuthorityResolveEndpointsFromLocalSources,"AuthResolveEndpointsFromLocal"],[d.AuthorityGetCloudDiscoveryMetadataFromNetwork,"AuthGetCDMetaFromNet"],[d.AuthorityUpdateCloudDiscoveryMetadata,"AuthUpdCDMeta"],[d.AuthorityGetEndpointMetadataFromNetwork,"AuthUpdCDMetaFromNet"],[d.AuthorityUpdateEndpointMetadata,"AuthUpdEndpointMeta"],[d.AuthorityUpdateMetadataWithRegionalInformation,"AuthUpdMetaWithRegInfo"],[d.RegionDiscoveryDetectRegion,"RegDiscDetectReg"],[d.RegionDiscoveryGetRegionFromIMDS,"RegDiscGetRegFromIMDS"],[d.RegionDiscoveryGetCurrentVersion,"RegDiscGetCurrentVer"],[d.AcquireTokenByCodeAsync,"ATByCodeAsync"],[d.GetEndpointMetadataFromNetwork,"GetEndpointMetaFromNet"],[d.GetCloudDiscoveryMetadataFromNetworkMeasurement,"GetCDMetaFromNet"],[d.HandleRedirectPromiseMeasurement,"HandleRedirectPromise"],[d.HandleNativeRedirectPromiseMeasurement,"HandleNtvRedirectPromise"],[d.UpdateCloudDiscoveryMetadataMeasurement,"UpdateCDMeta"],[d.UsernamePasswordClientAcquireToken,"UserPassClientAT"],[d.NativeMessageHandlerHandshake,"NtvMsgHandlerHandshake"],[d.NativeGenerateAuthResult,"NtvGenAuthRes"],[d.RemoveHiddenIframe,"RemoveHiddenIframe"],[d.ClearTokensAndKeysWithClaims,"ClearTAndKeysWithClaims"],[d.CacheManagerGetRefreshToken,"CacheManagerGetRT"],[d.GeneratePkceCodes,"GenPkceCodes"],[d.GenerateCodeVerifier,"GenCodeVerifier"],[d.GenerateCodeChallengeFromVerifier,"GenCodeChallengeFromVerifier"],[d.Sha256Digest,"Sha256Digest"],[d.GetRandomValues,"GetRandomValues"]]),Dy={NotStarted:0,InProgress:1,Completed:2};var ft=(n,e,t,r,o)=>(...i)=>{t.trace(`Executing function ${e}`);let s=r?.startMeasurement(e,o);if(o){let a=e+"CallCount";r?.incrementFields({[a]:1},o)}try{let a=n(...i);return s?.end({success:!0}),t.trace(`Returning result from ${e}`),a}catch(a){t.trace(`Error occurred in ${e}`);try{t.trace(JSON.stringify(a))}catch{t.trace("Unable to print error message.")}throw s?.end({success:!1},a),a}},C=(n,e,t,r,o)=>(...i)=>{t.trace(`Executing function ${e}`);let s=r?.startMeasurement(e,o);if(o){let a=e+"CallCount";r?.incrementFields({[a]:1},o)}return r?.setPreQueueTime(e,o),n(...i).then(a=>(t.trace(`Returning result from ${e}`),s?.end({success:!0}),a)).catch(a=>{t.trace(`Error occurred in ${e}`);try{t.trace(JSON.stringify(a))}catch{t.trace("Unable to print error message.")}throw s?.end({success:!1},a),a})};var RS=(()=>{class n{constructor(t,r,o,i){this.networkInterface=t,this.logger=r,this.performanceClient=o,this.correlationId=i}detectRegion(t,r){return h(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.RegionDiscoveryDetectRegion,this.correlationId);let o=t;if(o)r.region_source=zo.ENVIRONMENT_VARIABLE;else{let i=n.IMDS_OPTIONS;try{let s=yield C(this.getRegionFromIMDS.bind(this),d.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(y.IMDS_VERSION,i);if(s.status===Lc.httpSuccess&&(o=s.body,r.region_source=zo.IMDS),s.status===Lc.httpBadRequest){let a=yield C(this.getCurrentVersion.bind(this),d.RegionDiscoveryGetCurrentVersion,this.logger,this.performanceClient,this.correlationId)(i);if(!a)return r.region_source=zo.FAILED_AUTO_DETECTION,null;let c=yield C(this.getRegionFromIMDS.bind(this),d.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(a,i);c.status===Lc.httpSuccess&&(o=c.body,r.region_source=zo.IMDS)}}catch{return r.region_source=zo.FAILED_AUTO_DETECTION,null}}return o||(r.region_source=zo.FAILED_AUTO_DETECTION),o||null})}getRegionFromIMDS(t,r){return h(this,null,function*(){return this.performanceClient?.addQueueMeasurement(d.RegionDiscoveryGetRegionFromIMDS,this.correlationId),this.networkInterface.sendGetRequestAsync(`${y.IMDS_ENDPOINT}?api-version=${t}&format=text`,r,y.IMDS_TIMEOUT)})}getCurrentVersion(t){return h(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.RegionDiscoveryGetCurrentVersion,this.correlationId);try{let r=yield this.networkInterface.sendGetRequestAsync(`${y.IMDS_ENDPOINT}?format=json`,t);return r.status===Lc.httpBadRequest&&r.body&&r.body["newest-versions"]&&r.body["newest-versions"].length>0?r.body["newest-versions"][0]:null}catch{return null}})}}return n.IMDS_OPTIONS={headers:{Metadata:"true"}},n})();var Wt=class n{constructor(e,t,r,o,i,s,a,c){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=t,this.cacheManager=r,this.authorityOptions=o,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=i,this.performanceClient=a,this.correlationId=s,this.managedIdentity=c||!1,this.regionDiscovery=new RS(t,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(y.CIAM_AUTH_URL))return dt.Ciam;let t=e.PathSegments;if(t.length)switch(t[0].toLowerCase()){case y.ADFS:return dt.Adfs;case y.DSTS:return dt.Dsts}return dt.Default}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new j(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw v(ut)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw v(ut)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw v(ut)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw v(ai);return this.replacePath(this.metadata.end_session_endpoint)}else throw v(ut)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw v(ut)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw v(ut)}canReplaceTenant(e){return e.PathSegments.length===1&&!n.reservedTenantDomains.has(e.PathSegments[0])&&this.getAuthorityType(e)===dt.Default&&this.protocolMode===Qe.AAD}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let t=e,o=new j(this.metadata.canonical_authority).getUrlComponents(),i=o.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((a,c)=>{let l=i[c];if(c===0&&this.canReplaceTenant(o)){let u=new j(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];l!==u&&(this.logger.verbose(`Replacing tenant domain name ${l} with id ${u}`),l=u)}a!==l&&(t=t.replace(`/${l}/`,`/${a}/`))}),this.replaceTenant(t)}get defaultOpenIdConfigurationEndpoint(){let e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===dt.Adfs||this.protocolMode!==Qe.AAD&&!this.isAliasOfKnownMicrosoftAuthority(e)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}resolveEndpointsAsync(){return h(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.AuthorityResolveEndpointsAsync,this.correlationId);let e=this.getCurrentMetadataEntity(),t=yield C(this.updateCloudDiscoveryMetadata.bind(this),d.AuthorityUpdateCloudDiscoveryMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,e.preferred_network);let r=yield C(this.updateEndpointMetadata.bind(this),d.AuthorityUpdateEndpointMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.updateCachedMetadata(e,t,{source:r}),this.performanceClient?.addFields({cloudDiscoverySource:t,authorityEndpointSource:r},this.correlationId)})}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return e||(e={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:sf(),jwks_uri:""}),e}updateCachedMetadata(e,t,r){t!==lt.CACHE&&r?.source!==lt.CACHE&&(e.expiresAt=sf(),e.canonical_authority=this.canonicalAuthority);let o=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache);this.cacheManager.setAuthorityMetadata(o,e),this.metadata=e}updateEndpointMetadata(e){return h(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.AuthorityUpdateEndpointMetadata,this.correlationId);let t=this.updateEndpointMetadataFromLocalSources(e);if(t){if(t.source===lt.HARDCODED_VALUES&&this.authorityOptions.azureRegionConfiguration?.azureRegion&&t.metadata){let o=yield C(this.updateMetadataWithRegionalInformation.bind(this),d.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(t.metadata);Is(e,o,!1),e.canonical_authority=this.canonicalAuthority}return t.source}let r=yield C(this.getEndpointMetadataFromNetwork.bind(this),d.AuthorityGetEndpointMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(r)return this.authorityOptions.azureRegionConfiguration?.azureRegion&&(r=yield C(this.updateMetadataWithRegionalInformation.bind(this),d.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(r)),Is(e,r,!0),lt.NETWORK;throw v(Yo,this.defaultOpenIdConfigurationEndpoint)})}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");let t=this.getEndpointMetadataFromConfig();if(t)return this.logger.verbose("Found endpoint metadata in authority configuration"),Is(e,t,!1),{source:lt.CONFIG};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{let o=this.getEndpointMetadataFromHardcodedValues();if(o)return Is(e,o,!1),{source:lt.HARDCODED_VALUES,metadata:o};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}let r=af(e);return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!r?(this.logger.verbose("Found endpoint metadata in the cache."),{source:lt.CACHE}):(r&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(e){return new j(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw J(vi)}return null}getEndpointMetadataFromNetwork(){return h(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.AuthorityGetEndpointMetadataFromNetwork,this.correlationId);let e={},t=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${t}`);try{let r=yield this.networkInterface.sendGetRequestAsync(t,e);return _S(r.body)?r.body:(this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(r){return this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${r}`),null}})}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in jm?jm[this.hostnameAndPort]:null}updateMetadataWithRegionalInformation(e){return h(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId);let t=this.authorityOptions.azureRegionConfiguration?.azureRegion;if(t){if(t!==y.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome=ef.CONFIGURED_NO_AUTO_DETECTION,this.regionDiscoveryMetadata.region_used=t,n.replaceWithRegionalInformation(e,t);let r=yield C(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),d.RegionDiscoveryDetectRegion,this.logger,this.performanceClient,this.correlationId)(this.authorityOptions.azureRegionConfiguration?.environmentRegion,this.regionDiscoveryMetadata);if(r)return this.regionDiscoveryMetadata.region_outcome=ef.AUTO_DETECTION_REQUESTED_SUCCESSFUL,this.regionDiscoveryMetadata.region_used=r,n.replaceWithRegionalInformation(e,r);this.regionDiscoveryMetadata.region_outcome=ef.AUTO_DETECTION_REQUESTED_FAILED}return e})}updateCloudDiscoveryMetadata(e){return h(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.AuthorityUpdateCloudDiscoveryMetadata,this.correlationId);let t=this.updateCloudDiscoveryMetadataFromLocalSources(e);if(t)return t;let r=yield C(this.getCloudDiscoveryMetadataFromNetwork.bind(this),d.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(r)return ol(e,r,!0),lt.NETWORK;throw J(Ci)})}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||y.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||y.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${e.canonical_authority||y.NOT_APPLICABLE}`);let t=this.getCloudDiscoveryMetadataFromConfig();if(t)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),ol(e,t,!1),lt.CONFIG;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{let o=wS(this.hostnameAndPort);if(o)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),ol(e,o,!1),lt.HARDCODED_VALUES;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}let r=af(e);return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!r?(this.logger.verbose("Found cloud discovery metadata in the cache."),lt.CACHE):(r&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===dt.Ciam)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),n.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");let e=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),t=hl(e.metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),t)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),t;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch{throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),J(qr)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),n.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}getCloudDiscoveryMetadataFromNetwork(){return h(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.correlationId);let e=`${y.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`,t={},r=null;try{let o=yield this.networkInterface.sendGetRequestAsync(e,t),i,s;if(DS(o.body))i=o.body,s=i.metadata,this.logger.verbosePii(`tenant_discovery_endpoint is: ${i.tenant_discovery_endpoint}`);else if(bS(o.body)){if(this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${o.status}`),i=o.body,i.error===y.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${i.error}`),this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${i.error_description}`),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),s=[]}else return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),r=hl(s,this.hostnameAndPort)}catch(o){if(o instanceof $)this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.
Error: ${o.errorCode}
Error Description: ${o.errorMessage}`);else{let i=o;this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.
Error: ${i.name}
Error Description: ${i.message}`)}return null}return r||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),r=n.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),r})}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(t=>t&&j.getDomainFromUrl(t).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(e,t){let r;if(t&&t.azureCloudInstance!==zr.None){let o=t.tenant?t.tenant:y.DEFAULT_COMMON_TENANT;r=`${t.azureCloudInstance}/${o}/`}return r||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.managedIdentity)return y.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw v(ut)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return $m.has(e)}static isPublicCloudAuthority(e){return y.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0}static buildRegionalAuthorityString(e,t,r){let o=new j(e);o.validateAsUri();let i=o.getUrlComponents(),s=`${t}.${i.HostNameAndPort}`;this.isPublicCloudAuthority(i.HostNameAndPort)&&(s=`${t}.${y.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);let a=j.constructAuthorityUriFromObject(A(m({},o.getUrlComponents()),{HostNameAndPort:s})).urlString;return r?`${a}?${r}`:a}static replaceWithRegionalInformation(e,t){let r=m({},e);return r.authorization_endpoint=n.buildRegionalAuthorityString(r.authorization_endpoint,t),r.token_endpoint=n.buildRegionalAuthorityString(r.token_endpoint,t),r.end_session_endpoint&&(r.end_session_endpoint=n.buildRegionalAuthorityString(r.end_session_endpoint,t)),r}static transformCIAMAuthority(e){let t=e,o=new j(e).getUrlComponents();if(o.PathSegments.length===0&&o.HostNameAndPort.endsWith(y.CIAM_AUTH_URL)){let i=o.HostNameAndPort.split(".")[0];t=`${t}${i}${y.AAD_TENANT_DOMAIN_SUFFIX}`}return t}};Wt.reservedTenantDomains=new Set(["{tenant}","{tenantid}",an.COMMON,an.CONSUMERS,an.ORGANIZATIONS]);function MS(n){let r=new j(n).getUrlComponents().PathSegments.slice(-1)[0]?.toLowerCase();switch(r){case an.COMMON:case an.ORGANIZATIONS:case an.CONSUMERS:return;default:return r}}function vf(n){return n.endsWith(y.FORWARD_SLASH)?n:`${n}${y.FORWARD_SLASH}`}function by(n){let e=n.cloudDiscoveryMetadata,t;if(e)try{t=JSON.parse(e)}catch{throw J(qr)}return{canonicalAuthority:n.authority?vf(n.authority):void 0,knownAuthorities:n.knownAuthorities,cloudDiscoveryMetadata:t}}function Ry(n,e,t,r,o,i,s){return h(this,null,function*(){s?.addQueueMeasurement(d.AuthorityFactoryCreateDiscoveredInstance,i);let a=Wt.transformCIAMAuthority(vf(n)),c=new Wt(a,e,t,r,o,i,s);try{return yield C(c.resolveEndpointsAsync.bind(c),d.AuthorityResolveEndpointsAsync,o,s,i)(),c}catch{throw v(ut)}})}var ht=class n extends ${constructor(e,t,r,o,i){super(e,t,r),this.name="ServerError",this.errorNo=o,this.status=i,Object.setPrototypeOf(this,n.prototype)}};var Nn=class n{static generateThrottlingStorageKey(e){return`${Xn.THROTTLING_PREFIX}.${JSON.stringify(e)}`}static preProcess(e,t,r){let o=n.generateThrottlingStorageKey(t),i=e.getThrottlingCache(o);if(i){if(i.throttleTime<Date.now()){e.removeItem(o,r);return}throw new ht(i.errorCodes?.join(" ")||y.EMPTY_STRING,i.errorMessage,i.subError)}}static postProcess(e,t,r,o){if(n.checkResponseStatus(r)||n.checkResponseForRetryAfter(r)){let i={throttleTime:n.calculateThrottleTime(parseInt(r.headers[_e.RETRY_AFTER])),error:r.body.error,errorCodes:r.body.error_codes,errorMessage:r.body.error_description,subError:r.body.suberror};e.setThrottlingCache(n.generateThrottlingStorageKey(t),i,o)}}static checkResponseStatus(e){return e.status===429||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return e.headers?e.headers.hasOwnProperty(_e.RETRY_AFTER)&&(e.status<200||e.status>=300):!1}static calculateThrottleTime(e){let t=e<=0?0:e,r=Date.now()/1e3;return Math.floor(Math.min(r+(t||Xn.DEFAULT_THROTTLE_TIME_SECONDS),r+Xn.DEFAULT_MAX_THROTTLE_TIME_SECONDS)*1e3)}static removeThrottle(e,t,r,o){let i={clientId:t,authority:r.authority,scopes:r.scopes,homeAccountIdentifier:o,claims:r.claims,authenticationScheme:r.authenticationScheme,resourceRequestMethod:r.resourceRequestMethod,resourceRequestUri:r.resourceRequestUri,shrClaims:r.shrClaims,sshKid:r.sshKid},s=this.generateThrottlingStorageKey(i);e.removeItem(s,r.correlationId)}};var As=class n extends ${constructor(e,t,r){super(e.errorCode,e.errorMessage,e.subError),Object.setPrototypeOf(this,n.prototype),this.name="NetworkError",this.error=e,this.httpStatus=t,this.responseHeaders=r}};function Ef(n,e,t){return new As(n,e,t)}var Yr=class{constructor(e,t){this.config=AS(e),this.logger=new It(this.config.loggerOptions,rf,Cs),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=t}createTokenRequestHeaders(e){let t={};if(t[_e.CONTENT_TYPE]=y.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case Ue.HOME_ACCOUNT_ID:try{let r=ar(e.credential);t[_e.CCS_HEADER]=`Oid:${r.uid}@${r.utid}`}catch(r){this.logger.verbose("Could not parse home account ID for CCS Header: "+r)}break;case Ue.UPN:t[_e.CCS_HEADER]=`UPN: ${e.credential}`;break}return t}executePostToTokenEndpoint(e,t,r,o,i,s){return h(this,null,function*(){s&&this.performanceClient?.addQueueMeasurement(s,i);let a=yield this.sendPostRequest(o,e,{body:t,headers:r},i);return this.config.serverTelemetryManager&&a.status<500&&a.status!==429&&this.config.serverTelemetryManager.clearTelemetryCache(),a})}sendPostRequest(e,t,r,o){return h(this,null,function*(){Nn.preProcess(this.cacheManager,e,o);let i;try{i=yield C(this.networkClient.sendPostRequestAsync.bind(this.networkClient),d.NetworkClientSendPostRequestAsync,this.logger,this.performanceClient,o)(t,r);let s=i.headers||{};this.performanceClient?.addFields({refreshTokenSize:i.body.refresh_token?.length||0,httpVerToken:s[_e.X_MS_HTTP_VERSION]||"",requestId:s[_e.X_MS_REQUEST_ID]||""},o)}catch(s){if(s instanceof As){let a=s.responseHeaders;throw a&&this.performanceClient?.addFields({httpVerToken:a[_e.X_MS_HTTP_VERSION]||"",requestId:a[_e.X_MS_REQUEST_ID]||"",contentTypeHeader:a[_e.CONTENT_TYPE]||void 0,contentLengthHeader:a[_e.CONTENT_LENGTH]||void 0,httpStatus:s.httpStatus},o),s.error}throw s instanceof $?s:v(Wo)}return Nn.postProcess(this.cacheManager,e,i,o),i})}updateAuthority(e,t){return h(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.UpdateTokenEndpointAuthority,t);let r=`https://${e}/${this.authority.tenant}/`,o=yield Ry(r,this.networkClient,this.cacheManager,this.authority.options,this.logger,t,this.performanceClient);this.authority=o})}createTokenQueryParameters(e){let t=new Mn(e.correlationId,this.performanceClient);return e.embeddedClientId&&t.addBrokerParameters({brokerClientId:this.config.authOptions.clientId,brokerRedirectUri:this.config.authOptions.redirectUri}),e.tokenQueryParameters&&t.addExtraQueryParameters(e.tokenQueryParameters),t.addCorrelationId(e.correlationId),t.createQueryString()}};var dr={};Ut(dr,{badToken:()=>Jr,consentRequired:()=>Ny,interactionRequired:()=>My,loginRequired:()=>ky,nativeAccountUnavailable:()=>vl,noTokensFound:()=>Qr,refreshTokenExpired:()=>Cl});var Qr="no_tokens_found",vl="native_account_unavailable",Cl="refresh_token_expired",My="interaction_required",Ny="consent_required",ky="login_required",Jr="bad_token";var NS=[My,Ny,ky,Jr],Hk=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],If={[Qr]:"No refresh token found in the cache. Please sign-in.",[vl]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[Cl]:"Refresh token has expired.",[Jr]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve."},kS={noTokensFoundError:{code:Qr,desc:If[Qr]},native_account_unavailable:{code:vl,desc:If[vl]},bad_token:{code:Jr,desc:If[Jr]}},Je=class n extends ${constructor(e,t,r,o,i,s,a,c){super(e,t,r),Object.setPrototypeOf(this,n.prototype),this.timestamp=o||y.EMPTY_STRING,this.traceId=i||y.EMPTY_STRING,this.correlationId=s||y.EMPTY_STRING,this.claims=a||y.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=c}};function Oy(n,e,t){let r=!!n&&NS.indexOf(n)>-1,o=!!t&&Hk.indexOf(t)>-1,i=!!e&&NS.some(s=>e.indexOf(s)>-1);return r||i||o}function _s(n){return new Je(n,If[n])}var He=class n{static setRequestState(e,t,r){let o=n.generateLibraryState(e,r);return t?`${o}${y.RESOURCE_DELIM}${t}`:o}static generateLibraryState(e,t){if(!e)throw v(Vr);let r={id:e.createNewGuid()};t&&(r.meta=t);let o=JSON.stringify(r);return e.base64Encode(o)}static parseRequestState(e,t){if(!e)throw v(Vr);if(!t)throw v(un);try{let r=t.split(y.RESOURCE_DELIM),o=r[0],i=r.length>1?r.slice(1).join(y.RESOURCE_DELIM):y.EMPTY_STRING,s=e.base64Decode(o),a=JSON.parse(s);return{userRequestState:i||y.EMPTY_STRING,libraryState:a}}catch{throw v(un)}}};var Bk={SW:"sw",UHW:"uhw"},Pt=class{constructor(e,t){this.cryptoUtils=e,this.performanceClient=t}generateCnf(e,t){return h(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.PopTokenGenerateCnf,e.correlationId);let r=yield C(this.generateKid.bind(this),d.PopTokenGenerateCnf,t,this.performanceClient,e.correlationId)(e),o=this.cryptoUtils.base64UrlEncode(JSON.stringify(r));return{kid:r.kid,reqCnfString:o}})}generateKid(e){return h(this,null,function*(){return this.performanceClient?.addQueueMeasurement(d.PopTokenGenerateKid,e.correlationId),{kid:yield this.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:Bk.SW}})}signPopToken(e,t,r){return h(this,null,function*(){return this.signPayload(e,t,r)})}signPayload(e,t,r,o){return h(this,null,function*(){let{resourceRequestMethod:i,resourceRequestUri:s,shrClaims:a,shrNonce:c,shrOptions:l}=r,f=(s?new j(s):void 0)?.getUrlComponents();return this.cryptoUtils.signJwt(m({at:e,ts:Ot(),m:i?.toUpperCase(),u:f?.HostNameAndPort,nonce:c||this.cryptoUtils.createNewGuid(),p:f?.AbsolutePath,q:f?.QueryString?[[],f.QueryString]:void 0,client_claims:a||void 0},o),t,l,r.correlationId)})}};var Tf=class{constructor(e,t){this.cache=e,this.hasChanged=t}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}};function jk(n){let e="code=",t=n.error_uri?.lastIndexOf(e);return t&&t>=0?n.error_uri?.substring(t+e.length):void 0}var kn=class n{constructor(e,t,r,o,i,s,a){this.clientId=e,this.cacheStorage=t,this.cryptoObj=r,this.logger=o,this.serializableCache=i,this.persistencePlugin=s,this.performanceClient=a}validateServerAuthorizationCodeResponse(e,t){if(!e.state||!t)throw e.state?v(Br,"Cached State"):v(Br,"Server State");let r,o;try{r=decodeURIComponent(e.state)}catch{throw v(un,e.state)}try{o=decodeURIComponent(t)}catch{throw v(un,e.state)}if(r!==o)throw v(Jo);if(e.error||e.error_description||e.suberror){let i=jk(e);throw Oy(e.error,e.error_description,e.suberror)?new Je(e.error||"",e.error_description,e.suberror,e.timestamp||"",e.trace_id||"",e.correlation_id||"",e.claims||"",i):new ht(e.error||"",e.error_description,e.suberror,i)}}validateTokenResponse(e,t){if(e.error||e.error_description||e.suberror){let r=`Error(s): ${e.error_codes||y.NOT_AVAILABLE} - Timestamp: ${e.timestamp||y.NOT_AVAILABLE} - Description: ${e.error_description||y.NOT_AVAILABLE} - Correlation ID: ${e.correlation_id||y.NOT_AVAILABLE} - Trace ID: ${e.trace_id||y.NOT_AVAILABLE}`,o=e.error_codes?.length?e.error_codes[0]:void 0,i=new ht(e.error,r,e.suberror,o,e.status);if(t&&e.status&&e.status>=gs.SERVER_ERROR_RANGE_START&&e.status<=gs.SERVER_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.
${i}`);return}else if(t&&e.status&&e.status>=gs.CLIENT_ERROR_RANGE_START&&e.status<=gs.CLIENT_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.
${i}`);return}throw Oy(e.error,e.error_description,e.suberror)?new Je(e.error,e.error_description,e.suberror,e.timestamp||y.EMPTY_STRING,e.trace_id||y.EMPTY_STRING,e.correlation_id||y.EMPTY_STRING,e.claims||y.EMPTY_STRING,o):i}}handleServerTokenResponse(e,t,r,o,i,s,a,c,l){return h(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.HandleServerTokenResponse,e.correlation_id);let u;if(e.id_token){if(u=rr(e.id_token||y.EMPTY_STRING,this.cryptoObj.base64Decode),i&&i.nonce&&u.nonce!==i.nonce)throw v(Zo);if(o.maxAge||o.maxAge===0){let I=u.auth_time;if(!I)throw v(er);tl(I,o.maxAge)}}this.homeAccountIdentifier=ge.generateHomeAccountId(e.client_info||y.EMPTY_STRING,t.authorityType,this.logger,this.cryptoObj,u);let f;i&&i.state&&(f=He.parseRequestState(this.cryptoObj,i.state)),e.key_id=e.key_id||o.sshKid||void 0;let g=this.generateCacheRecord(e,t,r,o,u,s,i),p;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),p=new Tf(this.serializableCache,!0),yield this.persistencePlugin.beforeCacheAccess(p)),a&&!c&&g.account){let I=g.account.generateAccountKey();if(!this.cacheStorage.getAccount(I,o.correlationId,this.logger))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),yield n.generateAuthenticationResult(this.cryptoObj,t,g,!1,o,u,f,void 0,l)}yield this.cacheStorage.saveCacheRecord(g,o.correlationId,o.storeInCache)}finally{this.persistencePlugin&&this.serializableCache&&p&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),yield this.persistencePlugin.afterCacheAccess(p))}return n.generateAuthenticationResult(this.cryptoObj,t,g,!1,o,u,f,e,l)})}generateCacheRecord(e,t,r,o,i,s,a){let c=t.getPreferredCache();if(!c)throw v(nr);let l=cf(i),u,f;e.id_token&&i&&(u=Fm(this.homeAccountIdentifier,c,e.id_token,this.clientId,l||""),f=Ds(this.cacheStorage,t,this.homeAccountIdentifier,this.cryptoObj.base64Decode,o.correlationId,i,e.client_info,c,l,a,void 0,this.logger));let g=null;if(e.access_token){let S=e.scope?ye.fromString(e.scope):new ye(o.scopes||[]),w=(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,N=(typeof e.ext_expires_in=="string"?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,ue=(typeof e.refresh_in=="string"?parseInt(e.refresh_in,10):e.refresh_in)||void 0,Be=r+w,Re=Be+N,Ft=ue&&ue>0?r+ue:void 0;g=Um(this.homeAccountIdentifier,c,e.access_token,this.clientId,l||t.tenant||"",S.printScopes(),Be,Re,this.cryptoObj.base64Decode,Ft,e.token_type,s,e.key_id,o.claims,o.requestedClaimsHash)}let p=null;if(e.refresh_token){let S;if(e.refresh_token_expires_in){let w=typeof e.refresh_token_expires_in=="string"?parseInt(e.refresh_token_expires_in,10):e.refresh_token_expires_in;S=r+w}p=Hm(this.homeAccountIdentifier,c,e.refresh_token,this.clientId,e.foci,s,S)}let I=null;return e.foci&&(I={clientId:this.clientId,environment:c,familyId:e.foci}),{account:f,idToken:u,accessToken:g,refreshToken:p,appMetadata:I}}static generateAuthenticationResult(e,t,r,o,i,s,a,c,l){return h(this,null,function*(){let u=y.EMPTY_STRING,f=[],g=null,p,I,S=y.EMPTY_STRING;if(r.accessToken){if(r.accessToken.tokenType===Q.POP&&!i.popKid){let Be=new Pt(e),{secret:Re,keyId:Ft}=r.accessToken;if(!Ft)throw v(ci);u=yield Be.signPopToken(Re,Ft,i)}else u=r.accessToken.secret;f=ye.fromString(r.accessToken.target).asArray(),g=new Date(Number(r.accessToken.expiresOn)*1e3),p=new Date(Number(r.accessToken.extendedExpiresOn)*1e3),r.accessToken.refreshOn&&(I=new Date(Number(r.accessToken.refreshOn)*1e3))}r.appMetadata&&(S=r.appMetadata.familyId===Fr?Fr:"");let w=s?.oid||s?.sub||"",N=s?.tid||"";c?.spa_accountid&&r.account&&(r.account.nativeAccountId=c?.spa_accountid);let ue=r.account?Ei(r.account.getAccountInfo(),void 0,s,r.idToken?.secret):null;return{authority:t.canonicalAuthority,uniqueId:w,tenantId:N,scopes:f,account:ue,idToken:r?.idToken?.secret||"",idTokenClaims:s||{},accessToken:u,fromCache:o,expiresOn:g,extExpiresOn:p,refreshOn:I,correlationId:i.correlationId,requestId:l||y.EMPTY_STRING,familyId:S,tokenType:r.accessToken?.tokenType||y.EMPTY_STRING,state:a?a.userRequestState:y.EMPTY_STRING,cloudGraphHostName:r.account?.cloudGraphHostName||y.EMPTY_STRING,msGraphHost:r.account?.msGraphHost||y.EMPTY_STRING,code:c?.spa_code,fromNativeBroker:!1}})}};function Ds(n,e,t,r,o,i,s,a,c,l,u,f){f?.verbose("setCachedAccount called");let p=n.getAccountKeys().find(ue=>ue.startsWith(t)),I=null;p&&(I=n.getAccount(p,o,f));let S=I||ge.createAccount({homeAccountId:t,idTokenClaims:i,clientInfo:s,environment:a,cloudGraphHostName:l?.cloud_graph_host_name,msGraphHost:l?.msgraph_host,nativeAccountId:u},e,r),w=S.tenantProfiles||[],N=c||S.realm;if(N&&!w.find(ue=>ue.tenantId===N)){let ue=ws(t,S.localAccountId,N,i);w.push(ue)}return S.tenantProfiles=w,S}function Sf(n,e,t){return h(this,null,function*(){return typeof n=="string"?n:n({clientId:e,tokenEndpoint:t})})}var Ii=class extends Yr{constructor(e,t){super(e,t),this.includeRedirectUri=!0,this.oidcDefaultScopes=this.config.authOptions.authority.options.OIDCOptions?.defaultScopes}getAuthCodeUrl(e){return h(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.GetAuthCodeUrl,e.correlationId);let t=yield C(this.createAuthCodeUrlQueryString.bind(this),d.AuthClientCreateQueryString,this.logger,this.performanceClient,e.correlationId)(e);return j.appendQueryString(this.authority.authorizationEndpoint,t)})}acquireToken(e,t){return h(this,null,function*(){if(this.performanceClient?.addQueueMeasurement(d.AuthClientAcquireToken,e.correlationId),!e.code)throw v(ti);let r=Ot(),o=yield C(this.executeTokenRequest.bind(this),d.AuthClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(this.authority,e),i=o.headers?.[_e.X_MS_REQUEST_ID],s=new kn(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return s.validateTokenResponse(o.body),C(s.handleServerTokenResponse.bind(s),d.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(o.body,this.authority,r,e,t,void 0,void 0,void 0,i)})}handleFragmentResponse(e,t){if(new kn(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,null,null).validateServerAuthorizationCodeResponse(e,t),!e.code)throw v(si);return e}getLogoutUri(e){if(!e)throw J(mi);let t=this.createLogoutUrlQueryString(e);return j.appendQueryString(this.authority.endSessionEndpoint,t)}executeTokenRequest(e,t){return h(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.AuthClientExecuteTokenRequest,t.correlationId);let r=this.createTokenQueryParameters(t),o=j.appendQueryString(e.tokenEndpoint,r),i=yield C(this.createTokenRequestBody.bind(this),d.AuthClientCreateTokenRequestBody,this.logger,this.performanceClient,t.correlationId)(t),s;if(t.clientInfo)try{let l=Ts(t.clientInfo,this.cryptoUtils.base64Decode);s={credential:`${l.uid}${Te.CLIENT_INFO_SEPARATOR}${l.utid}`,type:Ue.HOME_ACCOUNT_ID}}catch(l){this.logger.verbose("Could not parse client info for CCS Header: "+l)}let a=this.createTokenRequestHeaders(s||t.ccsCredential),c={clientId:t.tokenBodyParameters?.clientId||this.config.authOptions.clientId,authority:e.canonicalAuthority,scopes:t.scopes,claims:t.claims,authenticationScheme:t.authenticationScheme,resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,sshKid:t.sshKid};return C(this.executePostToTokenEndpoint.bind(this),d.AuthorizationCodeClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,t.correlationId)(o,i,a,c,t.correlationId,d.AuthorizationCodeClientExecutePostToTokenEndpoint)})}createTokenRequestBody(e){return h(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.AuthClientCreateTokenRequestBody,e.correlationId);let t=new Mn(e.correlationId,this.performanceClient);if(t.addClientId(e.embeddedClientId||e.tokenBodyParameters?.[lr]||this.config.authOptions.clientId),this.includeRedirectUri?t.addRedirectUri(e.redirectUri):Rn.validateRedirectUri(e.redirectUri),t.addScopes(e.scopes,!0,this.oidcDefaultScopes),t.addAuthorizationCode(e.code),t.addLibraryInfo(this.config.libraryInfo),t.addApplicationTelemetry(this.config.telemetry.application),t.addThrottling(),this.serverTelemetryManager&&!yl(this.config)&&t.addServerTelemetry(this.serverTelemetryManager),e.codeVerifier&&t.addCodeVerifier(e.codeVerifier),this.config.clientCredentials.clientSecret&&t.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){let o=this.config.clientCredentials.clientAssertion;t.addClientAssertion(yield Sf(o.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),t.addClientAssertionType(o.assertionType)}if(t.addGrantType(Pc.AUTHORIZATION_CODE_GRANT),t.addClientInfo(),e.authenticationScheme===Q.POP){let o=new Pt(this.cryptoUtils,this.performanceClient),i;e.popKid?i=this.cryptoUtils.encodeKid(e.popKid):i=(yield C(o.generateCnf.bind(o),d.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,t.addPopToken(i)}else if(e.authenticationScheme===Q.SSH)if(e.sshJwk)t.addSshJwk(e.sshJwk);else throw J(sr);(!Ee.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&t.addClaims(e.claims,this.config.authOptions.clientCapabilities);let r;if(e.clientInfo)try{let o=Ts(e.clientInfo,this.cryptoUtils.base64Decode);r={credential:`${o.uid}${Te.CLIENT_INFO_SEPARATOR}${o.utid}`,type:Ue.HOME_ACCOUNT_ID}}catch(o){this.logger.verbose("Could not parse client info for CCS Header: "+o)}else r=e.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&r)switch(r.type){case Ue.HOME_ACCOUNT_ID:try{let o=ar(r.credential);t.addCcsOid(o)}catch(o){this.logger.verbose("Could not parse home account ID for CCS Header: "+o)}break;case Ue.UPN:t.addCcsUpn(r.credential);break}return e.embeddedClientId&&t.addBrokerParameters({brokerClientId:this.config.authOptions.clientId,brokerRedirectUri:this.config.authOptions.redirectUri}),e.tokenBodyParameters&&t.addExtraQueryParameters(e.tokenBodyParameters),e.enableSpaAuthorizationCode&&(!e.tokenBodyParameters||!e.tokenBodyParameters[mf])&&t.addExtraQueryParameters({[mf]:"1"}),t.createQueryString()})}createAuthCodeUrlQueryString(e){return h(this,null,function*(){let t=e.correlationId||this.config.cryptoInterface.createNewGuid();this.performanceClient?.addQueueMeasurement(d.AuthClientCreateQueryString,t);let r=new Mn(t,this.performanceClient);r.addClientId(e.embeddedClientId||e.extraQueryParameters?.[lr]||this.config.authOptions.clientId);let o=[...e.scopes||[],...e.extraScopesToConsent||[]];if(r.addScopes(o,!0,this.oidcDefaultScopes),r.addRedirectUri(e.redirectUri),r.addCorrelationId(t),r.addResponseMode(e.responseMode),r.addResponseTypeCode(),r.addLibraryInfo(this.config.libraryInfo),yl(this.config)||r.addApplicationTelemetry(this.config.telemetry.application),r.addClientInfo(),e.codeChallenge&&e.codeChallengeMethod&&r.addCodeChallengeParams(e.codeChallenge,e.codeChallengeMethod),e.prompt&&r.addPrompt(e.prompt),e.domainHint&&r.addDomainHint(e.domainHint),e.prompt!==me.SELECT_ACCOUNT)if(e.sid&&e.prompt===me.NONE)this.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),r.addSid(e.sid);else if(e.account){let i=this.extractAccountSid(e.account),s=this.extractLoginHint(e.account);if(s&&e.domainHint&&(this.logger.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),s=null),s){this.logger.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),r.addLoginHint(s);try{let a=ar(e.account.homeAccountId);r.addCcsOid(a)}catch{this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(i&&e.prompt===me.NONE){this.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),r.addSid(i);try{let a=ar(e.account.homeAccountId);r.addCcsOid(a)}catch{this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e.loginHint)this.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),r.addLoginHint(e.loginHint),r.addCcsUpn(e.loginHint);else if(e.account.username){this.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),r.addLoginHint(e.account.username);try{let a=ar(e.account.homeAccountId);r.addCcsOid(a)}catch{this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else e.loginHint&&(this.logger.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),r.addLoginHint(e.loginHint),r.addCcsUpn(e.loginHint));else this.logger.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");if(e.nonce&&r.addNonce(e.nonce),e.state&&r.addState(e.state),(e.claims||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&r.addClaims(e.claims,this.config.authOptions.clientCapabilities),e.embeddedClientId&&r.addBrokerParameters({brokerClientId:this.config.authOptions.clientId,brokerRedirectUri:this.config.authOptions.redirectUri}),this.addExtraQueryParams(e,r),e.nativeBroker&&(r.addNativeBroker(),e.authenticationScheme===Q.POP)){let i=new Pt(this.cryptoUtils),s;e.popKid?s=this.cryptoUtils.encodeKid(e.popKid):s=(yield C(i.generateCnf.bind(i),d.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,r.addPopToken(s)}return r.createQueryString()})}createLogoutUrlQueryString(e){let t=new Mn(e.correlationId,this.performanceClient);return e.postLogoutRedirectUri&&t.addPostLogoutRedirectUri(e.postLogoutRedirectUri),e.correlationId&&t.addCorrelationId(e.correlationId),e.idTokenHint&&t.addIdTokenHint(e.idTokenHint),e.state&&t.addState(e.state),e.logoutHint&&t.addLogoutHint(e.logoutHint),this.addExtraQueryParams(e,t),t.createQueryString()}addExtraQueryParams(e,t){!(e.extraQueryParameters&&e.extraQueryParameters.hasOwnProperty("instance_aware"))&&this.config.authOptions.instanceAware&&(e.extraQueryParameters=e.extraQueryParameters||{},e.extraQueryParameters.instance_aware="true"),e.extraQueryParameters&&t.addExtraQueryParameters(e.extraQueryParameters)}extractAccountSid(e){return e.idTokenClaims?.sid||null}extractLoginHint(e){return e.idTokenClaims?.login_hint||null}};var Vk=300,Zr=class extends Yr{constructor(e,t){super(e,t)}acquireToken(e){return h(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.RefreshTokenClientAcquireToken,e.correlationId);let t=Ot(),r=yield C(this.executeTokenRequest.bind(this),d.RefreshTokenClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(e,this.authority),o=r.headers?.[_e.X_MS_REQUEST_ID],i=new kn(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return i.validateTokenResponse(r.body),C(i.handleServerTokenResponse.bind(i),d.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(r.body,this.authority,t,e,void 0,void 0,!0,e.forceCache,o)})}acquireTokenByRefreshToken(e){return h(this,null,function*(){if(!e)throw J(gi);if(this.performanceClient?.addQueueMeasurement(d.RefreshTokenClientAcquireTokenByRefreshToken,e.correlationId),!e.account)throw v(tr);if(this.cacheManager.isAppMetadataFOCI(e.account.environment))try{return yield C(this.acquireTokenWithCachedRefreshToken.bind(this),d.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!0)}catch(r){let o=r instanceof Je&&r.errorCode===Qr,i=r instanceof ht&&r.errorCode===Zd.INVALID_GRANT_ERROR&&r.subError===Zd.CLIENT_MISMATCH_ERROR;if(o||i)return C(this.acquireTokenWithCachedRefreshToken.bind(this),d.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1);throw r}return C(this.acquireTokenWithCachedRefreshToken.bind(this),d.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1)})}acquireTokenWithCachedRefreshToken(e,t){return h(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId);let r=ft(this.cacheManager.getRefreshToken.bind(this.cacheManager),d.CacheManagerGetRefreshToken,this.logger,this.performanceClient,e.correlationId)(e.account,t,e.correlationId,void 0,this.performanceClient);if(!r)throw _s(Qr);if(r.expiresOn&&Es(r.expiresOn,e.refreshTokenExpirationOffsetSeconds||Vk))throw _s(Cl);let o=A(m({},e),{refreshToken:r.secret,authenticationScheme:e.authenticationScheme||Q.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:Ue.HOME_ACCOUNT_ID}});try{return yield C(this.acquireToken.bind(this),d.RefreshTokenClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(o)}catch(i){if(i instanceof Je&&i.subError===Jr){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");let s=rl(r);this.cacheManager.removeRefreshToken(s,e.correlationId)}throw i}})}executeTokenRequest(e,t){return h(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.RefreshTokenClientExecuteTokenRequest,e.correlationId);let r=this.createTokenQueryParameters(e),o=j.appendQueryString(t.tokenEndpoint,r),i=yield C(this.createTokenRequestBody.bind(this),d.RefreshTokenClientCreateTokenRequestBody,this.logger,this.performanceClient,e.correlationId)(e),s=this.createTokenRequestHeaders(e.ccsCredential),a={clientId:e.tokenBodyParameters?.clientId||this.config.authOptions.clientId,authority:t.canonicalAuthority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid};return C(this.executePostToTokenEndpoint.bind(this),d.RefreshTokenClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,e.correlationId)(o,i,s,a,e.correlationId,d.RefreshTokenClientExecutePostToTokenEndpoint)})}createTokenRequestBody(e){return h(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.RefreshTokenClientCreateTokenRequestBody,e.correlationId);let t=e.correlationId,r=new Mn(t,this.performanceClient);if(r.addClientId(e.embeddedClientId||e.tokenBodyParameters?.[lr]||this.config.authOptions.clientId),e.redirectUri&&r.addRedirectUri(e.redirectUri),r.addScopes(e.scopes,!0,this.config.authOptions.authority.options.OIDCOptions?.defaultScopes),r.addGrantType(Pc.REFRESH_TOKEN_GRANT),r.addClientInfo(),r.addLibraryInfo(this.config.libraryInfo),r.addApplicationTelemetry(this.config.telemetry.application),r.addThrottling(),this.serverTelemetryManager&&!yl(this.config)&&r.addServerTelemetry(this.serverTelemetryManager),r.addRefreshToken(e.refreshToken),this.config.clientCredentials.clientSecret&&r.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){let o=this.config.clientCredentials.clientAssertion;r.addClientAssertion(yield Sf(o.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),r.addClientAssertionType(o.assertionType)}if(e.authenticationScheme===Q.POP){let o=new Pt(this.cryptoUtils,this.performanceClient),i;e.popKid?i=this.cryptoUtils.encodeKid(e.popKid):i=(yield C(o.generateCnf.bind(o),d.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,r.addPopToken(i)}else if(e.authenticationScheme===Q.SSH)if(e.sshJwk)r.addSshJwk(e.sshJwk);else throw J(sr);if((!Ee.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&r.addClaims(e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case Ue.HOME_ACCOUNT_ID:try{let o=ar(e.ccsCredential.credential);r.addCcsOid(o)}catch(o){this.logger.verbose("Could not parse home account ID for CCS Header: "+o)}break;case Ue.UPN:r.addCcsUpn(e.ccsCredential.credential);break}return e.embeddedClientId&&r.addBrokerParameters({brokerClientId:this.config.authOptions.clientId,brokerRedirectUri:this.config.authOptions.redirectUri}),e.tokenBodyParameters&&r.addExtraQueryParameters(e.tokenBodyParameters),r.createQueryString()})}};var El=class extends Yr{constructor(e,t){super(e,t)}acquireToken(e){return h(this,null,function*(){try{let[t,r]=yield this.acquireCachedToken(A(m({},e),{scopes:e.scopes?.length?e.scopes:[...kt]}));return r===ln.PROACTIVELY_REFRESHED&&(this.logger.info("SilentFlowClient:acquireCachedToken - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed."),new Zr(this.config,this.performanceClient).acquireTokenByRefreshToken(e).catch(()=>{})),t}catch(t){if(t instanceof li&&t.errorCode===Dn)return new Zr(this.config,this.performanceClient).acquireTokenByRefreshToken(e);throw t}})}acquireCachedToken(e){return h(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.SilentFlowClientAcquireCachedToken,e.correlationId);let t=ln.NOT_APPLICABLE;if(e.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!Ee.isEmptyObj(e.claims))throw this.setCacheOutcome(ln.FORCE_REFRESH_OR_CLAIMS,e.correlationId),v(Dn);if(!e.account)throw v(tr);let r=e.account.tenantId||MS(e.authority),o=this.cacheManager.getTokenKeys(),i=this.cacheManager.getAccessToken(e.account,e,o,r,this.performanceClient);if(i){if(Lm(i.cachedAt)||Es(i.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(ln.CACHED_ACCESS_TOKEN_EXPIRED,e.correlationId),v(Dn);i.refreshOn&&Es(i.refreshOn,0)&&(t=ln.PROACTIVELY_REFRESHED)}else throw this.setCacheOutcome(ln.NO_CACHED_ACCESS_TOKEN,e.correlationId),v(Dn);let s=e.authority||this.authority.getPreferredCache(),a={account:this.cacheManager.readAccountFromCache(e.account,e.correlationId),accessToken:i,idToken:this.cacheManager.getIdToken(e.account,e.correlationId,o,r,this.performanceClient),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(s)};return this.setCacheOutcome(t,e.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[yield C(this.generateResultFromCacheRecord.bind(this),d.SilentFlowClientGenerateResultFromCacheRecord,this.logger,this.performanceClient,e.correlationId)(a,e),t]})}setCacheOutcome(e,t){this.serverTelemetryManager?.setCacheOutcome(e),this.performanceClient?.addFields({cacheOutcome:e},t),e!==ln.NOT_APPLICABLE&&this.logger.info(`Token refresh is required due to cache outcome: ${e}`)}generateResultFromCacheRecord(e,t){return h(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.SilentFlowClientGenerateResultFromCacheRecord,t.correlationId);let r;if(e.idToken&&(r=rr(e.idToken.secret,this.config.cryptoInterface.base64Decode)),t.maxAge||t.maxAge===0){let o=r?.auth_time;if(!o)throw v(er);tl(o,t.maxAge)}return kn.generateAuthenticationResult(this.cryptoUtils,this.authority,e,!0,t,r)})}};var Py={sendGetRequestAsync:()=>Promise.reject(v(H)),sendPostRequestAsync:()=>Promise.reject(v(H))};var OS=",",PS="|";function $k(n){let{skus:e,libraryName:t,libraryVersion:r,extensionName:o,extensionVersion:i}=n,s=new Map([[0,[t,r]],[2,[o,i]]]),a=[];if(e?.length){if(a=e.split(OS),a.length<4)return e}else a=Array.from({length:4},()=>PS);return s.forEach((c,l)=>{c.length===2&&c[0]?.length&&c[1]?.length&&zk({skuArr:a,index:l,skuName:c[0],skuVersion:c[1]})}),a.join(OS)}function zk(n){let{skuArr:e,index:t,skuName:r,skuVersion:o}=n;t>=e.length||(e[t]=[r,o].join(PS))}var Ti=class n{constructor(e,t){this.cacheOutcome=ln.NOT_APPLICABLE,this.cacheManager=t,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||y.EMPTY_STRING,this.wrapperVer=e.wrapperVer||y.EMPTY_STRING,this.telemetryCacheKey=Le.CACHE_KEY+Te.CACHE_KEY_SEPARATOR+e.clientId}generateCurrentRequestHeaderValue(){let e=`${this.apiId}${Le.VALUE_SEPARATOR}${this.cacheOutcome}`,t=[this.wrapperSKU,this.wrapperVer],r=this.getNativeBrokerErrorCode();r?.length&&t.push(`broker_error=${r}`);let o=t.join(Le.VALUE_SEPARATOR),i=this.getRegionDiscoveryFields(),s=[e,i].join(Le.VALUE_SEPARATOR);return[Le.SCHEMA_VERSION,s,o].join(Le.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){let e=this.getLastRequests(),t=n.maxErrorsToSend(e),r=e.failedRequests.slice(0,2*t).join(Le.VALUE_SEPARATOR),o=e.errors.slice(0,t).join(Le.VALUE_SEPARATOR),i=e.errors.length,s=t<i?Le.OVERFLOW_TRUE:Le.OVERFLOW_FALSE,a=[i,s].join(Le.VALUE_SEPARATOR);return[Le.SCHEMA_VERSION,e.cacheHits,r,o,a].join(Le.CATEGORY_SEPARATOR)}cacheFailedRequest(e){let t=this.getLastRequests();t.errors.length>=Le.MAX_CACHED_ERRORS&&(t.failedRequests.shift(),t.failedRequests.shift(),t.errors.shift()),t.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?e instanceof $?e.subError?t.errors.push(e.subError):e.errorCode?t.errors.push(e.errorCode):t.errors.push(e.toString()):t.errors.push(e.toString()):t.errors.push(Le.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t,this.correlationId)}incrementCacheHits(){let e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId),e.cacheHits}getLastRequests(){let e={failedRequests:[],errors:[],cacheHits:0};return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||e}clearTelemetryCache(){let e=this.getLastRequests(),t=n.maxErrorsToSend(e),r=e.errors.length;if(t===r)this.cacheManager.removeItem(this.telemetryCacheKey,this.correlationId);else{let o={failedRequests:e.failedRequests.slice(t*2),errors:e.errors.slice(t),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,o,this.correlationId)}}static maxErrorsToSend(e){let t,r=0,o=0,i=e.errors.length;for(t=0;t<i;t++){let s=e.failedRequests[2*t]||y.EMPTY_STRING,a=e.failedRequests[2*t+1]||y.EMPTY_STRING,c=e.errors[t]||y.EMPTY_STRING;if(o+=s.toString().length+a.toString().length+c.length+3,o<Le.MAX_LAST_HEADER_BYTES)r+=1;else break}return r}getRegionDiscoveryFields(){let e=[];return e.push(this.regionUsed||y.EMPTY_STRING),e.push(this.regionSource||y.EMPTY_STRING),e.push(this.regionOutcome||y.EMPTY_STRING),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}setNativeBrokerErrorCode(e){let t=this.getLastRequests();t.nativeBrokerErrorCode=e,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t,this.correlationId)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){let e=this.getLastRequests();delete e.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId)}static makeExtraSkuString(e){return $k(e)}};var wf="missing_kid_error",Af="missing_alg_error";var Gk={[wf]:"The JOSE Header for the requested JWT, JWS or JWK object requires a keyId to be configured as the 'kid' header claim. No 'kid' value was provided.",[Af]:"The JOSE Header for the requested JWT, JWS or JWK object requires an algorithm to be specified as the 'alg' header claim. No 'alg' value was provided."},xy=class n extends ${constructor(e,t){super(e,t),this.name="JoseHeaderError",Object.setPrototypeOf(this,n.prototype)}};function Ly(n){return new xy(n,Gk[n])}var Il=class n{constructor(e){this.typ=e.typ,this.alg=e.alg,this.kid=e.kid}static getShrHeaderString(e){if(!e.kid)throw Ly(wf);if(!e.alg)throw Ly(Af);let t=new n({typ:e.typ||tf.Pop,kid:e.kid,alg:e.alg});return JSON.stringify(t)}};var _f=class{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}},bs=class{generateId(){return"callback-id"}startMeasurement(e,t){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:Dy.InProgress,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:e,startTimeMs:Date.now(),correlationId:t||""},measurement:new _f}}startPerformanceMeasurement(){return new _f}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}};var Si="pkce_not_created",wi="crypto_nonexistent",On="empty_navigate_uri",Rs="hash_empty_error",Xr="no_state_in_hash",Ms="hash_does_not_contain_known_properties",Ns="unable_to_parse_state",ks="state_interaction_type_mismatch",Os="interaction_in_progress",Ps="popup_window_error",xs="empty_window_error",Tt="user_cancelled",Df="monitor_popup_timeout",Ls="monitor_window_timeout",Fs="redirect_in_iframe",Us="block_iframe_reload",Hs="block_nested_popups",bf="iframe_closed_prematurely",Pn="silent_logout_unsupported",Bs="no_account_error",Rf="silent_prompt_value_error",js="no_token_request_cache_error",Vs="unable_to_parse_token_request_cache_error",eo="no_cached_authority_error",Mf="auth_request_not_set_error",Nf="invalid_cache_type",xn="non_browser_environment",Ln="database_not_open",fr="no_network_connectivity",$s="post_request_failed",zs="get_request_failed",Ai="failed_to_parse_response",Gs="unable_to_load_token",to="crypto_key_not_found",qs="auth_code_required",Ks="auth_code_or_nativeAccountId_required",Ws="spa_code_and_nativeAccountId_present",no="database_unavailable",Ys="unable_to_acquire_token_from_native_platform",Qs="native_handshake_timeout",Js="native_extension_not_installed",Yt="native_connection_not_established",Zs="uninitialized_public_client_application",Xs="native_prompt_not_supported",ea="invalid_base64_string",ta="invalid_pop_token_request",kf="failed_to_build_headers",Of="failed_to_parse_headers";var hr="For more visit: aka.ms/msaljs/browser-errors",U={[Si]:"The PKCE code challenge and verifier could not be generated.",[wi]:"The crypto object or function is not available.",[On]:"Navigation URI is empty. Please check stack trace for more info.",[Rs]:`Hash value cannot be processed because it is empty. Please verify that your redirectUri is not clearing the hash. ${hr}`,[Xr]:"Hash does not contain state. Please verify that the request originated from msal.",[Ms]:`Hash does not contain known properites. Please verify that your redirectUri is not changing the hash.  ${hr}`,[Ns]:"Unable to parse state. Please verify that the request originated from msal.",[ks]:"Hash contains state but the interaction type does not match the caller.",[Os]:`Interaction is currently in progress. Please ensure that this interaction has been completed before calling an interactive API.   ${hr}`,[Ps]:"Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser.",[xs]:"window.open returned null or undefined window object.",[Tt]:"User cancelled the flow.",[Df]:`Token acquisition in popup failed due to timeout.  ${hr}`,[Ls]:`Token acquisition in iframe failed due to timeout.  ${hr}`,[Fs]:"Redirects are not supported for iframed or brokered applications. Please ensure you are using MSAL.js in a top frame of the window if using the redirect APIs, or use the popup APIs.",[Us]:`Request was blocked inside an iframe because MSAL detected an authentication response.  ${hr}`,[Hs]:"Request was blocked inside a popup because MSAL detected it was running in a popup.",[bf]:"The iframe being monitored was closed prematurely.",[Pn]:"Silent logout not supported. Please call logoutRedirect or logoutPopup instead.",[Bs]:"No account object provided to acquireTokenSilent and no active account has been set. Please call setActiveAccount or provide an account on the request.",[Rf]:"The value given for the prompt value is not valid for silent requests - must be set to 'none' or 'no_session'.",[js]:"No token request found in cache.",[Vs]:"The cached token request could not be parsed.",[eo]:"No cached authority found.",[Mf]:"Auth Request not set. Please ensure initiateAuthRequest was called from the InteractionHandler",[Nf]:"Invalid cache type",[xn]:"Login and token requests are not supported in non-browser environments.",[Ln]:"Database is not open!",[fr]:"No network connectivity. Check your internet connection.",[$s]:"Network request failed: If the browser threw a CORS error, check that the redirectUri is registered in the Azure App Portal as type 'SPA'",[zs]:"Network request failed. Please check the network trace to determine root cause.",[Ai]:"Failed to parse network response. Check network trace.",[Gs]:"Error loading token to cache.",[to]:"Cryptographic Key or Keypair not found in browser storage.",[qs]:"An authorization code must be provided (as the `code` property on the request) to this flow.",[Ks]:"An authorization code or nativeAccountId must be provided to this flow.",[Ws]:"Request cannot contain both spa code and native account id.",[no]:"IndexedDB, which is required for persistent cryptographic key storage, is unavailable. This may be caused by browser privacy features which block persistent storage in third-party contexts.",[Ys]:`Unable to acquire token from native platform.  ${hr}`,[Qs]:"Timed out while attempting to establish connection to browser extension",[Js]:"Native extension is not installed. If you think this is a mistake call the initialize function.",[Yt]:`Connection to native platform has not been established. Please install a compatible browser extension and run initialize().  ${hr}`,[Zs]:`You must call and await the initialize function before attempting to call any other MSAL API.  ${hr}`,[Xs]:"The provided prompt is not supported by the native platform. This request should be routed to the web based flow.",[ea]:"Invalid base64 encoded string.",[ta]:"Invalid PoP token request. The request should not have both a popKid value and signPopToken set to true.",[kf]:"Failed to build request headers object.",[Of]:"Failed to parse response headers"},UY={pkceNotGenerated:{code:Si,desc:U[Si]},cryptoDoesNotExist:{code:wi,desc:U[wi]},emptyNavigateUriError:{code:On,desc:U[On]},hashEmptyError:{code:Rs,desc:U[Rs]},hashDoesNotContainStateError:{code:Xr,desc:U[Xr]},hashDoesNotContainKnownPropertiesError:{code:Ms,desc:U[Ms]},unableToParseStateError:{code:Ns,desc:U[Ns]},stateInteractionTypeMismatchError:{code:ks,desc:U[ks]},interactionInProgress:{code:Os,desc:U[Os]},popupWindowError:{code:Ps,desc:U[Ps]},emptyWindowError:{code:xs,desc:U[xs]},userCancelledError:{code:Tt,desc:U[Tt]},monitorPopupTimeoutError:{code:Df,desc:U[Df]},monitorIframeTimeoutError:{code:Ls,desc:U[Ls]},redirectInIframeError:{code:Fs,desc:U[Fs]},blockTokenRequestsInHiddenIframeError:{code:Us,desc:U[Us]},blockAcquireTokenInPopupsError:{code:Hs,desc:U[Hs]},iframeClosedPrematurelyError:{code:bf,desc:U[bf]},silentLogoutUnsupportedError:{code:Pn,desc:U[Pn]},noAccountError:{code:Bs,desc:U[Bs]},silentPromptValueError:{code:Rf,desc:U[Rf]},noTokenRequestCacheError:{code:js,desc:U[js]},unableToParseTokenRequestCacheError:{code:Vs,desc:U[Vs]},noCachedAuthorityError:{code:eo,desc:U[eo]},authRequestNotSet:{code:Mf,desc:U[Mf]},invalidCacheType:{code:Nf,desc:U[Nf]},notInBrowserEnvironment:{code:xn,desc:U[xn]},databaseNotOpen:{code:Ln,desc:U[Ln]},noNetworkConnectivity:{code:fr,desc:U[fr]},postRequestFailed:{code:$s,desc:U[$s]},getRequestFailed:{code:zs,desc:U[zs]},failedToParseNetworkResponse:{code:Ai,desc:U[Ai]},unableToLoadTokenError:{code:Gs,desc:U[Gs]},signingKeyNotFoundInStorage:{code:to,desc:U[to]},authCodeRequired:{code:qs,desc:U[qs]},authCodeOrNativeAccountRequired:{code:Ks,desc:U[Ks]},spaCodeAndNativeAccountPresent:{code:Ws,desc:U[Ws]},databaseUnavailable:{code:no,desc:U[no]},unableToAcquireTokenFromNativePlatform:{code:Ys,desc:U[Ys]},nativeHandshakeTimeout:{code:Qs,desc:U[Qs]},nativeExtensionNotInstalled:{code:Js,desc:U[Js]},nativeConnectionNotEstablished:{code:Yt,desc:U[Yt]},uninitializedPublicClientApplication:{code:Zs,desc:U[Zs]},nativePromptNotSupported:{code:Xs,desc:U[Xs]},invalidBase64StringError:{code:ea,desc:U[ea]},invalidPopTokenRequest:{code:ta,desc:U[ta]}},_i=class n extends ${constructor(e,t){super(e,U[e],t),Object.setPrototypeOf(this,n.prototype),this.name="BrowserAuthError"}};function T(n,e){return new _i(n,e)}var be={INTERACTION_IN_PROGRESS_VALUE:"interaction_in_progress",INVALID_GRANT_ERROR:"invalid_grant",POPUP_WIDTH:483,POPUP_HEIGHT:600,POPUP_NAME_PREFIX:"msal",DEFAULT_POLL_INTERVAL_MS:30,MSAL_SKU:"msal.js.browser"},ro={CHANNEL_ID:"53ee284d-920a-4b59-9d30-a60315b26836",PREFERRED_EXTENSION_ID:"ppnbnpeolgkicgegkbkbjmhlideopiji",MATS_TELEMETRY:"MATS"},pr={HandshakeRequest:"Handshake",HandshakeResponse:"HandshakeResponse",GetToken:"GetToken",Response:"Response"},Se={LocalStorage:"localStorage",SessionStorage:"sessionStorage",MemoryStorage:"memoryStorage"},Fy={GET:"GET",POST:"POST"},re={AUTHORITY:"authority",ACQUIRE_TOKEN_ACCOUNT:"acquireToken.account",SESSION_STATE:"session.state",REQUEST_STATE:"request.state",NONCE_IDTOKEN:"nonce.id_token",ORIGIN_URI:"request.origin",RENEW_STATUS:"token.renew.status",URL_HASH:"urlHash",REQUEST_PARAMS:"request.params",SCOPES:"scopes",INTERACTION_STATUS_KEY:"interaction.status",CCS_CREDENTIAL:"ccs.credential",CORRELATION_ID:"request.correlationId",NATIVE_REQUEST:"request.native",REDIRECT_CONTEXT:"request.redirect.context"},xt={ACCOUNT_KEYS:"msal.account.keys",TOKEN_KEYS:"msal.token.keys",VERSION:"msal.version"},Tl={WRAPPER_SKU:"wrapper.sku",WRAPPER_VER:"wrapper.version"},ie={acquireTokenRedirect:861,acquireTokenPopup:862,ssoSilent:863,acquireTokenSilent_authCode:864,handleRedirectPromise:865,acquireTokenByCode:866,acquireTokenSilent_silentFlow:61,logout:961,logoutPopup:962},b=(function(n){return n.Redirect="redirect",n.Popup="popup",n.Silent="silent",n.None="none",n})(b||{}),Ge={Startup:"startup",Login:"login",Logout:"logout",AcquireToken:"acquireToken",SsoSilent:"ssoSilent",HandleRedirect:"handleRedirect",None:"none"},Uy={scopes:kt},Hy="jwk",By={React:"@azure/msal-react",Angular:"@azure/msal-angular"},Pf="msal.db",xS=1,LS=`${Pf}.keys`,pt={Default:0,AccessToken:1,AccessTokenAndRefreshToken:2,RefreshToken:3,RefreshTokenAndNetwork:4,Skip:5},FS=[pt.Default,pt.Skip,pt.RefreshTokenAndNetwork],US="msal.browser.log.level",HS="msal.browser.log.pii";function Sl(n){return encodeURIComponent(wl(n).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"))}function Di(n){return BS(n).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function wl(n){return BS(new TextEncoder().encode(n))}function BS(n){let e=Array.from(n,t=>String.fromCodePoint(t)).join("");return btoa(e)}var qk="RSASSA-PKCS1-v1_5",$S="SHA-256",Kk=2048,Wk=new Uint8Array([1,0,1]),jS="0123456789abcdef",VS=new Uint32Array(1),Yk="crypto_subtle_undefined",Vy={name:qk,hash:$S,modulusLength:Kk,publicExponent:Wk};function zS(n){if(!window)throw T(xn);if(!window.crypto)throw T(wi);if(!n&&!window.crypto.subtle)throw T(wi,Yk)}function $y(n,e,t){return h(this,null,function*(){e?.addQueueMeasurement(d.Sha256Digest,t);let o=new TextEncoder().encode(n);return window.crypto.subtle.digest($S,o)})}function GS(n){return window.crypto.getRandomValues(n)}function jy(){return window.crypto.getRandomValues(VS),VS[0]}function Ze(){let n=Date.now(),e=jy()*1024+(jy()&1023),t=new Uint8Array(16),r=Math.trunc(e/2**30),o=e&2**30-1,i=jy();t[0]=n/2**40,t[1]=n/2**32,t[2]=n/2**24,t[3]=n/2**16,t[4]=n/2**8,t[5]=n,t[6]=112|r>>>8,t[7]=r,t[8]=128|o>>>24,t[9]=o>>>16,t[10]=o>>>8,t[11]=o,t[12]=i>>>24,t[13]=i>>>16,t[14]=i>>>8,t[15]=i;let s="";for(let a=0;a<t.length;a++)s+=jS.charAt(t[a]>>>4),s+=jS.charAt(t[a]&15),(a===3||a===5||a===7||a===9)&&(s+="-");return s}function qS(n,e){return h(this,null,function*(){return window.crypto.subtle.generateKey(Vy,n,e)})}function xf(n){return h(this,null,function*(){return window.crypto.subtle.exportKey(Hy,n)})}function KS(n,e,t){return h(this,null,function*(){return window.crypto.subtle.importKey(Hy,n,Vy,e,t)})}function WS(n,e){return h(this,null,function*(){return window.crypto.subtle.sign(Vy,n,e)})}function Lf(n){return h(this,null,function*(){let e=yield $y(n),t=new Uint8Array(e);return Di(t)})}var oo="storage_not_supported",Ff="stubbed_public_client_application_called",na="in_mem_redirect_unavailable";var Uf={[oo]:"Given storage configuration option was not supported.",[Ff]:"Stub instance of Public Client Application was called. If using msal-react, please ensure context is not used without a provider. For more visit: aka.ms/msaljs/browser-errors",[na]:"Redirect cannot be supported. In-memory storage was selected and storeAuthStateInCookie=false, which would cause the library to be unable to handle the incoming hash. If you would like to use the redirect API, please use session/localStorage or set storeAuthStateInCookie=true."},Qk={storageNotSupportedError:{code:oo,desc:Uf[oo]},stubPcaInstanceCalled:{code:Ff,desc:Uf[Ff]},inMemRedirectUnavailable:{code:na,desc:Uf[na]}},ra=class n extends ${constructor(e,t){super(e,t),this.name="BrowserConfigurationAuthError",Object.setPrototypeOf(this,n.prototype)}};function oa(n){return new ra(n,Uf[n])}function zy(n){n.location.hash="",typeof n.history.replaceState=="function"&&n.history.replaceState(null,"",`${n.location.origin}${n.location.pathname}${n.location.search}`)}function Gy(n){let e=n.split("#");e.shift(),window.location.hash=e.length>0?e.join("#"):""}function Al(){return window.parent!==window}function YS(){return typeof window<"u"&&!!window.opener&&window.opener!==window&&typeof window.name=="string"&&window.name.indexOf(`${be.POPUP_NAME_PREFIX}.`)===0}function gt(){return typeof window<"u"&&window.location?window.location.href.split("?")[0].split("#")[0]:""}function qy(){let e=new j(window.location.href).getUrlComponents();return`${e.Protocol}//${e.HostNameAndPort}/`}function QS(){if(j.hashContainsKnownProperties(window.location.hash)&&Al())throw T(Us)}function JS(n){if(Al()&&!n)throw T(Fs)}function ZS(){if(YS())throw T(Hs)}function Hf(){if(typeof window>"u")throw T(xn)}function Bf(n){if(!n)throw T(Zs)}function _l(n){Hf(),QS(),ZS(),Bf(n)}function jf(n,e){if(_l(n),JS(e.system.allowRedirectInIframe),e.cache.cacheLocation===Se.MemoryStorage&&!e.cache.storeAuthStateInCookie)throw oa(na)}function Dl(n){let e=document.createElement("link");e.rel="preconnect",e.href=new URL(n).origin,e.crossOrigin="anonymous",document.head.appendChild(e),window.setTimeout(()=>{try{document.head.removeChild(e)}catch{}},1e4)}function Ky(){return Ze()}var bl=class n{navigateInternal(e,t){return n.defaultNavigateWindow(e,t)}navigateExternal(e,t){return n.defaultNavigateWindow(e,t)}static defaultNavigateWindow(e,t){return t.noHistory?window.location.replace(e):window.location.assign(e),new Promise(r=>{setTimeout(()=>{r(!0)},t.timeout)})}};var $f=class{sendGetRequestAsync(e,t){return h(this,null,function*(){let r,o={},i=0,s=XS(t);try{r=yield fetch(e,{method:Fy.GET,headers:s})}catch{throw T(window.navigator.onLine?zs:fr)}o=ew(r.headers);try{return i=r.status,{headers:o,body:yield r.json(),status:i}}catch{throw Ef(T(Ai),i,o)}})}sendPostRequestAsync(e,t){return h(this,null,function*(){let r=t&&t.body||"",o=XS(t),i,s=0,a={};try{i=yield fetch(e,{method:Fy.POST,headers:o,body:r})}catch{throw T(window.navigator.onLine?$s:fr)}a=ew(i.headers);try{return s=i.status,{headers:a,body:yield i.json(),status:s}}catch{throw Ef(T(Ai),s,a)}})}};function XS(n){try{let e=new Headers;if(!(n&&n.headers))return e;let t=n.headers;return Object.entries(t).forEach(([r,o])=>{e.append(r,o)}),e}catch{throw T(kf)}}function ew(n){try{let e={};return n.forEach((t,r)=>{e[r]=t}),e}catch{throw T(Of)}}var Jk=6e4,zf=1e4,Zk=3e4,Xk=2e3;function tw({auth:n,cache:e,system:t,telemetry:r},o){let i={clientId:y.EMPTY_STRING,authority:`${y.DEFAULT_AUTHORITY}`,knownAuthorities:[],cloudDiscoveryMetadata:y.EMPTY_STRING,authorityMetadata:y.EMPTY_STRING,redirectUri:typeof window<"u"?gt():"",postLogoutRedirectUri:y.EMPTY_STRING,navigateToLoginRequestUrl:!0,clientCapabilities:[],protocolMode:Qe.AAD,OIDCOptions:{serverResponseType:cn.FRAGMENT,defaultScopes:[y.OPENID_SCOPE,y.PROFILE_SCOPE,y.OFFLINE_ACCESS_SCOPE]},azureCloudOptions:{azureCloudInstance:zr.None,tenant:y.EMPTY_STRING},skipAuthorityMetadataCache:!1,supportsNestedAppAuth:!1,instanceAware:!1},s={cacheLocation:Se.SessionStorage,temporaryCacheLocation:Se.SessionStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!!(e&&e.cacheLocation===Se.LocalStorage),claimsBasedCachingEnabled:!1},a={loggerCallback:()=>{},logLevel:ne.Info,piiLoggingEnabled:!1},c=A(m({},df),{loggerOptions:a,networkClient:o?new $f:Py,navigationClient:new bl,loadFrameTimeout:0,windowHashTimeout:t?.loadFrameTimeout||Jk,iframeHashTimeout:t?.loadFrameTimeout||zf,navigateFrameWait:0,redirectNavigationTimeout:Zk,asyncPopups:!1,allowRedirectInIframe:!1,allowNativeBroker:!1,nativeBrokerHandshakeTimeout:t?.nativeBrokerHandshakeTimeout||Xk,pollIntervalMilliseconds:be.DEFAULT_POLL_INTERVAL_MS}),l=A(m(m({},c),t),{loggerOptions:t?.loggerOptions||a}),u={application:{appName:y.EMPTY_STRING,appVersion:y.EMPTY_STRING},client:new bs};if(n?.protocolMode!==Qe.OIDC&&n?.OIDCOptions&&new It(l.loggerOptions).warning(JSON.stringify(J(dn.cannotSetOIDCOptions))),n?.protocolMode&&n.protocolMode!==Qe.AAD&&l?.allowNativeBroker)throw J(dn.cannotAllowNativeBroker);return{auth:A(m(m({},i),n),{OIDCOptions:m(m({},i.OIDCOptions),n?.OIDCOptions)}),cache:m(m({},s),e),system:l,telemetry:m(m({},u),r)}}var nw="@azure/msal-browser",fn="3.30.0";var Gf=class n{static loggerCallback(e,t){switch(e){case ne.Error:console.error(t);return;case ne.Info:console.info(t);return;case ne.Verbose:console.debug(t);return;case ne.Warning:console.warn(t);return;default:console.log(t);return}}constructor(e){this.browserEnvironment=typeof window<"u",this.config=tw(e,this.browserEnvironment);let t;try{t=window[Se.SessionStorage]}catch{}let r=t?.getItem(US),o=t?.getItem(HS)?.toLowerCase(),i=o==="true"?!0:o==="false"?!1:void 0,s=m({},this.config.system.loggerOptions),a=r&&Object.keys(ne).includes(r)?ne[r]:void 0;a&&(s.loggerCallback=n.loggerCallback,s.logLevel=a),i!==void 0&&(s.piiLoggingEnabled=i),this.logger=new It(s,nw,fn),this.available=!1}getConfig(){return this.config}getLogger(){return this.logger}isAvailable(){return this.available}isBrowserEnvironment(){return this.browserEnvironment}};var qf=(()=>{class n extends Gf{getModuleName(){return n.MODULE_NAME}getId(){return n.ID}initialize(){return h(this,null,function*(){return this.available=typeof window<"u",this.available})}}return n.MODULE_NAME="",n.ID="StandardOperatingContext",n})();function St(n){return new TextDecoder().decode(eO(n))}function eO(n){let e=n.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw T(ea)}let t=atob(e);return Uint8Array.from(t,r=>r.codePointAt(0)||0)}var Kf=class{constructor(){this.dbName=Pf,this.version=xS,this.tableName=LS,this.dbOpen=!1}open(){return h(this,null,function*(){return new Promise((e,t)=>{let r=window.indexedDB.open(this.dbName,this.version);r.addEventListener("upgradeneeded",o=>{o.target.result.createObjectStore(this.tableName)}),r.addEventListener("success",o=>{let i=o;this.db=i.target.result,this.dbOpen=!0,e()}),r.addEventListener("error",()=>t(T(no)))})})}closeConnection(){let e=this.db;e&&this.dbOpen&&(e.close(),this.dbOpen=!1)}validateDbIsOpen(){return h(this,null,function*(){if(!this.dbOpen)return this.open()})}getItem(e){return h(this,null,function*(){return yield this.validateDbIsOpen(),new Promise((t,r)=>{if(!this.db)return r(T(Ln));let s=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).get(e);s.addEventListener("success",a=>{let c=a;this.closeConnection(),t(c.target.result)}),s.addEventListener("error",a=>{this.closeConnection(),r(a)})})})}setItem(e,t){return h(this,null,function*(){return yield this.validateDbIsOpen(),new Promise((r,o)=>{if(!this.db)return o(T(Ln));let a=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).put(t,e);a.addEventListener("success",()=>{this.closeConnection(),r()}),a.addEventListener("error",c=>{this.closeConnection(),o(c)})})})}removeItem(e){return h(this,null,function*(){return yield this.validateDbIsOpen(),new Promise((t,r)=>{if(!this.db)return r(T(Ln));let s=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).delete(e);s.addEventListener("success",()=>{this.closeConnection(),t()}),s.addEventListener("error",a=>{this.closeConnection(),r(a)})})})}getKeys(){return h(this,null,function*(){return yield this.validateDbIsOpen(),new Promise((e,t)=>{if(!this.db)return t(T(Ln));let i=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).getAllKeys();i.addEventListener("success",s=>{let a=s;this.closeConnection(),e(a.target.result)}),i.addEventListener("error",s=>{this.closeConnection(),t(s)})})})}containsKey(e){return h(this,null,function*(){return yield this.validateDbIsOpen(),new Promise((t,r)=>{if(!this.db)return r(T(Ln));let s=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).count(e);s.addEventListener("success",a=>{let c=a;this.closeConnection(),t(c.target.result===1)}),s.addEventListener("error",a=>{this.closeConnection(),r(a)})})})}deleteDatabase(){return h(this,null,function*(){return this.db&&this.dbOpen&&this.closeConnection(),new Promise((e,t)=>{let r=window.indexedDB.deleteDatabase(Pf),o=setTimeout(()=>t(!1),200);r.addEventListener("success",()=>(clearTimeout(o),e(!0))),r.addEventListener("blocked",()=>(clearTimeout(o),e(!0))),r.addEventListener("error",()=>(clearTimeout(o),t(!1)))})})}};var bi=class{constructor(){this.cache=new Map}getItem(e){return this.cache.get(e)||null}setItem(e,t){this.cache.set(e,t)}removeItem(e){this.cache.delete(e)}getKeys(){let e=[];return this.cache.forEach((t,r)=>{e.push(r)}),e}containsKey(e){return this.cache.has(e)}clear(){this.cache.clear()}};var Wf=class{constructor(e){this.inMemoryCache=new bi,this.indexedDBCache=new Kf,this.logger=e}handleDatabaseAccessError(e){if(e instanceof _i&&e.errorCode===no)this.logger.error("Could not access persistent storage. This may be caused by browser privacy features which block persistent storage in third-party contexts.");else throw e}getItem(e){return h(this,null,function*(){let t=this.inMemoryCache.getItem(e);if(!t)try{return this.logger.verbose("Queried item not found in in-memory cache, now querying persistent storage."),yield this.indexedDBCache.getItem(e)}catch(r){this.handleDatabaseAccessError(r)}return t})}setItem(e,t){return h(this,null,function*(){this.inMemoryCache.setItem(e,t);try{yield this.indexedDBCache.setItem(e,t)}catch(r){this.handleDatabaseAccessError(r)}})}removeItem(e){return h(this,null,function*(){this.inMemoryCache.removeItem(e);try{yield this.indexedDBCache.removeItem(e)}catch(t){this.handleDatabaseAccessError(t)}})}getKeys(){return h(this,null,function*(){let e=this.inMemoryCache.getKeys();if(e.length===0)try{return this.logger.verbose("In-memory cache is empty, now querying persistent storage."),yield this.indexedDBCache.getKeys()}catch(t){this.handleDatabaseAccessError(t)}return e})}containsKey(e){return h(this,null,function*(){let t=this.inMemoryCache.containsKey(e);if(!t)try{return this.logger.verbose("Key not found in in-memory cache, now querying persistent storage."),yield this.indexedDBCache.containsKey(e)}catch(r){this.handleDatabaseAccessError(r)}return t})}clearInMemory(){this.logger.verbose("Deleting in-memory keystore"),this.inMemoryCache.clear(),this.logger.verbose("In-memory keystore deleted")}clearPersistent(){return h(this,null,function*(){try{this.logger.verbose("Deleting persistent keystore");let e=yield this.indexedDBCache.deleteDatabase();return e&&this.logger.verbose("Persistent keystore deleted"),e}catch(e){return this.handleDatabaseAccessError(e),!1}})}};var ow=(()=>{class n{constructor(t,r,o){this.logger=t,zS(o??!1),this.cache=new Wf(this.logger),this.performanceClient=r}createNewGuid(){return Ze()}base64Encode(t){return wl(t)}base64Decode(t){return St(t)}base64UrlEncode(t){return Sl(t)}encodeKid(t){return this.base64UrlEncode(JSON.stringify({kid:t}))}getPublicKeyThumbprint(t){return h(this,null,function*(){let r=this.performanceClient?.startMeasurement(d.CryptoOptsGetPublicKeyThumbprint,t.correlationId),o=yield qS(n.EXTRACTABLE,n.POP_KEY_USAGES),i=yield xf(o.publicKey),s={e:i.e,kty:i.kty,n:i.n},a=rw(s),c=yield this.hashString(a),l=yield xf(o.privateKey),u=yield KS(l,!1,["sign"]);return yield this.cache.setItem(c,{privateKey:u,publicKey:o.publicKey,requestMethod:t.resourceRequestMethod,requestUri:t.resourceRequestUri}),r&&r.end({success:!0}),c})}removeTokenBindingKey(t){return h(this,null,function*(){return yield this.cache.removeItem(t),!(yield this.cache.containsKey(t))})}clearKeystore(){return h(this,null,function*(){this.cache.clearInMemory();try{return yield this.cache.clearPersistent(),!0}catch(t){return t instanceof Error?this.logger.error(`Clearing keystore failed with error: ${t.message}`):this.logger.error("Clearing keystore failed with unknown error"),!1}})}signJwt(t,r,o,i){return h(this,null,function*(){let s=this.performanceClient?.startMeasurement(d.CryptoOptsSignJwt,i),a=yield this.cache.getItem(r);if(!a)throw T(to);let c=yield xf(a.publicKey),l=rw(c),u=Sl(JSON.stringify({kid:r})),f=Il.getShrHeaderString(A(m({},o?.header),{alg:c.alg,kid:u})),g=Sl(f);t.cnf={jwk:JSON.parse(l)};let p=Sl(JSON.stringify(t)),I=`${g}.${p}`,w=new TextEncoder().encode(I),N=yield WS(a.privateKey,w),ue=Di(new Uint8Array(N)),Be=`${I}.${ue}`;return s&&s.end({success:!0}),Be})}hashString(t){return h(this,null,function*(){return Lf(t)})}}return n.POP_KEY_USAGES=["sign","verify"],n.EXTRACTABLE=!0,n})();function rw(n){return JSON.stringify(n,Object.keys(n).sort())}var Yf=class{constructor(){if(!window.localStorage)throw oa(oo)}getItem(e){return window.localStorage.getItem(e)}setItem(e,t){window.localStorage.setItem(e,t)}removeItem(e){window.localStorage.removeItem(e)}getKeys(){return Object.keys(window.localStorage)}containsKey(e){return window.localStorage.hasOwnProperty(e)}};var Qf=class{constructor(){if(!window.sessionStorage)throw oa(oo)}getItem(e){return window.sessionStorage.getItem(e)}setItem(e,t){window.sessionStorage.setItem(e,t)}removeItem(e){window.sessionStorage.removeItem(e)}getKeys(){return Object.keys(window.sessionStorage)}containsKey(e){return window.sessionStorage.hasOwnProperty(e)}};function Jf(n,e){if(!e)return null;try{return He.parseRequestState(n,e).libraryState.meta}catch{throw v(Fe.invalidState)}}var Zf=class{getItem(e){let t=`${encodeURIComponent(e)}`,r=document.cookie.split(";");for(let o=0;o<r.length;o++){let i=r[o],[s,...a]=decodeURIComponent(i).trim().split("="),c=a.join("=");if(s===t)return c}return""}setItem(e,t,r,o=!0){let i=`${encodeURIComponent(e)}=${encodeURIComponent(t)};path=/;SameSite=Lax;`;if(r){let s=tO(r);i+=`expires=${s};`}o&&(i+="Secure;"),document.cookie=i}removeItem(e){this.setItem(e,"",-1)}getKeys(){let e=document.cookie.split(";"),t=[];return e.forEach(r=>{let o=decodeURIComponent(r).trim().split("=");t.push(o[0])}),t}containsKey(e){return this.getKeys().includes(e)}};function tO(n){let e=new Date;return new Date(e.getTime()+n*864e5).toUTCString()}var ia=class n extends cr{constructor(e,t,r,o,i,s){super(e,r,o,i),this.cacheConfig=t,this.logger=o,this.internalStorage=new bi,this.browserStorage=this.setupBrowserStorage(this.cacheConfig.cacheLocation),this.temporaryCacheStorage=this.setupBrowserStorage(this.cacheConfig.temporaryCacheLocation),this.cookieStorage=new Zf,t.cacheMigrationEnabled&&(this.migrateCacheEntries(),this.createKeyMaps()),this.performanceClient=s}setupBrowserStorage(e){try{switch(e){case Se.LocalStorage:return new Yf;case Se.SessionStorage:return new Qf;case Se.MemoryStorage:default:break}}catch(t){this.logger.error(t)}return this.cacheConfig.cacheLocation=Se.MemoryStorage,new bi}migrateCacheEntries(){let e=this.browserStorage.getItem(xt.VERSION);e&&this.logger.info(`MSAL.js was last initialized with version ${e}`),e!==fn&&this.browserStorage.setItem(xt.VERSION,fn);let t=`${y.CACHE_PREFIX}.${De.ID_TOKEN}`,r=`${y.CACHE_PREFIX}.${De.CLIENT_INFO}`,o=`${y.CACHE_PREFIX}.${De.ERROR}`,i=`${y.CACHE_PREFIX}.${De.ERROR_DESC}`,s=this.browserStorage.getItem(t),a=this.browserStorage.getItem(r),c=this.browserStorage.getItem(o),l=this.browserStorage.getItem(i),u=[s,a,c,l];[De.ID_TOKEN,De.CLIENT_INFO,De.ERROR,De.ERROR_DESC].forEach((g,p)=>{let I=u[p];I&&this.setTemporaryCache(g,I,!0)})}createKeyMaps(){this.logger.trace("BrowserCacheManager - createKeyMaps called.");let e=this.cryptoImpl.createNewGuid(),t=this.getItem(xt.ACCOUNT_KEYS),r=this.getItem(`${xt.TOKEN_KEYS}.${this.clientId}`);if(t&&r){this.logger.verbose("BrowserCacheManager:createKeyMaps - account and token key maps already exist, skipping migration.");return}this.browserStorage.getKeys().forEach(i=>{if(this.isCredentialKey(i)){let s=this.getItem(i);if(s){let a=this.validateAndParseJson(s);if(a&&a.hasOwnProperty("credentialType"))switch(a.credentialType){case F.ID_TOKEN:if(he.isIdTokenEntity(a)){this.logger.trace("BrowserCacheManager:createKeyMaps - idToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - idToken with key: ${i} found, saving key to token key map`);let c=a,l=this.updateCredentialCacheKey(i,c,e);this.addTokenKey(l,F.ID_TOKEN,e);return}else this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching idToken schema with value containing idToken credentialType field but value failed IdTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed idToken validation on key: ${i}`);break;case F.ACCESS_TOKEN:case F.ACCESS_TOKEN_WITH_AUTH_SCHEME:if(he.isAccessTokenEntity(a)){this.logger.trace("BrowserCacheManager:createKeyMaps - accessToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - accessToken with key: ${i} found, saving key to token key map`);let c=a,l=this.updateCredentialCacheKey(i,c,e);this.addTokenKey(l,F.ACCESS_TOKEN,e);return}else this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching accessToken schema with value containing accessToken credentialType field but value failed AccessTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed accessToken validation on key: ${i}`);break;case F.REFRESH_TOKEN:if(he.isRefreshTokenEntity(a)){this.logger.trace("BrowserCacheManager:createKeyMaps - refreshToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - refreshToken with key: ${i} found, saving key to token key map`);let c=a,l=this.updateCredentialCacheKey(i,c,e);this.addTokenKey(l,F.REFRESH_TOKEN,e);return}else this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching refreshToken schema with value containing refreshToken credentialType field but value failed RefreshTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed refreshToken validation on key: ${i}`);break}}}if(this.isAccountKey(i)){let s=this.getItem(i);if(s){let a=this.validateAndParseJson(s);a&&ge.isAccountEntity(a)&&(this.logger.trace("BrowserCacheManager:createKeyMaps - account found, saving key to account key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - account with key: ${i} found, saving key to account key map`),this.addAccountKeyToMap(i,e))}}})}validateAndParseJson(e){try{let t=JSON.parse(e);return t&&typeof t=="object"?t:null}catch{return null}}getItem(e){return this.browserStorage.getItem(e)}setItem(e,t,r){let o=[];for(let s=0;s<=20;s++)try{this.browserStorage.setItem(e,t),s>0&&this.removeAccessTokenKeys(o.slice(0,s),r);break}catch(a){let c=gl(a);if(c.errorCode===uf.cacheQuotaExceeded&&s<20){if(o.length||(e===`${xt.TOKEN_KEYS}.${this.clientId}`?o=JSON.parse(t).accessToken:o=this.getTokenKeys().accessToken),o.length<=s)throw c;this.removeAccessToken(o[s],r,!1)}else throw c}}getAccount(e,t,r){this.logger.trace("BrowserCacheManager.getAccount called");let o=this.getCachedAccountEntity(e,t);return this.updateOutdatedCachedAccount(e,o,t,r)}getCachedAccountEntity(e,t){let r=this.getItem(e);if(!r)return this.removeAccountKeyFromMap(e,t),null;let o=this.validateAndParseJson(r);return!o||!ge.isAccountEntity(o)?null:cr.toObject(new ge,o)}setAccount(e,t){this.logger.trace("BrowserCacheManager.setAccount called");let r=e.generateAccountKey();e.lastUpdatedAt=Date.now().toString(),this.setItem(r,JSON.stringify(e),t),this.addAccountKeyToMap(r,t)}getAccountKeys(){this.logger.trace("BrowserCacheManager.getAccountKeys called");let e=this.getItem(xt.ACCOUNT_KEYS);return e?JSON.parse(e):(this.logger.verbose("BrowserCacheManager.getAccountKeys - No account keys found"),[])}addAccountKeyToMap(e,t){this.logger.trace("BrowserCacheManager.addAccountKeyToMap called"),this.logger.tracePii(`BrowserCacheManager.addAccountKeyToMap called with key: ${e}`);let r=this.getAccountKeys();r.indexOf(e)===-1?(r.push(e),this.setItem(xt.ACCOUNT_KEYS,JSON.stringify(r),t),this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key added")):this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key already exists in map")}removeAccountKeyFromMap(e,t){this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap called"),this.logger.tracePii(`BrowserCacheManager.removeAccountKeyFromMap called with key: ${e}`);let r=this.getAccountKeys(),o=r.indexOf(e);if(o>-1){if(r.splice(o,1),r.length===0){this.removeItem(xt.ACCOUNT_KEYS);return}else this.setItem(xt.ACCOUNT_KEYS,JSON.stringify(r),t);this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap account key removed")}else this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap key not found in existing map")}removeAccount(e,t){return h(this,null,function*(){Pl(n.prototype,this,"removeAccount").call(this,e,t),this.removeAccountKeyFromMap(e,t)})}removeOutdatedAccount(e,t){this.removeItem(e),this.removeAccountKeyFromMap(e,t)}removeIdToken(e,t){super.removeIdToken(e,t),this.removeTokenKey(e,F.ID_TOKEN,t)}removeAccessToken(e,t,r=!0){super.removeAccessToken(e,t),this.performanceClient?.incrementFields({accessTokensRemoved:1},t),r&&this.removeTokenKey(e,F.ACCESS_TOKEN,t)}removeAccessTokenKeys(e,t){this.logger.trace("removeAccessTokenKey called");let r=this.getTokenKeys(),o=0;if(e.forEach(i=>{let s=r.accessToken.indexOf(i);s>-1&&(r.accessToken.splice(s,1),o++)}),o>0){this.logger.info(`removed ${o} accessToken keys from tokenKeys map`),this.setTokenKeys(r,t);return}}removeRefreshToken(e,t){super.removeRefreshToken(e,t),this.removeTokenKey(e,F.REFRESH_TOKEN,t)}getTokenKeys(){this.logger.trace("BrowserCacheManager.getTokenKeys called");let e=this.getItem(`${xt.TOKEN_KEYS}.${this.clientId}`);if(e){let t=this.validateAndParseJson(e);if(t&&t.hasOwnProperty("idToken")&&t.hasOwnProperty("accessToken")&&t.hasOwnProperty("refreshToken"))return t;this.logger.error("BrowserCacheManager.getTokenKeys - Token keys found but in an unknown format. Returning empty key map.")}else this.logger.verbose("BrowserCacheManager.getTokenKeys - No token keys found");return{idToken:[],accessToken:[],refreshToken:[]}}setTokenKeys(e,t){if(e.idToken.length===0&&e.accessToken.length===0&&e.refreshToken.length===0){this.removeItem(`${xt.TOKEN_KEYS}.${this.clientId}`);return}else this.setItem(`${xt.TOKEN_KEYS}.${this.clientId}`,JSON.stringify(e),t)}addTokenKey(e,t,r){this.logger.trace("BrowserCacheManager addTokenKey called");let o=this.getTokenKeys();switch(t){case F.ID_TOKEN:o.idToken.indexOf(e)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - idToken added to map"),o.idToken.push(e));break;case F.ACCESS_TOKEN:let i=o.accessToken.indexOf(e);i!==-1&&o.accessToken.splice(i,1),this.logger.trace(`access token ${i===-1?"added to":"updated in"} map`),o.accessToken.push(e);break;case F.REFRESH_TOKEN:o.refreshToken.indexOf(e)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - refreshToken added to map"),o.refreshToken.push(e));break;default:throw this.logger.error(`BrowserCacheManager:addTokenKey - CredentialType provided invalid. CredentialType: ${t}`),v(Fe.unexpectedCredentialType)}this.setTokenKeys(o,r)}removeTokenKey(e,t,r,o=this.getTokenKeys()){switch(this.logger.trace("BrowserCacheManager removeTokenKey called"),t){case F.ID_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove idToken with key: ${e} from map`);let i=o.idToken.indexOf(e);i>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - idToken removed from map"),o.idToken.splice(i,1)):this.logger.info("BrowserCacheManager: removeTokenKey - idToken does not exist in map. Either it was previously removed or it was never added.");break;case F.ACCESS_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove accessToken with key: ${e} from map`);let s=o.accessToken.indexOf(e);s>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - accessToken removed from map"),o.accessToken.splice(s,1)):this.logger.info("BrowserCacheManager: removeTokenKey - accessToken does not exist in map. Either it was previously removed or it was never added.");break;case F.REFRESH_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove refreshToken with key: ${e} from map`);let a=o.refreshToken.indexOf(e);a>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken removed from map"),o.refreshToken.splice(a,1)):this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken does not exist in map. Either it was previously removed or it was never added.");break;default:throw this.logger.error(`BrowserCacheManager:removeTokenKey - CredentialType provided invalid. CredentialType: ${t}`),v(Fe.unexpectedCredentialType)}this.setTokenKeys(o,r)}getIdTokenCredential(e,t){let r=this.getItem(e);if(!r)return this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeIdToken(e,t),null;let o=this.validateAndParseJson(r);return!o||!he.isIdTokenEntity(o)?(this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getIdTokenCredential: cache hit"),o)}setIdTokenCredential(e,t){this.logger.trace("BrowserCacheManager.setIdTokenCredential called");let r=he.generateCredentialKey(e);e.lastUpdatedAt=Date.now().toString(),this.setItem(r,JSON.stringify(e),t),this.addTokenKey(r,F.ID_TOKEN,t)}getAccessTokenCredential(e,t){let r=this.getItem(e);if(!r)return this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeTokenKey(e,F.ACCESS_TOKEN,t),null;let o=this.validateAndParseJson(r);return!o||!he.isAccessTokenEntity(o)?(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: cache hit"),o)}setAccessTokenCredential(e,t){this.logger.trace("BrowserCacheManager.setAccessTokenCredential called");let r=he.generateCredentialKey(e);e.lastUpdatedAt=Date.now().toString(),this.setItem(r,JSON.stringify(e),t),this.addTokenKey(r,F.ACCESS_TOKEN,t)}getRefreshTokenCredential(e,t){let r=this.getItem(e);if(!r)return this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeTokenKey(e,F.REFRESH_TOKEN,t),null;let o=this.validateAndParseJson(r);return!o||!he.isRefreshTokenEntity(o)?(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: cache hit"),o)}setRefreshTokenCredential(e,t){this.logger.trace("BrowserCacheManager.setRefreshTokenCredential called");let r=he.generateCredentialKey(e);e.lastUpdatedAt=Date.now().toString(),this.setItem(r,JSON.stringify(e),t),this.addTokenKey(r,F.REFRESH_TOKEN,t)}getAppMetadata(e){let t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null;let r=this.validateAndParseJson(t);return!r||!he.isAppMetadataEntity(e,r)?(this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getAppMetadata: cache hit"),r)}setAppMetadata(e,t){this.logger.trace("BrowserCacheManager.setAppMetadata called");let r=he.generateAppMetadataKey(e);this.setItem(r,JSON.stringify(e),t)}getServerTelemetry(e){let t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null;let r=this.validateAndParseJson(t);return!r||!he.isServerTelemetryEntity(e,r)?(this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getServerTelemetry: cache hit"),r)}setServerTelemetry(e,t,r){this.logger.trace("BrowserCacheManager.setServerTelemetry called"),this.setItem(e,JSON.stringify(t),r)}getAuthorityMetadata(e){let t=this.internalStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAuthorityMetadata: called, no cache hit"),null;let r=this.validateAndParseJson(t);return r&&he.isAuthorityMetadataEntity(e,r)?(this.logger.trace("BrowserCacheManager.getAuthorityMetadata: cache hit"),r):null}getAuthorityMetadataKeys(){return this.internalStorage.getKeys().filter(t=>this.isAuthorityMetadata(t))}setWrapperMetadata(e,t){this.internalStorage.setItem(Tl.WRAPPER_SKU,e),this.internalStorage.setItem(Tl.WRAPPER_VER,t)}getWrapperMetadata(){let e=this.internalStorage.getItem(Tl.WRAPPER_SKU)||y.EMPTY_STRING,t=this.internalStorage.getItem(Tl.WRAPPER_VER)||y.EMPTY_STRING;return[e,t]}setAuthorityMetadata(e,t){this.logger.trace("BrowserCacheManager.setAuthorityMetadata called"),this.internalStorage.setItem(e,JSON.stringify(t))}getActiveAccount(e){let t=this.generateCacheKey(De.ACTIVE_ACCOUNT_FILTERS),r=this.getItem(t);if(!r){this.logger.trace("BrowserCacheManager.getActiveAccount: No active account filters cache schema found, looking for legacy schema");let i=this.generateCacheKey(De.ACTIVE_ACCOUNT),s=this.getItem(i);if(!s)return this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null;let a=this.getAccountInfoFilteredBy({localAccountId:s},e);return a?(this.logger.trace("BrowserCacheManager.getActiveAccount: Legacy active account cache schema found"),this.logger.trace("BrowserCacheManager.getActiveAccount: Adding active account filters cache schema"),this.setActiveAccount(a,e),a):null}let o=this.validateAndParseJson(r);return o?(this.logger.trace("BrowserCacheManager.getActiveAccount: Active account filters schema found"),this.getAccountInfoFilteredBy({homeAccountId:o.homeAccountId,localAccountId:o.localAccountId,tenantId:o.tenantId},e)):(this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null)}setActiveAccount(e,t){let r=this.generateCacheKey(De.ACTIVE_ACCOUNT_FILTERS),o=this.generateCacheKey(De.ACTIVE_ACCOUNT);if(e){this.logger.verbose("setActiveAccount: Active account set");let i={homeAccountId:e.homeAccountId,localAccountId:e.localAccountId,tenantId:e.tenantId,lastUpdatedAt:Date.now().toString()};this.setItem(r,JSON.stringify(i),t),this.setItem(o,e.localAccountId,t)}else this.logger.verbose("setActiveAccount: No account passed, active account not set"),this.browserStorage.removeItem(r),this.browserStorage.removeItem(o)}getThrottlingCache(e){let t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null;let r=this.validateAndParseJson(t);return!r||!he.isThrottlingEntity(e,r)?(this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getThrottlingCache: cache hit"),r)}setThrottlingCache(e,t,r){this.logger.trace("BrowserCacheManager.setThrottlingCache called"),this.setItem(e,JSON.stringify(t),r)}getTemporaryCache(e,t){let r=t?this.generateCacheKey(e):e;if(this.cacheConfig.storeAuthStateInCookie){let i=this.cookieStorage.getItem(r);if(i)return this.logger.trace("BrowserCacheManager.getTemporaryCache: storeAuthStateInCookies set to true, retrieving from cookies"),i}let o=this.temporaryCacheStorage.getItem(r);if(!o){if(this.cacheConfig.cacheLocation===Se.LocalStorage){let i=this.browserStorage.getItem(r);if(i)return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item found in local storage"),i}return this.logger.trace("BrowserCacheManager.getTemporaryCache: No cache item found in local storage"),null}return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item returned"),o}setTemporaryCache(e,t,r){let o=r?this.generateCacheKey(e):e;this.temporaryCacheStorage.setItem(o,t),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.setTemporaryCache: storeAuthStateInCookie set to true, setting item cookie"),this.cookieStorage.setItem(o,t,void 0,this.cacheConfig.secureCookies))}removeItem(e){this.browserStorage.removeItem(e)}removeTemporaryItem(e){this.temporaryCacheStorage.removeItem(e),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.removeItem: storeAuthStateInCookie is true, clearing item cookie"),this.cookieStorage.removeItem(e))}getKeys(){return this.browserStorage.getKeys()}clear(e){return h(this,null,function*(){yield this.removeAllAccounts(e),this.removeAppMetadata(e),this.temporaryCacheStorage.getKeys().forEach(t=>{(t.indexOf(y.CACHE_PREFIX)!==-1||t.indexOf(this.clientId)!==-1)&&this.removeTemporaryItem(t)}),this.browserStorage.getKeys().forEach(t=>{(t.indexOf(y.CACHE_PREFIX)!==-1||t.indexOf(this.clientId)!==-1)&&this.browserStorage.removeItem(t)}),this.internalStorage.clear()})}clearTokensAndKeysWithClaims(e,t){return h(this,null,function*(){e.addQueueMeasurement(d.ClearTokensAndKeysWithClaims,t);let r=this.getTokenKeys(),o=0;r.accessToken.forEach(i=>{let s=this.getAccessTokenCredential(i,t);s?.requestedClaimsHash&&i.includes(s.requestedClaimsHash.toLowerCase())&&(this.removeAccessToken(i,t),o++)}),o>0&&this.logger.warning(`${o} access tokens with claims in the cache keys have been removed from the cache.`)})}generateCacheKey(e){return this.validateAndParseJson(e)?JSON.stringify(e):Ee.startsWith(e,y.CACHE_PREFIX)||Ee.startsWith(e,De.ADAL_ID_TOKEN)?e:`${y.CACHE_PREFIX}.${this.clientId}.${e}`}generateAuthorityKey(e){let{libraryState:{id:t}}=He.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey(`${re.AUTHORITY}.${t}`)}generateNonceKey(e){let{libraryState:{id:t}}=He.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey(`${re.NONCE_IDTOKEN}.${t}`)}generateStateKey(e){let{libraryState:{id:t}}=He.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey(`${re.REQUEST_STATE}.${t}`)}getCachedAuthority(e){let t=this.generateStateKey(e),r=this.getTemporaryCache(t);if(!r)return null;let o=this.generateAuthorityKey(r);return this.getTemporaryCache(o)}updateCacheEntries(e,t,r,o,i){this.logger.trace("BrowserCacheManager.updateCacheEntries called");let s=this.generateStateKey(e);this.setTemporaryCache(s,e,!1);let a=this.generateNonceKey(e);this.setTemporaryCache(a,t,!1);let c=this.generateAuthorityKey(e);if(this.setTemporaryCache(c,r,!1),i){let l={credential:i.homeAccountId,type:Ue.HOME_ACCOUNT_ID};this.setTemporaryCache(re.CCS_CREDENTIAL,JSON.stringify(l),!0)}else if(o){let l={credential:o,type:Ue.UPN};this.setTemporaryCache(re.CCS_CREDENTIAL,JSON.stringify(l),!0)}}resetRequestCache(e){this.logger.trace("BrowserCacheManager.resetRequestCache called"),e&&(this.temporaryCacheStorage.getKeys().forEach(t=>{t.indexOf(e)!==-1&&this.removeTemporaryItem(t)}),this.removeTemporaryItem(this.generateStateKey(e)),this.removeTemporaryItem(this.generateNonceKey(e)),this.removeTemporaryItem(this.generateAuthorityKey(e))),this.removeTemporaryItem(this.generateCacheKey(re.REQUEST_PARAMS)),this.removeTemporaryItem(this.generateCacheKey(re.ORIGIN_URI)),this.removeTemporaryItem(this.generateCacheKey(re.URL_HASH)),this.removeTemporaryItem(this.generateCacheKey(re.CORRELATION_ID)),this.removeTemporaryItem(this.generateCacheKey(re.CCS_CREDENTIAL)),this.removeTemporaryItem(this.generateCacheKey(re.NATIVE_REQUEST)),this.setInteractionInProgress(!1)}cleanRequestByState(e){if(this.logger.trace("BrowserCacheManager.cleanRequestByState called"),e){let t=this.generateStateKey(e),r=this.temporaryCacheStorage.getItem(t);this.logger.infoPii(`BrowserCacheManager.cleanRequestByState: Removing temporary cache items for state: ${r}`),this.resetRequestCache(r||y.EMPTY_STRING)}}cleanRequestByInteractionType(e){this.logger.trace("BrowserCacheManager.cleanRequestByInteractionType called"),this.temporaryCacheStorage.getKeys().forEach(t=>{if(t.indexOf(re.REQUEST_STATE)===-1)return;let r=this.temporaryCacheStorage.getItem(t);if(!r)return;let o=Jf(this.cryptoImpl,r);o&&o.interactionType===e&&(this.logger.infoPii(`BrowserCacheManager.cleanRequestByInteractionType: Removing temporary cache items for state: ${r}`),this.resetRequestCache(r))}),this.setInteractionInProgress(!1)}cacheCodeRequest(e){this.logger.trace("BrowserCacheManager.cacheCodeRequest called");let t=wl(JSON.stringify(e));this.setTemporaryCache(re.REQUEST_PARAMS,t,!0)}getCachedRequest(e){this.logger.trace("BrowserCacheManager.getCachedRequest called");let t=this.getTemporaryCache(re.REQUEST_PARAMS,!0);if(!t)throw T(js);let r;try{r=JSON.parse(St(t))}catch(o){throw this.logger.errorPii(`Attempted to parse: ${t}`),this.logger.error(`Parsing cached token request threw with error: ${o}`),T(Vs)}if(this.removeTemporaryItem(this.generateCacheKey(re.REQUEST_PARAMS)),!r.authority){let o=this.generateAuthorityKey(e),i=this.getTemporaryCache(o);if(!i)throw T(eo);r.authority=i}return r}getCachedNativeRequest(){this.logger.trace("BrowserCacheManager.getCachedNativeRequest called");let e=this.getTemporaryCache(re.NATIVE_REQUEST,!0);if(!e)return this.logger.trace("BrowserCacheManager.getCachedNativeRequest: No cached native request found"),null;let t=this.validateAndParseJson(e);return t||(this.logger.error("BrowserCacheManager.getCachedNativeRequest: Unable to parse native request"),null)}isInteractionInProgress(e){let t=this.getInteractionInProgress();return e?t===this.clientId:!!t}getInteractionInProgress(){let e=`${y.CACHE_PREFIX}.${re.INTERACTION_STATUS_KEY}`;return this.getTemporaryCache(e,!1)}setInteractionInProgress(e){let t=`${y.CACHE_PREFIX}.${re.INTERACTION_STATUS_KEY}`;if(e){if(this.getInteractionInProgress())throw T(Os);this.setTemporaryCache(t,this.clientId,!1)}else!e&&this.getInteractionInProgress()===this.clientId&&this.removeTemporaryItem(t)}getLegacyLoginHint(){let e=this.getTemporaryCache(De.ADAL_ID_TOKEN);e&&(this.browserStorage.removeItem(De.ADAL_ID_TOKEN),this.logger.verbose("Cached ADAL id token retrieved."));let t=this.getTemporaryCache(De.ID_TOKEN,!0);t&&(this.browserStorage.removeItem(this.generateCacheKey(De.ID_TOKEN)),this.logger.verbose("Cached MSAL.js v1 id token retrieved"));let r=t||e;if(r){let o=Gr.extractTokenClaims(r,St);if(o.preferred_username)return this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, setting ADAL/MSAL v1 preferred_username as loginHint"),o.preferred_username;if(o.upn)return this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, setting ADAL/MSAL v1 upn as loginHint"),o.upn;this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, however, no account hint claim found. Enable preferred_username or upn id token claim to get SSO.")}return null}updateCredentialCacheKey(e,t,r){let o=he.generateCredentialKey(t);if(e!==o){let i=this.getItem(e);if(i)return this.browserStorage.removeItem(e),this.setItem(o,i,r),this.logger.verbose(`Updated an outdated ${t.credentialType} cache key`),o;this.logger.error(`Attempted to update an outdated ${t.credentialType} cache key but no item matching the outdated key was found in storage`)}return e}hydrateCache(e,t){return h(this,null,function*(){let r=he.createIdTokenEntity(e.account?.homeAccountId,e.account?.environment,e.idToken,this.clientId,e.tenantId),o;t.claims&&(o=yield this.cryptoImpl.hashString(t.claims));let i=he.createAccessTokenEntity(e.account?.homeAccountId,e.account.environment,e.accessToken,this.clientId,e.tenantId,e.scopes.join(" "),e.expiresOn?e.expiresOn.getTime()/1e3:0,e.extExpiresOn?e.extExpiresOn.getTime()/1e3:0,St,void 0,e.tokenType,void 0,t.sshKid,t.claims,o),s={idToken:r,accessToken:i};return this.saveCacheRecord(s,e.correlationId)})}saveCacheRecord(e,t,r){return h(this,null,function*(){try{yield Pl(n.prototype,this,"saveCacheRecord").call(this,e,t,r)}catch(o){if(o instanceof Wr&&this.performanceClient&&t)try{let i=this.getTokenKeys();this.performanceClient.addFields({cacheRtCount:i.refreshToken.length,cacheIdCount:i.idToken.length,cacheAtCount:i.accessToken.length},t)}catch{}throw o}})}},iw=(n,e)=>{let t={cacheLocation:Se.MemoryStorage,temporaryCacheLocation:Se.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};return new ia(n,t,$r,e)};function sw(n,e,t,r,o){return n.verbose("getAllAccounts called"),t?e.getAllAccounts(r,o):[]}function aw(n,e,t,r){if(e.trace("getAccount called"),Object.keys(n).length===0)return e.warning("getAccount: No accountFilter provided"),null;let o=t.getAccountInfoFilteredBy(n,r);return o?(e.verbose("getAccount: Account matching provided filter found, returning"),o):(e.verbose("getAccount: No matching account found, returning null"),null)}function cw(n,e,t,r){if(e.trace("getAccountByUsername called"),!n)return e.warning("getAccountByUsername: No username provided"),null;let o=t.getAccountInfoFilteredBy({username:n},r);return o?(e.verbose("getAccountByUsername: Account matching username found, returning"),e.verbosePii(`getAccountByUsername: Returning signed-in accounts matching username: ${n}`),o):(e.verbose("getAccountByUsername: No matching account found, returning null"),null)}function lw(n,e,t,r){if(e.trace("getAccountByHomeId called"),!n)return e.warning("getAccountByHomeId: No homeAccountId provided"),null;let o=t.getAccountInfoFilteredBy({homeAccountId:n},r);return o?(e.verbose("getAccountByHomeId: Account matching homeAccountId found, returning"),e.verbosePii(`getAccountByHomeId: Returning signed-in accounts matching homeAccountId: ${n}`),o):(e.verbose("getAccountByHomeId: No matching account found, returning null"),null)}function uw(n,e,t,r){if(e.trace("getAccountByLocalId called"),!n)return e.warning("getAccountByLocalId: No localAccountId provided"),null;let o=t.getAccountInfoFilteredBy({localAccountId:n},r);return o?(e.verbose("getAccountByLocalId: Account matching localAccountId found, returning"),e.verbosePii(`getAccountByLocalId: Returning signed-in accounts matching localAccountId: ${n}`),o):(e.verbose("getAccountByLocalId: No matching account found, returning null"),null)}function dw(n,e,t){e.setActiveAccount(n,t)}function fw(n,e){return n.getActiveAccount(e)}var R={INITIALIZE_START:"msal:initializeStart",INITIALIZE_END:"msal:initializeEnd",ACCOUNT_ADDED:"msal:accountAdded",ACCOUNT_REMOVED:"msal:accountRemoved",ACTIVE_ACCOUNT_CHANGED:"msal:activeAccountChanged",LOGIN_START:"msal:loginStart",LOGIN_SUCCESS:"msal:loginSuccess",LOGIN_FAILURE:"msal:loginFailure",ACQUIRE_TOKEN_START:"msal:acquireTokenStart",ACQUIRE_TOKEN_SUCCESS:"msal:acquireTokenSuccess",ACQUIRE_TOKEN_FAILURE:"msal:acquireTokenFailure",ACQUIRE_TOKEN_NETWORK_START:"msal:acquireTokenFromNetworkStart",SSO_SILENT_START:"msal:ssoSilentStart",SSO_SILENT_SUCCESS:"msal:ssoSilentSuccess",SSO_SILENT_FAILURE:"msal:ssoSilentFailure",ACQUIRE_TOKEN_BY_CODE_START:"msal:acquireTokenByCodeStart",ACQUIRE_TOKEN_BY_CODE_SUCCESS:"msal:acquireTokenByCodeSuccess",ACQUIRE_TOKEN_BY_CODE_FAILURE:"msal:acquireTokenByCodeFailure",HANDLE_REDIRECT_START:"msal:handleRedirectStart",HANDLE_REDIRECT_END:"msal:handleRedirectEnd",POPUP_OPENED:"msal:popupOpened",LOGOUT_START:"msal:logoutStart",LOGOUT_SUCCESS:"msal:logoutSuccess",LOGOUT_FAILURE:"msal:logoutFailure",LOGOUT_END:"msal:logoutEnd",RESTORE_FROM_BFCACHE:"msal:restoreFromBFCache"};var Xf=class{constructor(e){this.eventCallbacks=new Map,this.logger=e||new It({})}addEventCallback(e,t,r){if(typeof window<"u"){let o=r||Ky();return this.eventCallbacks.has(o)?(this.logger.error(`Event callback with id: ${o} is already registered. Please provide a unique id or remove the existing callback and try again.`),null):(this.eventCallbacks.set(o,[e,t||[]]),this.logger.verbose(`Event callback registered with id: ${o}`),o)}return null}removeEventCallback(e){this.eventCallbacks.delete(e),this.logger.verbose(`Event callback ${e} removed.`)}emitEvent(e,t,r,o){if(typeof window<"u"){let i={eventType:e,interactionType:t||null,payload:r||null,error:o||null,timestamp:Date.now()};this.eventCallbacks.forEach(([s,a],c)=>{(a.length===0||a.includes(e))&&(this.logger.verbose(`Emitting event to callback ${c}: ${e}`),s.apply(null,[i]))})}}};var sa=class{constructor(e,t,r,o,i,s,a,c,l){this.config=e,this.browserStorage=t,this.browserCrypto=r,this.networkClient=this.config.system.networkClient,this.eventHandler=i,this.navigationClient=s,this.nativeMessageHandler=c,this.correlationId=l||Ze(),this.logger=o.clone(be.MSAL_SKU,fn,this.correlationId),this.performanceClient=a}clearCacheOnLogout(e){return h(this,null,function*(){if(e){ge.accountInfoIsEqual(e,this.browserStorage.getActiveAccount(this.correlationId),!1)&&(this.logger.verbose("Setting active account to null"),this.browserStorage.setActiveAccount(null,this.correlationId));try{yield this.browserStorage.removeAccount(ge.generateAccountCacheKey(e),this.correlationId),this.logger.verbose("Cleared cache items belonging to the account provided in the logout request.")}catch{this.logger.error("Account provided in logout request was not found. Local cache unchanged.")}}else try{this.logger.verbose("No account provided in logout request, clearing all cache items.",this.correlationId),yield this.browserStorage.clear(this.correlationId),yield this.browserCrypto.clearKeystore()}catch{this.logger.error("Attempted to clear all MSAL cache items and failed. Local cache unchanged.")}})}getRedirectUri(e){this.logger.verbose("getRedirectUri called");let t=e||this.config.auth.redirectUri;return j.getAbsoluteUrl(t,gt())}initializeServerTelemetryManager(e,t){this.logger.verbose("initializeServerTelemetryManager called");let r={clientId:this.config.auth.clientId,correlationId:this.correlationId,apiId:e,forceRefresh:t||!1,wrapperSKU:this.browserStorage.getWrapperMetadata()[0],wrapperVer:this.browserStorage.getWrapperMetadata()[1]};return new Ti(r,this.browserStorage)}getDiscoveredAuthority(e){return h(this,null,function*(){let{account:t}=e,r=e.requestExtraQueryParameters&&e.requestExtraQueryParameters.hasOwnProperty("instance_aware")?e.requestExtraQueryParameters.instance_aware:void 0;this.performanceClient.addQueueMeasurement(d.StandardInteractionClientGetDiscoveredAuthority,this.correlationId);let o={protocolMode:this.config.auth.protocolMode,OIDCOptions:this.config.auth.OIDCOptions,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},i=e.requestAuthority||this.config.auth.authority,s=r?.length?r==="true":this.config.auth.instanceAware,a=t&&s?this.config.auth.authority.replace(j.getDomainFromUrl(i),t.environment):i,c=Wt.generateAuthority(a,e.requestAzureCloudOptions||this.config.auth.azureCloudOptions),l=yield C(Cf.createDiscoveredInstance,d.AuthorityFactoryCreateDiscoveredInstance,this.logger,this.performanceClient,this.correlationId)(c,this.config.system.networkClient,this.browserStorage,o,this.logger,this.correlationId,this.performanceClient);if(t&&!l.isAlias(t.environment))throw J(dn.authorityMismatch);return l})}};var nO=32;function hw(n,e,t){return h(this,null,function*(){n.addQueueMeasurement(d.GeneratePkceCodes,t);let r=ft(rO,d.GenerateCodeVerifier,e,n,t)(n,e,t),o=yield C(oO,d.GenerateCodeChallengeFromVerifier,e,n,t)(r,n,e,t);return{verifier:r,challenge:o}})}function rO(n,e,t){try{let r=new Uint8Array(nO);return ft(GS,d.GetRandomValues,e,n,t)(r),Di(r)}catch{throw T(Si)}}function oO(n,e,t,r){return h(this,null,function*(){e.addQueueMeasurement(d.GenerateCodeChallengeFromVerifier,r);try{let o=yield C($y,d.Sha256Digest,t,e,r)(n,e,r);return Di(new Uint8Array(o))}catch{throw T(Si)}})}function Rl(n,e,t,r){return h(this,null,function*(){t.addQueueMeasurement(d.InitializeBaseRequest,n.correlationId);let o=n.authority||e.auth.authority,i=[...n&&n.scopes||[]],s=A(m({},n),{correlationId:n.correlationId,authority:o,scopes:i});if(!s.authenticationScheme)s.authenticationScheme=Q.BEARER,r.verbose(`Authentication Scheme wasn't explicitly set in request, defaulting to "Bearer" request`);else{if(s.authenticationScheme===Q.SSH){if(!n.sshJwk)throw J(dn.missingSshJwk);if(!n.sshKid)throw J(dn.missingSshKid)}r.verbose(`Authentication Scheme set to "${s.authenticationScheme}" as configured in Auth request`)}return e.cache.claimsBasedCachingEnabled&&n.claims&&!Ee.isEmptyObj(n.claims)&&(s.requestedClaimsHash=yield Lf(n.claims)),s})}function pw(n,e,t,r,o){return h(this,null,function*(){r.addQueueMeasurement(d.InitializeSilentRequest,n.correlationId);let i=yield C(Rl,d.InitializeBaseRequest,o,r,n.correlationId)(n,t,r,o);return A(m(m({},n),i),{account:e,forceRefresh:n.forceRefresh||!1})})}var wt=class extends sa{initializeAuthorizationCodeRequest(e){return h(this,null,function*(){this.performanceClient.addQueueMeasurement(d.StandardInteractionClientInitializeAuthorizationCodeRequest,this.correlationId);let t=yield C(hw,d.GeneratePkceCodes,this.logger,this.performanceClient,this.correlationId)(this.performanceClient,this.logger,this.correlationId),r=A(m({},e),{redirectUri:e.redirectUri,code:y.EMPTY_STRING,codeVerifier:t.verifier});return e.codeChallenge=t.challenge,e.codeChallengeMethod=y.S256_CODE_CHALLENGE_METHOD,r})}initializeLogoutRequest(e){this.logger.verbose("initializeLogoutRequest called",e?.correlationId);let t=m({correlationId:this.correlationId||Ze()},e);if(e)if(e.logoutHint)this.logger.verbose("logoutHint has already been set in logoutRequest");else if(e.account){let r=this.getLogoutHintFromIdTokenClaims(e.account);r&&(this.logger.verbose("Setting logoutHint to login_hint ID Token Claim value for the account provided"),t.logoutHint=r)}else this.logger.verbose("logoutHint was not set and account was not passed into logout request, logoutHint will not be set");else this.logger.verbose("logoutHint will not be set since no logout request was configured");return!e||e.postLogoutRedirectUri!==null?e&&e.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to uri set on logout request",t.correlationId),t.postLogoutRedirectUri=j.getAbsoluteUrl(e.postLogoutRedirectUri,gt())):this.config.auth.postLogoutRedirectUri===null?this.logger.verbose("postLogoutRedirectUri configured as null and no uri set on request, not passing post logout redirect",t.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to configured uri",t.correlationId),t.postLogoutRedirectUri=j.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,gt())):(this.logger.verbose("Setting postLogoutRedirectUri to current page",t.correlationId),t.postLogoutRedirectUri=j.getAbsoluteUrl(gt(),gt())):this.logger.verbose("postLogoutRedirectUri passed as null, not setting post logout redirect uri",t.correlationId),t}getLogoutHintFromIdTokenClaims(e){let t=e.idTokenClaims;if(t){if(t.login_hint)return t.login_hint;this.logger.verbose("The ID Token Claims tied to the provided account do not contain a login_hint claim, logoutHint will not be added to logout request")}else this.logger.verbose("The provided account does not contain ID Token Claims, logoutHint will not be added to logout request");return null}createAuthCodeClient(e){return h(this,null,function*(){this.performanceClient.addQueueMeasurement(d.StandardInteractionClientCreateAuthCodeClient,this.correlationId);let t=yield C(this.getClientConfiguration.bind(this),d.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)(e);return new Ii(t,this.performanceClient)})}getClientConfiguration(e){return h(this,null,function*(){let{serverTelemetryManager:t,requestAuthority:r,requestAzureCloudOptions:o,requestExtraQueryParameters:i,account:s}=e;this.performanceClient.addQueueMeasurement(d.StandardInteractionClientGetClientConfiguration,this.correlationId);let a=yield C(this.getDiscoveredAuthority.bind(this),d.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,this.correlationId)({requestAuthority:r,requestAzureCloudOptions:o,requestExtraQueryParameters:i,account:s}),c=this.config.system.loggerOptions;return{authOptions:{clientId:this.config.auth.clientId,authority:a,clientCapabilities:this.config.auth.clientCapabilities,redirectUri:this.config.auth.redirectUri},systemOptions:{tokenRenewalOffsetSeconds:this.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:c.loggerCallback,piiLoggingEnabled:c.piiLoggingEnabled,logLevel:c.logLevel,correlationId:this.correlationId},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.browserCrypto,networkInterface:this.networkClient,storageInterface:this.browserStorage,serverTelemetryManager:t,libraryInfo:{sku:be.MSAL_SKU,version:fn,cpu:y.EMPTY_STRING,os:y.EMPTY_STRING},telemetry:this.config.telemetry}})}initializeAuthorizationRequest(e,t){return h(this,null,function*(){this.performanceClient.addQueueMeasurement(d.StandardInteractionClientInitializeAuthorizationRequest,this.correlationId);let r=this.getRedirectUri(e.redirectUri),o={interactionType:t},i=He.setRequestState(this.browserCrypto,e&&e.state||y.EMPTY_STRING,o),s=yield C(Rl,d.InitializeBaseRequest,this.logger,this.performanceClient,this.correlationId)(A(m({},e),{correlationId:this.correlationId}),this.config,this.performanceClient,this.logger),a=A(m({},s),{redirectUri:r,state:i,nonce:e.nonce||Ze(),responseMode:this.config.auth.OIDCOptions.serverResponseType});if(e.loginHint||e.sid)return a;let c=e.account||this.browserStorage.getActiveAccount(this.correlationId);if(c&&(this.logger.verbose("Setting validated request account",this.correlationId),this.logger.verbosePii(`Setting validated request account: ${c.homeAccountId}`,this.correlationId),a.account=c),!a.loginHint&&!c){let l=this.browserStorage.getLegacyLoginHint();l&&(a.loginHint=l)}return a})}};var gw="ContentError",eh="user_switch";var mw="USER_INTERACTION_REQUIRED",yw="USER_CANCEL",vw="NO_NETWORK",Cw="PERSISTENT_ERROR",Ew="DISABLED",Iw="ACCOUNT_UNAVAILABLE";var iO=-2147186943,sO={[eh]:"User attempted to switch accounts in the native broker, which is not allowed. All new accounts must sign-in through the standard web flow first, please try again."},Qt=class n extends ${constructor(e,t,r){super(e,t),Object.setPrototypeOf(this,n.prototype),this.name="NativeAuthError",this.ext=r}};function io(n){if(n.ext&&n.ext.status&&(n.ext.status===Cw||n.ext.status===Ew)||n.ext&&n.ext.error&&n.ext.error===iO)return!0;switch(n.errorCode){case gw:return!0;default:return!1}}function Ml(n,e,t){if(t&&t.status)switch(t.status){case Iw:return _s(dr.nativeAccountUnavailable);case mw:return new Je(n,e);case yw:return T(Tt);case vw:return T(fr)}return new Qt(n,sO[n]||e,t)}var aa=class extends wt{acquireToken(e){return h(this,null,function*(){this.performanceClient.addQueueMeasurement(d.SilentCacheClientAcquireToken,e.correlationId);let t=this.initializeServerTelemetryManager(ie.acquireTokenSilent_silentFlow),r=yield C(this.getClientConfiguration.bind(this),d.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:t,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,account:e.account}),o=new El(r,this.performanceClient);this.logger.verbose("Silent auth client created");try{let s=(yield C(o.acquireCachedToken.bind(o),d.SilentFlowClientAcquireCachedToken,this.logger,this.performanceClient,e.correlationId)(e))[0];return this.performanceClient.addFields({fromCache:!0},e.correlationId),s}catch(i){throw i instanceof _i&&i.errorCode===to&&this.logger.verbose("Signing keypair for bound access token not found. Refreshing bound access token and generating a new crypto keypair."),i}})}logout(e){this.logger.verbose("logoutRedirect called");let t=this.initializeLogoutRequest(e);return this.clearCacheOnLogout(t?.account)}};var Jt=class extends sa{constructor(e,t,r,o,i,s,a,c,l,u,f,g){super(e,t,r,o,i,s,c,l,g),this.apiId=a,this.accountId=u,this.nativeMessageHandler=l,this.nativeStorageManager=f,this.silentCacheClient=new aa(e,this.nativeStorageManager,r,o,i,s,c,l,g),this.serverTelemetryManager=this.initializeServerTelemetryManager(this.apiId);let p=this.nativeMessageHandler.getExtensionId()===ro.PREFERRED_EXTENSION_ID?"chrome":this.nativeMessageHandler.getExtensionId()?.length?"unknown":void 0;this.skus=Ti.makeExtraSkuString({libraryName:be.MSAL_SKU,libraryVersion:fn,extensionName:p,extensionVersion:this.nativeMessageHandler.getExtensionVersion()})}addRequestSKUs(e){e.extraParameters=A(m({},e.extraParameters),{[ur.X_CLIENT_EXTRA_SKU]:this.skus})}acquireToken(e){return h(this,null,function*(){this.performanceClient.addQueueMeasurement(d.NativeInteractionClientAcquireToken,e.correlationId),this.logger.trace("NativeInteractionClient - acquireToken called.");let t=this.performanceClient.startMeasurement(d.NativeInteractionClientAcquireToken,e.correlationId),r=nl.nowSeconds();try{let o=yield this.initializeNativeRequest(e);try{let l=yield this.acquireTokensFromCache(this.accountId,o);return t.end({success:!0,isNativeBroker:!1,fromCache:!0}),l}catch{this.logger.info("MSAL internal Cache does not contain tokens, proceed to make a native call")}let i=Un(o,[]),s={method:pr.GetToken,request:i},a=yield this.nativeMessageHandler.sendMessage(s),c=this.validateNativeResponse(a);return yield this.handleNativeResponse(c,o,r).then(l=>(t.end({success:!0,isNativeBroker:!0,requestId:l.requestId}),this.serverTelemetryManager.clearNativeBrokerErrorCode(),l)).catch(l=>{throw t.end({success:!1,errorCode:l.errorCode,subErrorCode:l.subError,isNativeBroker:!0}),l})}catch(o){throw o instanceof Qt&&this.serverTelemetryManager.setNativeBrokerErrorCode(o.errorCode),o}})}createSilentCacheRequest(e,t){return{authority:e.authority,correlationId:this.correlationId,scopes:ye.fromString(e.scope).asArray(),account:t,forceRefresh:!1}}acquireTokensFromCache(e,t){return h(this,null,function*(){if(!e)throw this.logger.warning("NativeInteractionClient:acquireTokensFromCache - No nativeAccountId provided"),v(Fe.noAccountFound);let r=this.browserStorage.getBaseAccountInfo({nativeAccountId:e},t.correlationId);if(!r)throw v(Fe.noAccountFound);try{let o=this.createSilentCacheRequest(t,r),i=yield this.silentCacheClient.acquireToken(o),s=A(m({},r),{idTokenClaims:i?.idTokenClaims,idToken:i?.idToken});return A(m({},i),{account:s})}catch(o){throw o}})}acquireTokenRedirect(e,t){return h(this,null,function*(){this.logger.trace("NativeInteractionClient - acquireTokenRedirect called.");let r=Un(e,[]);delete r.onRedirectNavigate;let o=yield this.initializeNativeRequest(r),i={method:pr.GetToken,request:o};try{let c=yield this.nativeMessageHandler.sendMessage(i);this.validateNativeResponse(c)}catch(c){if(c instanceof Qt&&(this.serverTelemetryManager.setNativeBrokerErrorCode(c.errorCode),io(c)))throw c}this.browserStorage.setTemporaryCache(re.NATIVE_REQUEST,JSON.stringify(o),!0);let s={apiId:ie.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},a=this.config.auth.navigateToLoginRequestUrl?window.location.href:this.getRedirectUri(e.redirectUri);t.end({success:!0}),yield this.navigationClient.navigateExternal(a,s)})}handleRedirectPromise(e,t){return h(this,null,function*(){if(this.logger.trace("NativeInteractionClient - handleRedirectPromise called."),!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;let r=this.browserStorage.getCachedNativeRequest();if(!r)return this.logger.verbose("NativeInteractionClient - handleRedirectPromise called but there is no cached request, returning null."),e&&t&&e?.addFields({errorCode:"no_cached_request"},t),null;let c=r,{prompt:o}=c,i=Un(c,["prompt"]);o&&this.logger.verbose("NativeInteractionClient - handleRedirectPromise called and prompt was included in the original request, removing prompt from cached request to prevent second interaction with native broker window."),this.browserStorage.removeItem(this.browserStorage.generateCacheKey(re.NATIVE_REQUEST));let s={method:pr.GetToken,request:i},a=nl.nowSeconds();try{this.logger.verbose("NativeInteractionClient - handleRedirectPromise sending message to native broker.");let l=yield this.nativeMessageHandler.sendMessage(s);this.validateNativeResponse(l);let u=this.handleNativeResponse(l,i,a);this.browserStorage.setInteractionInProgress(!1);let f=yield u;return this.serverTelemetryManager.clearNativeBrokerErrorCode(),f}catch(l){throw this.browserStorage.setInteractionInProgress(!1),l}})}logout(){return this.logger.trace("NativeInteractionClient - logout called."),Promise.reject("Logout not implemented yet")}handleNativeResponse(e,t,r){return h(this,null,function*(){this.logger.trace("NativeInteractionClient - handleNativeResponse called.");let o=Gr.extractTokenClaims(e.id_token,St),i=this.createHomeAccountIdentifier(e,o),s=this.browserStorage.getAccountInfoFilteredBy({nativeAccountId:t.accountId},this.correlationId)?.homeAccountId;if(i!==s&&e.account.id!==t.accountId)throw Ml(eh);let a=yield this.getDiscoveredAuthority({requestAuthority:t.authority}),c=Ds(this.browserStorage,a,i,St,this.correlationId,o,e.client_info,void 0,o.tid,void 0,e.account.id,this.logger),l=yield this.generateAuthenticationResult(e,t,o,c,a.canonicalAuthority,r);return this.cacheAccount(c),this.cacheNativeTokens(e,t,i,o,e.access_token,l.tenantId,r),l})}createHomeAccountIdentifier(e,t){return ge.generateHomeAccountId(e.client_info||y.EMPTY_STRING,dt.Default,this.logger,this.browserCrypto,t)}generateScopes(e,t){return e.scope?ye.fromString(e.scope):ye.fromString(t.scope)}generatePopAccessToken(e,t){return h(this,null,function*(){if(t.tokenType===Q.POP&&t.signPopToken){if(e.shr)return this.logger.trace("handleNativeServerResponse: SHR is enabled in native layer"),e.shr;let r=new Pt(this.browserCrypto),o={resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,shrNonce:t.shrNonce};if(!t.keyId)throw v(Fe.keyIdMissing);return r.signPopToken(e.access_token,t.keyId,o)}else return e.access_token})}generateAuthenticationResult(e,t,r,o,i,s){return h(this,null,function*(){let a=this.addTelemetryFromNativeResponse(e),c=e.scope?ye.fromString(e.scope):ye.fromString(t.scope),l=e.account.properties||{},u=l.UID||r.oid||r.sub||y.EMPTY_STRING,f=l.TenantId||r.tid||y.EMPTY_STRING,g=Ei(o.getAccountInfo(),void 0,r,e.id_token);g.nativeAccountId!==e.account.id&&(g.nativeAccountId=e.account.id);let p=yield this.generatePopAccessToken(e,t),I=t.tokenType===Q.POP?Q.POP:Q.BEARER;return{authority:i,uniqueId:u,tenantId:f,scopes:c.asArray(),account:g,idToken:e.id_token,idTokenClaims:r,accessToken:p,fromCache:a?this.isResponseFromCache(a):!1,expiresOn:new Date(Number(s+e.expires_in)*1e3),tokenType:I,correlationId:this.correlationId,state:e.state,fromNativeBroker:!0}})}cacheAccount(e){this.browserStorage.setAccount(e,this.correlationId),this.browserStorage.removeAccountContext(e,this.correlationId).catch(t=>{this.logger.error(`Error occurred while removing account context from browser storage. ${t}`)})}cacheNativeTokens(e,t,r,o,i,s,a){let c=he.createIdTokenEntity(r,t.authority,e.id_token||"",t.clientId,o.tid||""),l=t.tokenType===Q.POP?y.SHR_NONCE_VALIDITY:(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,u=a+l,f=this.generateScopes(e,t),g=he.createAccessTokenEntity(r,t.authority,i,t.clientId,o.tid||s,f.printScopes(),u,0,St,void 0,t.tokenType,void 0,t.keyId),p={idToken:c,accessToken:g};this.nativeStorageManager.saveCacheRecord(p,t.correlationId,t.storeInCache)}addTelemetryFromNativeResponse(e){let t=this.getMATSFromResponse(e);return t?(this.performanceClient.addFields({extensionId:this.nativeMessageHandler.getExtensionId(),extensionVersion:this.nativeMessageHandler.getExtensionVersion(),matsBrokerVersion:t.broker_version,matsAccountJoinOnStart:t.account_join_on_start,matsAccountJoinOnEnd:t.account_join_on_end,matsDeviceJoin:t.device_join,matsPromptBehavior:t.prompt_behavior,matsApiErrorCode:t.api_error_code,matsUiVisible:t.ui_visible,matsSilentCode:t.silent_code,matsSilentBiSubCode:t.silent_bi_sub_code,matsSilentMessage:t.silent_message,matsSilentStatus:t.silent_status,matsHttpStatus:t.http_status,matsHttpEventCount:t.http_event_count},this.correlationId),t):null}validateNativeResponse(e){if(e.hasOwnProperty("access_token")&&e.hasOwnProperty("id_token")&&e.hasOwnProperty("client_info")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scope")&&e.hasOwnProperty("expires_in"))return e;throw Hc(Go.unexpectedError,"Response missing expected properties.")}getMATSFromResponse(e){if(e.properties.MATS)try{return JSON.parse(e.properties.MATS)}catch{this.logger.error("NativeInteractionClient - Error parsing MATS telemetry, returning null instead")}return null}isResponseFromCache(e){return typeof e.is_cached>"u"?(this.logger.verbose("NativeInteractionClient - MATS telemetry does not contain field indicating if response was served from cache. Returning false."),!1):!!e.is_cached}initializeNativeRequest(e){return h(this,null,function*(){this.logger.trace("NativeInteractionClient - initializeNativeRequest called");let t=e.authority||this.config.auth.authority;e.account&&(yield this.getDiscoveredAuthority({requestAuthority:t,requestAzureCloudOptions:e.azureCloudOptions,account:e.account}));let r=new j(t);r.validateAsUri();let l=e,{scopes:o}=l,i=Un(l,["scopes"]),s=new ye(o||[]);s.appendScopes(kt);let a=()=>{switch(this.apiId){case ie.ssoSilent:case ie.acquireTokenSilent_silentFlow:return this.logger.trace("initializeNativeRequest: silent request sets prompt to none"),me.NONE}if(!e.prompt){this.logger.trace("initializeNativeRequest: prompt was not provided");return}switch(e.prompt){case me.NONE:case me.CONSENT:case me.LOGIN:return this.logger.trace("initializeNativeRequest: prompt is compatible with native flow"),e.prompt;default:throw this.logger.trace(`initializeNativeRequest: prompt = ${e.prompt} is not compatible with native flow`),T(Xs)}},c=A(m({},i),{accountId:this.accountId,clientId:this.config.auth.clientId,authority:r.urlString,scope:s.printScopes(),redirectUri:this.getRedirectUri(e.redirectUri),prompt:a(),correlationId:this.correlationId,tokenType:e.authenticationScheme,windowTitleSubstring:document.title,extraParameters:m(m({},e.extraQueryParameters),e.tokenQueryParameters),extendedExpiryToken:!1,keyId:e.popKid});if(c.signPopToken&&e.popKid)throw T(ta);if(this.handleExtraBrokerParams(c),c.extraParameters=c.extraParameters||{},c.extraParameters.telemetry=ro.MATS_TELEMETRY,e.authenticationScheme===Q.POP){let u={resourceRequestUri:e.resourceRequestUri,resourceRequestMethod:e.resourceRequestMethod,shrClaims:e.shrClaims,shrNonce:e.shrNonce},f=new Pt(this.browserCrypto),g;if(c.keyId)g=this.browserCrypto.base64UrlEncode(JSON.stringify({kid:c.keyId})),c.signPopToken=!1;else{let p=yield C(f.generateCnf.bind(f),d.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(u,this.logger);g=p.reqCnfString,c.keyId=p.kid,c.signPopToken=!0}c.reqCnf=g}return this.addRequestSKUs(c),c})}handleExtraBrokerParams(e){let t=e.extraParameters&&e.extraParameters.hasOwnProperty(ur.BROKER_CLIENT_ID)&&e.extraParameters.hasOwnProperty(ur.BROKER_REDIRECT_URI)&&e.extraParameters.hasOwnProperty(ur.CLIENT_ID);if(!e.embeddedClientId&&!t)return;let r="",o=e.redirectUri;e.embeddedClientId?(e.redirectUri=this.config.auth.redirectUri,r=e.embeddedClientId):e.extraParameters&&(e.redirectUri=e.extraParameters[ur.BROKER_REDIRECT_URI],r=e.extraParameters[ur.CLIENT_ID]),e.extraParameters={child_client_id:r,child_redirect_uri:o},this.performanceClient?.addFields({embeddedClientId:r,embeddedRedirectUri:o},e.correlationId)}};var Lt=class n{constructor(e,t,r,o){this.logger=e,this.handshakeTimeoutMs=t,this.extensionId=o,this.resolvers=new Map,this.handshakeResolvers=new Map,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this),this.performanceClient=r,this.handshakeEvent=r.startMeasurement(d.NativeMessageHandlerHandshake)}sendMessage(e){return h(this,null,function*(){this.logger.trace("NativeMessageHandler - sendMessage called.");let t={channel:ro.CHANNEL_ID,extensionId:this.extensionId,responseId:Ze(),body:e};return this.logger.trace("NativeMessageHandler - Sending request to browser extension"),this.logger.tracePii(`NativeMessageHandler - Sending request to browser extension: ${JSON.stringify(t)}`),this.messageChannel.port1.postMessage(t),new Promise((r,o)=>{this.resolvers.set(t.responseId,{resolve:r,reject:o})})})}static createProvider(e,t,r){return h(this,null,function*(){e.trace("NativeMessageHandler - createProvider called.");try{let o=new n(e,t,r,ro.PREFERRED_EXTENSION_ID);return yield o.sendHandshakeRequest(),o}catch{let i=new n(e,t,r);return yield i.sendHandshakeRequest(),i}})}sendHandshakeRequest(){return h(this,null,function*(){this.logger.trace("NativeMessageHandler - sendHandshakeRequest called."),window.addEventListener("message",this.windowListener,!1);let e={channel:ro.CHANNEL_ID,extensionId:this.extensionId,responseId:Ze(),body:{method:pr.HandshakeRequest}};return this.handshakeEvent.add({extensionId:this.extensionId,extensionHandshakeTimeoutMs:this.handshakeTimeoutMs}),this.messageChannel.port1.onmessage=t=>{this.onChannelMessage(t)},window.postMessage(e,window.origin,[this.messageChannel.port2]),new Promise((t,r)=>{this.handshakeResolvers.set(e.responseId,{resolve:t,reject:r}),this.timeoutId=window.setTimeout(()=>{window.removeEventListener("message",this.windowListener,!1),this.messageChannel.port1.close(),this.messageChannel.port2.close(),this.handshakeEvent.end({extensionHandshakeTimedOut:!0,success:!1}),r(T(Qs)),this.handshakeResolvers.delete(e.responseId)},this.handshakeTimeoutMs)})})}onWindowMessage(e){if(this.logger.trace("NativeMessageHandler - onWindowMessage called"),e.source!==window)return;let t=e.data;if(!(!t.channel||t.channel!==ro.CHANNEL_ID)&&!(t.extensionId&&t.extensionId!==this.extensionId)&&t.body.method===pr.HandshakeRequest){let r=this.handshakeResolvers.get(t.responseId);if(!r){this.logger.trace(`NativeMessageHandler.onWindowMessage - resolver can't be found for request ${t.responseId}`);return}this.logger.verbose(t.extensionId?`Extension with id: ${t.extensionId} not installed`:"No extension installed"),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1),this.handshakeEvent.end({success:!1,extensionInstalled:!1}),r.reject(T(Js))}}onChannelMessage(e){this.logger.trace("NativeMessageHandler - onChannelMessage called.");let t=e.data,r=this.resolvers.get(t.responseId),o=this.handshakeResolvers.get(t.responseId);try{let i=t.body.method;if(i===pr.Response){if(!r)return;let s=t.body.response;if(this.logger.trace("NativeMessageHandler - Received response from browser extension"),this.logger.tracePii(`NativeMessageHandler - Received response from browser extension: ${JSON.stringify(s)}`),s.status!=="Success")r.reject(Ml(s.code,s.description,s.ext));else if(s.result)s.result.code&&s.result.description?r.reject(Ml(s.result.code,s.result.description,s.result.ext)):r.resolve(s.result);else throw Hc(Go.unexpectedError,"Event does not contain result.");this.resolvers.delete(t.responseId)}else if(i===pr.HandshakeResponse){if(!o){this.logger.trace(`NativeMessageHandler.onChannelMessage - resolver can't be found for request ${t.responseId}`);return}clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=t.extensionId,this.extensionVersion=t.body.version,this.logger.verbose(`NativeMessageHandler - Received HandshakeResponse from extension: ${this.extensionId}`),this.handshakeEvent.end({extensionInstalled:!0,success:!0}),o.resolve(),this.handshakeResolvers.delete(t.responseId)}}catch(i){this.logger.error("Error parsing response from WAM Extension"),this.logger.errorPii(`Error parsing response from WAM Extension: ${i}`),this.logger.errorPii(`Unable to parse ${e}`),r?r.reject(i):o&&o.reject(i)}}getExtensionId(){return this.extensionId}getExtensionVersion(){return this.extensionVersion}static isNativeAvailable(e,t,r,o){if(t.trace("isNativeAvailable called"),!e.system.allowNativeBroker)return t.trace("isNativeAvailable: allowNativeBroker is not enabled, returning false"),!1;if(!r)return t.trace("isNativeAvailable: WAM extension provider is not initialized, returning false"),!1;if(o)switch(o){case Q.BEARER:case Q.POP:return t.trace("isNativeAvailable: authenticationScheme is supported, returning true"),!0;default:return t.trace("isNativeAvailable: authenticationScheme is not supported, returning false"),!1}return!0}};var so=class{constructor(e,t,r,o,i){this.authModule=e,this.browserStorage=t,this.authCodeRequest=r,this.logger=o,this.performanceClient=i}handleCodeResponse(e,t){return h(this,null,function*(){this.performanceClient.addQueueMeasurement(d.HandleCodeResponse,t.correlationId);let r;try{r=this.authModule.handleFragmentResponse(e,t.state)}catch(o){throw o instanceof ht&&o.subError===Tt?T(Tt):o}return C(this.handleCodeResponseFromServer.bind(this),d.HandleCodeResponseFromServer,this.logger,this.performanceClient,t.correlationId)(r,t)})}handleCodeResponseFromServer(e,t,r=!0){return h(this,null,function*(){if(this.performanceClient.addQueueMeasurement(d.HandleCodeResponseFromServer,t.correlationId),this.logger.trace("InteractionHandler.handleCodeResponseFromServer called"),this.authCodeRequest.code=e.code,e.cloud_instance_host_name&&(yield C(this.authModule.updateAuthority.bind(this.authModule),d.UpdateTokenEndpointAuthority,this.logger,this.performanceClient,t.correlationId)(e.cloud_instance_host_name,t.correlationId)),r&&(e.nonce=t.nonce||void 0),e.state=t.state,e.client_info)this.authCodeRequest.clientInfo=e.client_info;else{let i=this.createCcsCredentials(t);i&&(this.authCodeRequest.ccsCredential=i)}return yield C(this.authModule.acquireToken.bind(this.authModule),d.AuthClientAcquireToken,this.logger,this.performanceClient,t.correlationId)(this.authCodeRequest,e)})}createCcsCredentials(e){return e.account?{credential:e.account.homeAccountId,type:Ue.HOME_ACCOUNT_ID}:e.loginHint?{credential:e.loginHint,type:Ue.UPN}:null}};function th(n,e,t){let r=Kr.getDeserializedResponse(n);if(!r)throw Kr.stripLeadingHashOrQuery(n)?(t.error(`A ${e} is present in the iframe but it does not contain known properties. It's likely that the ${e} has been replaced by code running on the redirectUri page.`),t.errorPii(`The ${e} detected is: ${n}`),T(Ms)):(t.error(`The request has returned to the redirectUri but a ${e} is not present. It's likely that the ${e} has been removed or the page has been redirected by code running on the redirectUri page.`),T(Rs));return r}function Tw(n,e,t){if(!n.state)throw T(Xr);let r=Jf(e,n.state);if(!r)throw T(Ns);if(r.interactionType!==t)throw T(ks)}var nh=class extends wt{constructor(e,t,r,o,i,s,a,c,l,u){super(e,t,r,o,i,s,a,l,u),this.unloadWindow=this.unloadWindow.bind(this),this.nativeStorage=c}acquireToken(e){try{let r={popupName:this.generatePopupName(e.scopes||kt,e.authority||this.config.auth.authority),popupWindowAttributes:e.popupWindowAttributes||{},popupWindowParent:e.popupWindowParent??window};return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true, acquiring token"),this.acquireTokenPopupAsync(e,r)):(this.logger.verbose("asyncPopup set to false, opening popup before acquiring token"),r.popup=this.openSizedPopup("about:blank",r),this.acquireTokenPopupAsync(e,r))}catch(t){return Promise.reject(t)}}logout(e){try{this.logger.verbose("logoutPopup called");let t=this.initializeLogoutRequest(e),r={popupName:this.generateLogoutPopupName(t),popupWindowAttributes:e?.popupWindowAttributes||{},popupWindowParent:e?.popupWindowParent??window},o=e&&e.authority,i=e&&e.mainWindowRedirectUri;return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true"),this.logoutPopupAsync(t,r,o,i)):(this.logger.verbose("asyncPopup set to false, opening popup"),r.popup=this.openSizedPopup("about:blank",r),this.logoutPopupAsync(t,r,o,i))}catch(t){return Promise.reject(t)}}acquireTokenPopupAsync(e,t){return h(this,null,function*(){this.logger.verbose("acquireTokenPopupAsync called");let r=this.initializeServerTelemetryManager(ie.acquireTokenPopup),o=yield C(this.initializeAuthorizationRequest.bind(this),d.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(e,b.Popup);Dl(o.authority);try{let i=yield C(this.initializeAuthorizationCodeRequest.bind(this),d.StandardInteractionClientInitializeAuthorizationCodeRequest,this.logger,this.performanceClient,this.correlationId)(o),s=yield C(this.createAuthCodeClient.bind(this),d.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:r,requestAuthority:o.authority,requestAzureCloudOptions:o.azureCloudOptions,requestExtraQueryParameters:o.extraQueryParameters,account:o.account}),a=Lt.isNativeAvailable(this.config,this.logger,this.nativeMessageHandler,e.authenticationScheme),c;a&&(c=this.performanceClient.startMeasurement(d.FetchAccountIdWithNativeBroker,e.correlationId));let l=yield s.getAuthCodeUrl(A(m({},o),{nativeBroker:a})),u=new so(s,this.browserStorage,i,this.logger,this.performanceClient),f=this.initiateAuthRequest(l,t);this.eventHandler.emitEvent(R.POPUP_OPENED,b.Popup,{popupWindow:f},null);let g=yield this.monitorPopupForHash(f,t.popupWindowParent),p=ft(th,d.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(g,this.config.auth.OIDCOptions.serverResponseType,this.logger);if(Nn.removeThrottle(this.browserStorage,this.config.auth.clientId,i),p.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),c&&c.end({success:!0,isNativeBroker:!0}),!this.nativeMessageHandler)throw T(Yt);let S=new Jt(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,ie.acquireTokenPopup,this.performanceClient,this.nativeMessageHandler,p.accountId,this.nativeStorage,o.correlationId),{userRequestState:w}=He.parseRequestState(this.browserCrypto,o.state);return yield S.acquireToken(A(m({},o),{state:w,prompt:void 0}))}return yield u.handleCodeResponse(p,o)}catch(i){throw t.popup?.close(),i instanceof $&&(i.setCorrelationId(this.correlationId),r.cacheFailedRequest(i)),i}})}logoutPopupAsync(e,t,r,o){return h(this,null,function*(){this.logger.verbose("logoutPopupAsync called"),this.eventHandler.emitEvent(R.LOGOUT_START,b.Popup,e);let i=this.initializeServerTelemetryManager(ie.logoutPopup);try{yield this.clearCacheOnLogout(e.account);let s=yield C(this.createAuthCodeClient.bind(this),d.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:i,requestAuthority:r,account:e.account||void 0});try{s.authority.endSessionEndpoint}catch{if(e.account?.homeAccountId&&e.postLogoutRedirectUri&&s.authority.protocolMode===Qe.OIDC){if(this.browserStorage.removeAccount(e.account?.homeAccountId,this.correlationId),this.eventHandler.emitEvent(R.LOGOUT_SUCCESS,b.Popup,e),o){let l={apiId:ie.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},u=j.getAbsoluteUrl(o,gt());yield this.navigationClient.navigateInternal(u,l)}t.popup?.close();return}}let a=s.getLogoutUri(e);this.eventHandler.emitEvent(R.LOGOUT_SUCCESS,b.Popup,e);let c=this.openPopup(a,t);if(this.eventHandler.emitEvent(R.POPUP_OPENED,b.Popup,{popupWindow:c},null),yield this.monitorPopupForHash(c,t.popupWindowParent).catch(()=>{}),o){let l={apiId:ie.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},u=j.getAbsoluteUrl(o,gt());this.logger.verbose("Redirecting main window to url specified in the request"),this.logger.verbosePii(`Redirecting main window to: ${u}`),yield this.navigationClient.navigateInternal(u,l)}else this.logger.verbose("No main window navigation requested")}catch(s){throw t.popup?.close(),s instanceof $&&(s.setCorrelationId(this.correlationId),i.cacheFailedRequest(s)),this.browserStorage.setInteractionInProgress(!1),this.eventHandler.emitEvent(R.LOGOUT_FAILURE,b.Popup,null,s),this.eventHandler.emitEvent(R.LOGOUT_END,b.Popup),s}this.eventHandler.emitEvent(R.LOGOUT_END,b.Popup)})}initiateAuthRequest(e,t){if(e)return this.logger.infoPii(`Navigate to: ${e}`),this.openPopup(e,t);throw this.logger.error("Navigate url is empty"),T(On)}monitorPopupForHash(e,t){return new Promise((r,o)=>{this.logger.verbose("PopupHandler.monitorPopupForHash - polling started");let i=setInterval(()=>{if(e.closed){this.logger.error("PopupHandler.monitorPopupForHash - window closed"),clearInterval(i),o(T(Tt));return}let s="";try{s=e.location.href}catch{}if(!s||s==="about:blank")return;clearInterval(i);let a="",c=this.config.auth.OIDCOptions.serverResponseType;e&&(c===cn.QUERY?a=e.location.search:a=e.location.hash),this.logger.verbose("PopupHandler.monitorPopupForHash - popup window is on same origin as caller"),r(a)},this.config.system.pollIntervalMilliseconds)}).finally(()=>{this.cleanPopup(e,t)})}openPopup(e,t){try{let r;if(t.popup?(r=t.popup,this.logger.verbosePii(`Navigating popup window to: ${e}`),r.location.assign(e)):typeof t.popup>"u"&&(this.logger.verbosePii(`Opening popup window to: ${e}`),r=this.openSizedPopup(e,t)),!r)throw T(xs);return r.focus&&r.focus(),this.currentWindow=r,t.popupWindowParent.addEventListener("beforeunload",this.unloadWindow),r}catch(r){throw this.logger.error("error opening popup "+r.message),this.browserStorage.setInteractionInProgress(!1),T(Ps)}}openSizedPopup(e,{popupName:t,popupWindowAttributes:r,popupWindowParent:o}){let i=o.screenLeft?o.screenLeft:o.screenX,s=o.screenTop?o.screenTop:o.screenY,a=o.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,c=o.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,l=r.popupSize?.width,u=r.popupSize?.height,f=r.popupPosition?.top,g=r.popupPosition?.left;return(!l||l<0||l>a)&&(this.logger.verbose("Default popup window width used. Window width not configured or invalid."),l=be.POPUP_WIDTH),(!u||u<0||u>c)&&(this.logger.verbose("Default popup window height used. Window height not configured or invalid."),u=be.POPUP_HEIGHT),(!f||f<0||f>c)&&(this.logger.verbose("Default popup window top position used. Window top not configured or invalid."),f=Math.max(0,c/2-be.POPUP_HEIGHT/2+s)),(!g||g<0||g>a)&&(this.logger.verbose("Default popup window left position used. Window left not configured or invalid."),g=Math.max(0,a/2-be.POPUP_WIDTH/2+i)),o.open(e,t,`width=${l}, height=${u}, top=${f}, left=${g}, scrollbars=yes`)}unloadWindow(e){this.browserStorage.cleanRequestByInteractionType(b.Popup),this.currentWindow&&this.currentWindow.close(),e.preventDefault()}cleanPopup(e,t){e.close(),t.removeEventListener("beforeunload",this.unloadWindow),this.browserStorage.setInteractionInProgress(!1)}generatePopupName(e,t){return`${be.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${e.join("-")}.${t}.${this.correlationId}`}generateLogoutPopupName(e){let t=e.account&&e.account.homeAccountId;return`${be.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${t}.${this.correlationId}`}};var Nl=class{constructor(e,t,r,o,i){this.authModule=e,this.browserStorage=t,this.authCodeRequest=r,this.logger=o,this.performanceClient=i}initiateAuthRequest(e,t){return h(this,null,function*(){if(this.logger.verbose("RedirectHandler.initiateAuthRequest called"),e){t.redirectStartPage&&(this.logger.verbose("RedirectHandler.initiateAuthRequest: redirectStartPage set, caching start page"),this.browserStorage.setTemporaryCache(re.ORIGIN_URI,t.redirectStartPage,!0)),this.browserStorage.setTemporaryCache(re.CORRELATION_ID,this.authCodeRequest.correlationId,!0),this.browserStorage.cacheCodeRequest(this.authCodeRequest),this.logger.infoPii(`RedirectHandler.initiateAuthRequest: Navigate to: ${e}`);let r={apiId:ie.acquireTokenRedirect,timeout:t.redirectTimeout,noHistory:!1};if(typeof t.onRedirectNavigate=="function")if(this.logger.verbose("RedirectHandler.initiateAuthRequest: Invoking onRedirectNavigate callback"),t.onRedirectNavigate(e)!==!1){this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate did not return false, navigating"),yield t.navigationClient.navigateExternal(e,r);return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate returned false, stopping navigation");return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: Navigating window to navigate url"),yield t.navigationClient.navigateExternal(e,r);return}}else throw this.logger.info("RedirectHandler.initiateAuthRequest: Navigate url is empty"),T(On)})}handleCodeResponse(e,t){return h(this,null,function*(){this.logger.verbose("RedirectHandler.handleCodeResponse called"),this.browserStorage.setInteractionInProgress(!1);let r=this.browserStorage.generateStateKey(t),o=this.browserStorage.getTemporaryCache(r);if(!o)throw v(Fe.stateNotFound,"Cached State");let i;try{i=this.authModule.handleFragmentResponse(e,o)}catch(l){throw l instanceof ht&&l.subError===Tt?T(Tt):l}let s=this.browserStorage.generateNonceKey(o),a=this.browserStorage.getTemporaryCache(s);if(this.authCodeRequest.code=i.code,i.cloud_instance_host_name&&(yield C(this.authModule.updateAuthority.bind(this.authModule),d.UpdateTokenEndpointAuthority,this.logger,this.performanceClient,this.authCodeRequest.correlationId)(i.cloud_instance_host_name,this.authCodeRequest.correlationId)),i.nonce=a||void 0,i.state=o,i.client_info)this.authCodeRequest.clientInfo=i.client_info;else{let l=this.checkCcsCredentials();l&&(this.authCodeRequest.ccsCredential=l)}let c=yield this.authModule.acquireToken(this.authCodeRequest,i);return this.browserStorage.cleanRequestByState(t),c})}checkCcsCredentials(){let e=this.browserStorage.getTemporaryCache(re.CCS_CREDENTIAL,!0);if(e)try{return JSON.parse(e)}catch{this.authModule.logger.error("Cache credential could not be parsed"),this.authModule.logger.errorPii(`Cache credential could not be parsed: ${e}`)}return null}};function aO(){if(typeof window>"u"||typeof window.performance>"u"||typeof window.performance.getEntriesByType!="function")return;let n=window.performance.getEntriesByType("navigation");return(n.length?n[0]:void 0)?.type}var rh=class extends wt{constructor(e,t,r,o,i,s,a,c,l,u){super(e,t,r,o,i,s,a,l,u),this.nativeStorage=c}acquireToken(e){return h(this,null,function*(){let t=yield C(this.initializeAuthorizationRequest.bind(this),d.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(e,b.Redirect);this.browserStorage.updateCacheEntries(t.state,t.nonce,t.authority,t.loginHint||"",t.account||null);let r=this.initializeServerTelemetryManager(ie.acquireTokenRedirect),o=i=>{i.persisted&&(this.logger.verbose("Page was restored from back/forward cache. Clearing temporary cache."),this.browserStorage.cleanRequestByState(t.state),this.eventHandler.emitEvent(R.RESTORE_FROM_BFCACHE,b.Redirect))};try{let i=yield C(this.initializeAuthorizationCodeRequest.bind(this),d.StandardInteractionClientInitializeAuthorizationCodeRequest,this.logger,this.performanceClient,this.correlationId)(t),s=yield C(this.createAuthCodeClient.bind(this),d.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:r,requestAuthority:t.authority,requestAzureCloudOptions:t.azureCloudOptions,requestExtraQueryParameters:t.extraQueryParameters,account:t.account}),a=new Nl(s,this.browserStorage,i,this.logger,this.performanceClient),c=yield s.getAuthCodeUrl(A(m({},t),{nativeBroker:Lt.isNativeAvailable(this.config,this.logger,this.nativeMessageHandler,e.authenticationScheme)})),l=this.getRedirectStartPage(e.redirectStartPage);return this.logger.verbosePii(`Redirect start page: ${l}`),window.addEventListener("pageshow",o),yield a.initiateAuthRequest(c,{navigationClient:this.navigationClient,redirectTimeout:this.config.system.redirectNavigationTimeout,redirectStartPage:l,onRedirectNavigate:e.onRedirectNavigate||this.config.auth.onRedirectNavigate})}catch(i){throw i instanceof $&&(i.setCorrelationId(this.correlationId),r.cacheFailedRequest(i)),window.removeEventListener("pageshow",o),this.browserStorage.cleanRequestByState(t.state),i}})}handleRedirectPromise(e="",t){return h(this,null,function*(){let r=this.initializeServerTelemetryManager(ie.handleRedirectPromise);try{if(!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;let[o,i]=this.getRedirectResponse(e||"");if(!o)return this.logger.info("handleRedirectPromise did not detect a response as a result of a redirect. Cleaning temporary cache."),this.browserStorage.cleanRequestByInteractionType(b.Redirect),aO()!=="back_forward"?t.event.errorCode="no_server_response":this.logger.verbose("Back navigation event detected. Muting no_server_response error"),null;let s=this.browserStorage.getTemporaryCache(re.ORIGIN_URI,!0)||y.EMPTY_STRING,a=j.removeHashFromUrl(s),c=j.removeHashFromUrl(window.location.href);if(a===c&&this.config.auth.navigateToLoginRequestUrl)return this.logger.verbose("Current page is loginRequestUrl, handling response"),s.indexOf("#")>-1&&Gy(s),yield this.handleResponse(o,r);if(this.config.auth.navigateToLoginRequestUrl){if(!Al()||this.config.system.allowRedirectInIframe){this.browserStorage.setTemporaryCache(re.URL_HASH,i,!0);let l={apiId:ie.handleRedirectPromise,timeout:this.config.system.redirectNavigationTimeout,noHistory:!0},u=!0;if(!s||s==="null"){let f=qy();this.browserStorage.setTemporaryCache(re.ORIGIN_URI,f,!0),this.logger.warning("Unable to get valid login request url from cache, redirecting to home page"),u=yield this.navigationClient.navigateInternal(f,l)}else this.logger.verbose(`Navigating to loginRequestUrl: ${s}`),u=yield this.navigationClient.navigateInternal(s,l);if(!u)return yield this.handleResponse(o,r)}}else return this.logger.verbose("NavigateToLoginRequestUrl set to false, handling response"),yield this.handleResponse(o,r);return null}catch(o){throw o instanceof $&&(o.setCorrelationId(this.correlationId),r.cacheFailedRequest(o)),this.browserStorage.cleanRequestByInteractionType(b.Redirect),o}})}getRedirectResponse(e){this.logger.verbose("getRedirectResponseHash called");let t=e;t||(this.config.auth.OIDCOptions.serverResponseType===cn.QUERY?t=window.location.search:t=window.location.hash);let r=Kr.getDeserializedResponse(t);if(r){try{Tw(r,this.browserCrypto,b.Redirect)}catch(i){return i instanceof $&&this.logger.error(`Interaction type validation failed due to ${i.errorCode}: ${i.errorMessage}`),[null,""]}return zy(window),this.logger.verbose("Hash contains known properties, returning response hash"),[r,t]}let o=this.browserStorage.getTemporaryCache(re.URL_HASH,!0);return this.browserStorage.removeItem(this.browserStorage.generateCacheKey(re.URL_HASH)),o&&(r=Kr.getDeserializedResponse(o),r)?(this.logger.verbose("Hash does not contain known properties, returning cached hash"),[r,o]):[null,""]}handleResponse(e,t){return h(this,null,function*(){let r=e.state;if(!r)throw T(Xr);let o=this.browserStorage.getCachedRequest(r);if(this.logger.verbose("handleResponse called, retrieved cached request"),e.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),!this.nativeMessageHandler)throw T(Yt);let c=new Jt(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,ie.acquireTokenPopup,this.performanceClient,this.nativeMessageHandler,e.accountId,this.nativeStorage,o.correlationId),{userRequestState:l}=He.parseRequestState(this.browserCrypto,r);return c.acquireToken(A(m({},o),{state:l,prompt:void 0})).finally(()=>{this.browserStorage.cleanRequestByState(r)})}let i=this.browserStorage.getCachedAuthority(r);if(!i)throw T(eo);let s=yield C(this.createAuthCodeClient.bind(this),d.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:t,requestAuthority:i});return Nn.removeThrottle(this.browserStorage,this.config.auth.clientId,o),new Nl(s,this.browserStorage,o,this.logger,this.performanceClient).handleCodeResponse(e,r)})}logout(e){return h(this,null,function*(){this.logger.verbose("logoutRedirect called");let t=this.initializeLogoutRequest(e),r=this.initializeServerTelemetryManager(ie.logout);try{this.eventHandler.emitEvent(R.LOGOUT_START,b.Redirect,e),yield this.clearCacheOnLogout(t.account);let o={apiId:ie.logout,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},i=yield C(this.createAuthCodeClient.bind(this),d.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:r,requestAuthority:e&&e.authority,requestExtraQueryParameters:e?.extraQueryParameters,account:e&&e.account||void 0});if(i.authority.protocolMode===Qe.OIDC)try{i.authority.endSessionEndpoint}catch{if(t.account?.homeAccountId){this.browserStorage.removeAccount(t.account?.homeAccountId,this.correlationId),this.eventHandler.emitEvent(R.LOGOUT_SUCCESS,b.Redirect,t);return}}let s=i.getLogoutUri(t);if(this.eventHandler.emitEvent(R.LOGOUT_SUCCESS,b.Redirect,t),e&&typeof e.onRedirectNavigate=="function")if(e.onRedirectNavigate(s)!==!1){this.logger.verbose("Logout onRedirectNavigate did not return false, navigating"),this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0),yield this.navigationClient.navigateExternal(s,o);return}else this.browserStorage.setInteractionInProgress(!1),this.logger.verbose("Logout onRedirectNavigate returned false, stopping navigation");else{this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0),yield this.navigationClient.navigateExternal(s,o);return}}catch(o){throw o instanceof $&&(o.setCorrelationId(this.correlationId),r.cacheFailedRequest(o)),this.eventHandler.emitEvent(R.LOGOUT_FAILURE,b.Redirect,null,o),this.eventHandler.emitEvent(R.LOGOUT_END,b.Redirect),o}this.eventHandler.emitEvent(R.LOGOUT_END,b.Redirect)})}getRedirectStartPage(e){let t=e||window.location.href;return j.getAbsoluteUrl(t,gt())}};function Sw(n,e,t,r,o){return h(this,null,function*(){if(e.addQueueMeasurement(d.SilentHandlerInitiateAuthRequest,r),!n)throw t.info("Navigate url is empty"),T(On);return o?C(cO,d.SilentHandlerLoadFrame,t,e,r)(n,o,e,r):ft(lO,d.SilentHandlerLoadFrameSync,t,e,r)(n)})}function ww(n,e,t,r,o,i,s){return h(this,null,function*(){return r.addQueueMeasurement(d.SilentHandlerMonitorIframeForHash,i),new Promise((a,c)=>{e<zf&&o.warning(`system.loadFrameTimeout or system.iframeHashTimeout set to lower (${e}ms) than the default (${zf}ms). This may result in timeouts.`);let l=window.setTimeout(()=>{window.clearInterval(u),c(T(Ls))},e),u=window.setInterval(()=>{let f="",g=n.contentWindow;try{f=g?g.location.href:""}catch{}if(!f||f==="about:blank")return;let p="";g&&(s===cn.QUERY?p=g.location.search:p=g.location.hash),window.clearTimeout(l),window.clearInterval(u),a(p)},t)}).finally(()=>{ft(uO,d.RemoveHiddenIframe,o,r,i)(n)})})}function cO(n,e,t,r){return t.addQueueMeasurement(d.SilentHandlerLoadFrame,r),new Promise((o,i)=>{let s=Aw();window.setTimeout(()=>{if(!s){i("Unable to load iframe");return}s.src=n,o(s)},e)})}function lO(n){let e=Aw();return e.src=n,e}function Aw(){let n=document.createElement("iframe");return n.className="msalSilentIframe",n.style.visibility="hidden",n.style.position="absolute",n.style.width=n.style.height="0",n.style.border="0",n.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),document.body.appendChild(n),n}function uO(n){document.body===n.parentNode&&document.body.removeChild(n)}var oh=class extends wt{constructor(e,t,r,o,i,s,a,c,l,u,f){super(e,t,r,o,i,s,c,u,f),this.apiId=a,this.nativeStorage=l}acquireToken(e){return h(this,null,function*(){this.performanceClient.addQueueMeasurement(d.SilentIframeClientAcquireToken,e.correlationId),!e.loginHint&&!e.sid&&(!e.account||!e.account.username)&&this.logger.warning("No user hint provided. The authorization server may need more information to complete this request.");let t=m({},e);t.prompt?t.prompt!==me.NONE&&t.prompt!==me.NO_SESSION&&(this.logger.warning(`SilentIframeClient. Replacing invalid prompt ${t.prompt} with ${me.NONE}`),t.prompt=me.NONE):t.prompt=me.NONE;let r=yield C(this.initializeAuthorizationRequest.bind(this),d.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(t,b.Silent);Dl(r.authority);let o=this.initializeServerTelemetryManager(this.apiId),i;try{return i=yield C(this.createAuthCodeClient.bind(this),d.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:o,requestAuthority:r.authority,requestAzureCloudOptions:r.azureCloudOptions,requestExtraQueryParameters:r.extraQueryParameters,account:r.account}),yield C(this.silentTokenHelper.bind(this),d.SilentIframeClientTokenHelper,this.logger,this.performanceClient,e.correlationId)(i,r)}catch(s){if(s instanceof $&&(s.setCorrelationId(this.correlationId),o.cacheFailedRequest(s)),!i||!(s instanceof $)||s.errorCode!==be.INVALID_GRANT_ERROR)throw s;this.performanceClient.addFields({retryError:s.errorCode},this.correlationId);let a=yield C(this.initializeAuthorizationRequest.bind(this),d.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(t,b.Silent);return yield C(this.silentTokenHelper.bind(this),d.SilentIframeClientTokenHelper,this.logger,this.performanceClient,this.correlationId)(i,a)}})}logout(){return Promise.reject(T(Pn))}silentTokenHelper(e,t){return h(this,null,function*(){let r=t.correlationId;this.performanceClient.addQueueMeasurement(d.SilentIframeClientTokenHelper,r);let o=yield C(this.initializeAuthorizationCodeRequest.bind(this),d.StandardInteractionClientInitializeAuthorizationCodeRequest,this.logger,this.performanceClient,r)(t),i=yield C(e.getAuthCodeUrl.bind(e),d.GetAuthCodeUrl,this.logger,this.performanceClient,r)(A(m({},t),{nativeBroker:Lt.isNativeAvailable(this.config,this.logger,this.nativeMessageHandler,t.authenticationScheme)})),s=new so(e,this.browserStorage,o,this.logger,this.performanceClient),a=yield C(Sw,d.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,r)(i,this.performanceClient,this.logger,r,this.config.system.navigateFrameWait),c=this.config.auth.OIDCOptions.serverResponseType,l=yield C(ww,d.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,r)(a,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,r,c),u=ft(th,d.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(l,c,this.logger);if(u.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),!this.nativeMessageHandler)throw T(Yt);let f=new Jt(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.apiId,this.performanceClient,this.nativeMessageHandler,u.accountId,this.browserStorage,r),{userRequestState:g}=He.parseRequestState(this.browserCrypto,t.state);return C(f.acquireToken.bind(f),d.NativeInteractionClientAcquireToken,this.logger,this.performanceClient,r)(A(m({},t),{state:g,prompt:t.prompt||me.NONE}))}return C(s.handleCodeResponse.bind(s),d.HandleCodeResponse,this.logger,this.performanceClient,r)(u,t)})}};var ih=class extends wt{acquireToken(e){return h(this,null,function*(){this.performanceClient.addQueueMeasurement(d.SilentRefreshClientAcquireToken,e.correlationId);let t=yield C(Rl,d.InitializeBaseRequest,this.logger,this.performanceClient,e.correlationId)(e,this.config,this.performanceClient,this.logger),r=m(m({},e),t);e.redirectUri&&(r.redirectUri=this.getRedirectUri(e.redirectUri));let o=this.initializeServerTelemetryManager(ie.acquireTokenSilent_silentFlow),i=yield this.createRefreshTokenClient({serverTelemetryManager:o,authorityUrl:r.authority,azureCloudOptions:r.azureCloudOptions,account:r.account});return C(i.acquireTokenByRefreshToken.bind(i),d.RefreshTokenClientAcquireTokenByRefreshToken,this.logger,this.performanceClient,e.correlationId)(r).catch(s=>{throw s.setCorrelationId(this.correlationId),o.cacheFailedRequest(s),s})})}logout(){return Promise.reject(T(Pn))}createRefreshTokenClient(e){return h(this,null,function*(){let t=yield C(this.getClientConfiguration.bind(this),d.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:e.serverTelemetryManager,requestAuthority:e.authorityUrl,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account});return new Zr(t,this.performanceClient)})}};var sh=class{constructor(e,t,r,o){this.isBrowserEnvironment=typeof window<"u",this.config=e,this.storage=t,this.logger=r,this.cryptoObj=o}loadExternalTokens(e,t,r){if(!this.isBrowserEnvironment)throw T(xn);let o=e.correlationId||Ze(),i=t.id_token?Gr.extractTokenClaims(t.id_token,St):void 0,s={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},a=e.authority?new Wt(Wt.generateAuthority(e.authority,e.azureCloudOptions),this.config.system.networkClient,this.storage,s,this.logger,e.correlationId||Ze()):void 0,c=this.loadAccount(e,r.clientInfo||t.client_info||"",o,i,a),l=this.loadIdToken(t,c.homeAccountId,c.environment,c.realm,o),u=this.loadAccessToken(e,t,c.homeAccountId,c.environment,c.realm,r,o),f=this.loadRefreshToken(t,c.homeAccountId,c.environment,o);return this.generateAuthenticationResult(e,{account:c,idToken:l,accessToken:u,refreshToken:f},i,a)}loadAccount(e,t,r,o,i){if(this.logger.verbose("TokenCache - loading account"),e.account){let l=ge.createFromAccountInfo(e.account);return this.storage.setAccount(l,r),l}else if(!i||!t&&!o)throw this.logger.error("TokenCache - if an account is not provided on the request, authority and either clientInfo or idToken must be provided instead."),T(Gs);let s=ge.generateHomeAccountId(t,i.authorityType,this.logger,this.cryptoObj,o),a=o?.tid,c=Ds(this.storage,i,s,St,r,o,t,i.hostnameAndPort,a,void 0,void 0,this.logger);return this.storage.setAccount(c,r),c}loadIdToken(e,t,r,o,i){if(!e.id_token)return this.logger.verbose("TokenCache - no id token found in response"),null;this.logger.verbose("TokenCache - loading id token");let s=he.createIdTokenEntity(t,r,e.id_token,this.config.auth.clientId,o);return this.storage.setIdTokenCredential(s,i),s}loadAccessToken(e,t,r,o,i,s,a){if(t.access_token)if(t.expires_in){if(!t.scope&&(!e.scopes||!e.scopes.length))return this.logger.error("TokenCache - scopes not specified in the request or response. Cannot add token to the cache."),null}else return this.logger.error("TokenCache - no expiration set on the access token. Cannot add it to the cache."),null;else return this.logger.verbose("TokenCache - no access token found in response"),null;this.logger.verbose("TokenCache - loading access token");let c=t.scope?ye.fromString(t.scope):new ye(e.scopes),l=s.expiresOn||t.expires_in+new Date().getTime()/1e3,u=s.extendedExpiresOn||(t.ext_expires_in||t.expires_in)+new Date().getTime()/1e3,f=he.createAccessTokenEntity(r,o,t.access_token,this.config.auth.clientId,i,c.printScopes(),l,u,St);return this.storage.setAccessTokenCredential(f,a),f}loadRefreshToken(e,t,r,o){if(!e.refresh_token)return this.logger.verbose("TokenCache - no refresh token found in response"),null;this.logger.verbose("TokenCache - loading refresh token");let i=he.createRefreshTokenEntity(t,r,e.refresh_token,this.config.auth.clientId,e.foci,void 0,e.refresh_token_expires_in);return this.storage.setRefreshTokenCredential(i,o),i}generateAuthenticationResult(e,t,r,o){let i="",s=[],a=null,c;t?.accessToken&&(i=t.accessToken.secret,s=ye.fromString(t.accessToken.target).asArray(),a=new Date(Number(t.accessToken.expiresOn)*1e3),c=new Date(Number(t.accessToken.extendedExpiresOn)*1e3));let l=t.account;return{authority:o?o.canonicalAuthority:"",uniqueId:t.account.localAccountId,tenantId:t.account.realm,scopes:s,account:l.getAccountInfo(),idToken:t.idToken?.secret||"",idTokenClaims:r||{},accessToken:i,fromCache:!0,expiresOn:a,correlationId:e.correlationId||"",requestId:"",extExpiresOn:c,familyId:t.refreshToken?.familyId||"",tokenType:t?.accessToken?.tokenType||"",state:e.state||"",cloudGraphHostName:l.cloudGraphHostName||"",msGraphHost:l.msGraphHost||"",fromNativeBroker:!1}}};var ah=class extends Ii{constructor(e){super(e),this.includeRedirectUri=!1}};var ch=class extends wt{constructor(e,t,r,o,i,s,a,c,l,u){super(e,t,r,o,i,s,c,l,u),this.apiId=a}acquireToken(e){return h(this,null,function*(){if(!e.code)throw T(qs);let t=yield C(this.initializeAuthorizationRequest.bind(this),d.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(e,b.Silent),r=this.initializeServerTelemetryManager(this.apiId);try{let o=A(m({},t),{code:e.code}),i=yield C(this.getClientConfiguration.bind(this),d.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:r,requestAuthority:t.authority,requestAzureCloudOptions:t.azureCloudOptions,requestExtraQueryParameters:t.extraQueryParameters,account:t.account}),s=new ah(i);this.logger.verbose("Auth code client created");let a=new so(s,this.browserStorage,o,this.logger,this.performanceClient);return yield C(a.handleCodeResponseFromServer.bind(a),d.HandleCodeResponseFromServer,this.logger,this.performanceClient,e.correlationId)({code:e.code,msgraph_host:e.msGraphHost,cloud_graph_host_name:e.cloudGraphHostName,cloud_instance_host_name:e.cloudInstanceHostName},t,!1)}catch(o){throw o instanceof $&&(o.setCorrelationId(this.correlationId),r.cacheFailedRequest(o)),o}})}logout(){return Promise.reject(T(Pn))}};function Fn(n){let e=n?.idTokenClaims;if(e?.tfp||e?.acr)return"B2C";if(e?.tid){if(e?.tid==="9188040d-6c67-4c5b-b112-36a304b66dad")return"MSA"}else return;return"AAD"}function lh(n,e){try{_l(n)}catch(t){throw e.end({success:!1},t),t}}var ca=class n{constructor(e){this.operatingContext=e,this.isBrowserEnvironment=this.operatingContext.isBrowserEnvironment(),this.config=e.getConfig(),this.initialized=!1,this.logger=this.operatingContext.getLogger(),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.config.telemetry.client,this.browserCrypto=this.isBrowserEnvironment?new ow(this.logger,this.performanceClient):$r,this.eventHandler=new Xf(this.logger),this.browserStorage=this.isBrowserEnvironment?new ia(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,by(this.config.auth),this.performanceClient):iw(this.config.auth.clientId,this.logger);let t={cacheLocation:Se.MemoryStorage,temporaryCacheLocation:Se.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};this.nativeInternalStorage=new ia(this.config.auth.clientId,t,this.browserCrypto,this.logger,void 0,this.performanceClient),this.tokenCache=new sh(this.config,this.browserStorage,this.logger,this.browserCrypto),this.activeSilentTokenRequests=new Map,this.trackPageVisibility=this.trackPageVisibility.bind(this),this.trackPageVisibilityWithMeasurement=this.trackPageVisibilityWithMeasurement.bind(this),this.listeningToStorageEvents=!1,this.handleAccountCacheChange=this.handleAccountCacheChange.bind(this)}static createController(e,t){return h(this,null,function*(){let r=new n(e);return yield r.initialize(t),r})}trackPageVisibility(e){e&&(this.logger.info("Perf: Visibility change detected"),this.performanceClient.incrementFields({visibilityChangeCount:1},e))}initialize(e){return h(this,null,function*(){if(this.logger.trace("initialize called"),this.initialized){this.logger.info("initialize has already been called, exiting early.");return}if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, exiting early."),this.initialized=!0,this.eventHandler.emitEvent(R.INITIALIZE_END);return}let t=e?.correlationId||this.getRequestCorrelationId(),r=this.config.system.allowNativeBroker,o=this.performanceClient.startMeasurement(d.InitializeClientApplication,t);if(this.eventHandler.emitEvent(R.INITIALIZE_START),r)try{this.nativeExtensionProvider=yield Lt.createProvider(this.logger,this.config.system.nativeBrokerHandshakeTimeout,this.performanceClient)}catch(i){this.logger.verbose(i)}this.config.cache.claimsBasedCachingEnabled||(this.logger.verbose("Claims-based caching is disabled. Clearing the previous cache with claims"),yield C(this.browserStorage.clearTokensAndKeysWithClaims.bind(this.browserStorage),d.ClearTokensAndKeysWithClaims,this.logger,this.performanceClient,t)(this.performanceClient,t)),this.initialized=!0,this.eventHandler.emitEvent(R.INITIALIZE_END),o.end({allowNativeBroker:r,success:!0})})}handleRedirectPromise(e){return h(this,null,function*(){if(this.logger.verbose("handleRedirectPromise called"),Bf(this.initialized),this.isBrowserEnvironment){let t=e||"",r=this.redirectResponse.get(t);return typeof r>"u"?(r=this.handleRedirectPromiseInternal(e),this.redirectResponse.set(t,r),this.logger.verbose("handleRedirectPromise has been called for the first time, storing the promise")):this.logger.verbose("handleRedirectPromise has been called previously, returning the result from the first call"),r}return this.logger.verbose("handleRedirectPromise returns null, not browser environment"),null})}handleRedirectPromiseInternal(e){return h(this,null,function*(){let t=this.getAllAccounts(),r=this.browserStorage.getCachedNativeRequest(),o=r&&Lt.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider)&&this.nativeExtensionProvider&&!e,i=o?r?.correlationId:this.browserStorage.getTemporaryCache(re.CORRELATION_ID,!0)||"",s=this.performanceClient.startMeasurement(d.AcquireTokenRedirect,i);this.eventHandler.emitEvent(R.HANDLE_REDIRECT_START,b.Redirect);let a;if(o&&this.nativeExtensionProvider){this.logger.trace("handleRedirectPromise - acquiring token from native platform");let c=new Jt(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,ie.handleRedirectPromise,this.performanceClient,this.nativeExtensionProvider,r.accountId,this.nativeInternalStorage,r.correlationId);a=C(c.handleRedirectPromise.bind(c),d.HandleNativeRedirectPromiseMeasurement,this.logger,this.performanceClient,s.event.correlationId)(this.performanceClient,s.event.correlationId)}else{this.logger.trace("handleRedirectPromise - acquiring token from web flow");let c=this.createRedirectClient(i);a=C(c.handleRedirectPromise.bind(c),d.HandleRedirectPromiseMeasurement,this.logger,this.performanceClient,s.event.correlationId)(e,s)}return a.then(c=>(c?(t.length<this.getAllAccounts().length?(this.eventHandler.emitEvent(R.LOGIN_SUCCESS,b.Redirect,c),this.logger.verbose("handleRedirectResponse returned result, login success")):(this.eventHandler.emitEvent(R.ACQUIRE_TOKEN_SUCCESS,b.Redirect,c),this.logger.verbose("handleRedirectResponse returned result, acquire token success")),s.end({success:!0,accountType:Fn(c.account)})):s.event.errorCode?s.end({success:!1}):s.discard(),this.eventHandler.emitEvent(R.HANDLE_REDIRECT_END,b.Redirect),c)).catch(c=>{let l=c;throw t.length>0?this.eventHandler.emitEvent(R.ACQUIRE_TOKEN_FAILURE,b.Redirect,null,l):this.eventHandler.emitEvent(R.LOGIN_FAILURE,b.Redirect,null,l),this.eventHandler.emitEvent(R.HANDLE_REDIRECT_END,b.Redirect),s.end({success:!1},l),c})})}acquireTokenRedirect(e){return h(this,null,function*(){let t=this.getRequestCorrelationId(e);this.logger.verbose("acquireTokenRedirect called",t);let r=this.performanceClient.startMeasurement(d.AcquireTokenPreRedirect,t);r.add({accountType:Fn(e.account),scenarioId:e.scenarioId});let o=e.onRedirectNavigate;if(o)e.onRedirectNavigate=s=>{let a=typeof o=="function"?o(s):void 0;return a!==!1?r.end({success:!0}):r.discard(),a};else{let s=this.config.auth.onRedirectNavigate;this.config.auth.onRedirectNavigate=a=>{let c=typeof s=="function"?s(a):void 0;return c!==!1?r.end({success:!0}):r.discard(),c}}let i=this.getAllAccounts().length>0;try{jf(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0),i?this.eventHandler.emitEvent(R.ACQUIRE_TOKEN_START,b.Redirect,e):this.eventHandler.emitEvent(R.LOGIN_START,b.Redirect,e);let s;return this.nativeExtensionProvider&&this.canUseNative(e)?s=new Jt(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,ie.acquireTokenRedirect,this.performanceClient,this.nativeExtensionProvider,this.getNativeAccountId(e),this.nativeInternalStorage,t).acquireTokenRedirect(e,r).catch(c=>{if(c instanceof Qt&&io(c))return this.nativeExtensionProvider=void 0,this.createRedirectClient(t).acquireToken(e);if(c instanceof Je)return this.logger.verbose("acquireTokenRedirect - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createRedirectClient(t).acquireToken(e);throw this.browserStorage.setInteractionInProgress(!1),c}):s=this.createRedirectClient(t).acquireToken(e),yield s}catch(s){throw r.end({success:!1},s),i?this.eventHandler.emitEvent(R.ACQUIRE_TOKEN_FAILURE,b.Redirect,null,s):this.eventHandler.emitEvent(R.LOGIN_FAILURE,b.Redirect,null,s),s}})}acquireTokenPopup(e){let t=this.getRequestCorrelationId(e),r=this.performanceClient.startMeasurement(d.AcquireTokenPopup,t);r.add({scenarioId:e.scenarioId,accountType:Fn(e.account)});try{this.logger.verbose("acquireTokenPopup called",t),lh(this.initialized,r),this.browserStorage.setInteractionInProgress(!0)}catch(s){return Promise.reject(s)}let o=this.getAllAccounts();o.length>0?this.eventHandler.emitEvent(R.ACQUIRE_TOKEN_START,b.Popup,e):this.eventHandler.emitEvent(R.LOGIN_START,b.Popup,e);let i;return this.canUseNative(e)?i=this.acquireTokenNative(A(m({},e),{correlationId:t}),ie.acquireTokenPopup).then(s=>(this.browserStorage.setInteractionInProgress(!1),r.end({success:!0,isNativeBroker:!0,accountType:Fn(s.account)}),s)).catch(s=>{if(s instanceof Qt&&io(s))return this.nativeExtensionProvider=void 0,this.createPopupClient(t).acquireToken(e);if(s instanceof Je)return this.logger.verbose("acquireTokenPopup - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createPopupClient(t).acquireToken(e);throw this.browserStorage.setInteractionInProgress(!1),s}):i=this.createPopupClient(t).acquireToken(e),i.then(s=>(o.length<this.getAllAccounts().length?this.eventHandler.emitEvent(R.LOGIN_SUCCESS,b.Popup,s):this.eventHandler.emitEvent(R.ACQUIRE_TOKEN_SUCCESS,b.Popup,s),r.end({success:!0,accessTokenSize:s.accessToken.length,idTokenSize:s.idToken.length,accountType:Fn(s.account)}),s)).catch(s=>(o.length>0?this.eventHandler.emitEvent(R.ACQUIRE_TOKEN_FAILURE,b.Popup,null,s):this.eventHandler.emitEvent(R.LOGIN_FAILURE,b.Popup,null,s),r.end({success:!1},s),Promise.reject(s)))}trackPageVisibilityWithMeasurement(){let e=this.ssoSilentMeasurement||this.acquireTokenByCodeAsyncMeasurement;e&&(this.logger.info("Perf: Visibility change detected in ",e.event.name),e.increment({visibilityChangeCount:1}))}ssoSilent(e){return h(this,null,function*(){let t=this.getRequestCorrelationId(e),r=A(m({},e),{prompt:e.prompt,correlationId:t});this.ssoSilentMeasurement=this.performanceClient.startMeasurement(d.SsoSilent,t),this.ssoSilentMeasurement?.add({scenarioId:e.scenarioId,accountType:Fn(e.account)}),lh(this.initialized,this.ssoSilentMeasurement),this.ssoSilentMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),this.logger.verbose("ssoSilent called",t),this.eventHandler.emitEvent(R.SSO_SILENT_START,b.Silent,r);let o;return this.canUseNative(r)?o=this.acquireTokenNative(r,ie.ssoSilent).catch(i=>{if(i instanceof Qt&&io(i))return this.nativeExtensionProvider=void 0,this.createSilentIframeClient(r.correlationId).acquireToken(r);throw i}):o=this.createSilentIframeClient(r.correlationId).acquireToken(r),o.then(i=>(this.eventHandler.emitEvent(R.SSO_SILENT_SUCCESS,b.Silent,i),this.ssoSilentMeasurement?.end({success:!0,isNativeBroker:i.fromNativeBroker,accessTokenSize:i.accessToken.length,idTokenSize:i.idToken.length,accountType:Fn(i.account)}),i)).catch(i=>{throw this.eventHandler.emitEvent(R.SSO_SILENT_FAILURE,b.Silent,null,i),this.ssoSilentMeasurement?.end({success:!1},i),i}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})})}acquireTokenByCode(e){return h(this,null,function*(){let t=this.getRequestCorrelationId(e);this.logger.trace("acquireTokenByCode called",t);let r=this.performanceClient.startMeasurement(d.AcquireTokenByCode,t);lh(this.initialized,r),this.eventHandler.emitEvent(R.ACQUIRE_TOKEN_BY_CODE_START,b.Silent,e),r.add({scenarioId:e.scenarioId});try{if(e.code&&e.nativeAccountId)throw T(Ws);if(e.code){let o=e.code,i=this.hybridAuthCodeResponses.get(o);return i?(this.logger.verbose("Existing acquireTokenByCode request found",t),r.discard()):(this.logger.verbose("Initiating new acquireTokenByCode request",t),i=this.acquireTokenByCodeAsync(A(m({},e),{correlationId:t})).then(s=>(this.eventHandler.emitEvent(R.ACQUIRE_TOKEN_BY_CODE_SUCCESS,b.Silent,s),this.hybridAuthCodeResponses.delete(o),r.end({success:!0,isNativeBroker:s.fromNativeBroker,accessTokenSize:s.accessToken.length,idTokenSize:s.idToken.length,accountType:Fn(s.account)}),s)).catch(s=>{throw this.hybridAuthCodeResponses.delete(o),this.eventHandler.emitEvent(R.ACQUIRE_TOKEN_BY_CODE_FAILURE,b.Silent,null,s),r.end({success:!1},s),s}),this.hybridAuthCodeResponses.set(o,i)),yield i}else if(e.nativeAccountId)if(this.canUseNative(e,e.nativeAccountId)){let o=yield this.acquireTokenNative(A(m({},e),{correlationId:t}),ie.acquireTokenByCode,e.nativeAccountId).catch(i=>{throw i instanceof Qt&&io(i)&&(this.nativeExtensionProvider=void 0),i});return r.end({accountType:Fn(o.account),success:!0}),o}else throw T(Ys);else throw T(Ks)}catch(o){throw this.eventHandler.emitEvent(R.ACQUIRE_TOKEN_BY_CODE_FAILURE,b.Silent,null,o),r.end({success:!1},o),o}})}acquireTokenByCodeAsync(e){return h(this,null,function*(){return this.logger.trace("acquireTokenByCodeAsync called",e.correlationId),this.acquireTokenByCodeAsyncMeasurement=this.performanceClient.startMeasurement(d.AcquireTokenByCodeAsync,e.correlationId),this.acquireTokenByCodeAsyncMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),yield this.createSilentAuthCodeClient(e.correlationId).acquireToken(e).then(o=>(this.acquireTokenByCodeAsyncMeasurement?.end({success:!0,fromCache:o.fromCache,isNativeBroker:o.fromNativeBroker}),o)).catch(o=>{throw this.acquireTokenByCodeAsyncMeasurement?.end({success:!1},o),o}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})})}acquireTokenFromCache(e,t){return h(this,null,function*(){switch(this.performanceClient.addQueueMeasurement(d.AcquireTokenFromCache,e.correlationId),t){case pt.Default:case pt.AccessToken:case pt.AccessTokenAndRefreshToken:let r=this.createSilentCacheClient(e.correlationId);return C(r.acquireToken.bind(r),d.SilentCacheClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e);default:throw v(Fe.tokenRefreshRequired)}})}acquireTokenByRefreshToken(e,t){return h(this,null,function*(){switch(this.performanceClient.addQueueMeasurement(d.AcquireTokenByRefreshToken,e.correlationId),t){case pt.Default:case pt.AccessTokenAndRefreshToken:case pt.RefreshToken:case pt.RefreshTokenAndNetwork:let r=this.createSilentRefreshClient(e.correlationId);return C(r.acquireToken.bind(r),d.SilentRefreshClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e);default:throw v(Fe.tokenRefreshRequired)}})}acquireTokenBySilentIframe(e){return h(this,null,function*(){this.performanceClient.addQueueMeasurement(d.AcquireTokenBySilentIframe,e.correlationId);let t=this.createSilentIframeClient(e.correlationId);return C(t.acquireToken.bind(t),d.SilentIframeClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e)})}logout(e){return h(this,null,function*(){let t=this.getRequestCorrelationId(e);return this.logger.warning("logout API is deprecated and will be removed in msal-browser v3.0.0. Use logoutRedirect instead.",t),this.logoutRedirect(m({correlationId:t},e))})}logoutRedirect(e){return h(this,null,function*(){let t=this.getRequestCorrelationId(e);return jf(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0),this.createRedirectClient(t).logout(e)})}logoutPopup(e){try{let t=this.getRequestCorrelationId(e);return _l(this.initialized),this.browserStorage.setInteractionInProgress(!0),this.createPopupClient(t).logout(e)}catch(t){return Promise.reject(t)}}clearCache(e){return h(this,null,function*(){if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, returning early.");return}let t=this.getRequestCorrelationId(e);return this.createSilentCacheClient(t).logout(e)})}getAllAccounts(e){let t=this.getRequestCorrelationId();return sw(this.logger,this.browserStorage,this.isBrowserEnvironment,t,e)}getAccount(e){let t=this.getRequestCorrelationId();return aw(e,this.logger,this.browserStorage,t)}getAccountByUsername(e){let t=this.getRequestCorrelationId();return cw(e,this.logger,this.browserStorage,t)}getAccountByHomeId(e){let t=this.getRequestCorrelationId();return lw(e,this.logger,this.browserStorage,t)}getAccountByLocalId(e){let t=this.getRequestCorrelationId();return uw(e,this.logger,this.browserStorage,t)}setActiveAccount(e){let t=this.getRequestCorrelationId();dw(e,this.browserStorage,t)}getActiveAccount(){let e=this.getRequestCorrelationId();return fw(this.browserStorage,e)}hydrateCache(e,t){return h(this,null,function*(){this.logger.verbose("hydrateCache called");let r=ge.createFromAccountInfo(e.account,e.cloudGraphHostName,e.msGraphHost);return this.browserStorage.setAccount(r,e.correlationId),e.fromNativeBroker?(this.logger.verbose("Response was from native broker, storing in-memory"),this.nativeInternalStorage.hydrateCache(e,t)):this.browserStorage.hydrateCache(e,t)})}acquireTokenNative(e,t,r){return h(this,null,function*(){if(this.logger.trace("acquireTokenNative called"),!this.nativeExtensionProvider)throw T(Yt);return new Jt(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,t,this.performanceClient,this.nativeExtensionProvider,r||this.getNativeAccountId(e),this.nativeInternalStorage,e.correlationId).acquireToken(e)})}canUseNative(e,t){if(this.logger.trace("canUseNative called"),!Lt.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider,e.authenticationScheme))return this.logger.trace("canUseNative: isNativeAvailable returned false, returning false"),!1;if(e.prompt)switch(e.prompt){case me.NONE:case me.CONSENT:case me.LOGIN:this.logger.trace("canUseNative: prompt is compatible with native flow");break;default:return this.logger.trace(`canUseNative: prompt = ${e.prompt} is not compatible with native flow, returning false`),!1}return!t&&!this.getNativeAccountId(e)?(this.logger.trace("canUseNative: nativeAccountId is not available, returning false"),!1):!0}getNativeAccountId(e){let t=e.account||this.getAccount({loginHint:e.loginHint,sid:e.sid})||this.getActiveAccount();return t&&t.nativeAccountId||""}createPopupClient(e){return new nh(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createRedirectClient(e){return new rh(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createSilentIframeClient(e){return new oh(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,ie.ssoSilent,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createSilentCacheClient(e){return new aa(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,e)}createSilentRefreshClient(e){return new ih(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,e)}createSilentAuthCodeClient(e){return new ch(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,ie.acquireTokenByCode,this.performanceClient,this.nativeExtensionProvider,e)}addEventCallback(e,t){return this.eventHandler.addEventCallback(e,t)}removeEventCallback(e){this.eventHandler.removeEventCallback(e)}addPerformanceCallback(e){return Hf(),this.performanceClient.addPerformanceCallback(e)}removePerformanceCallback(e){return this.performanceClient.removePerformanceCallback(e)}enableAccountStorageEvents(){typeof window>"u"||(this.listeningToStorageEvents?this.logger.verbose("Account storage listener already registered."):(this.logger.verbose("Adding account storage listener."),this.listeningToStorageEvents=!0,window.addEventListener("storage",this.handleAccountCacheChange)))}disableAccountStorageEvents(){typeof window>"u"||(this.listeningToStorageEvents?(this.logger.verbose("Removing account storage listener."),window.removeEventListener("storage",this.handleAccountCacheChange),this.listeningToStorageEvents=!1):this.logger.verbose("No account storage listener registered."))}handleAccountCacheChange(e){try{e.key?.includes(De.ACTIVE_ACCOUNT_FILTERS)&&this.eventHandler.emitEvent(R.ACTIVE_ACCOUNT_CHANGED);let t=e.newValue||e.oldValue;if(!t)return;let r=JSON.parse(t);if(typeof r!="object"||!ge.isAccountEntity(r))return;let i=cr.toObject(new ge,r).getAccountInfo();!e.oldValue&&e.newValue?(this.logger.info("Account was added to cache in a different window"),this.eventHandler.emitEvent(R.ACCOUNT_ADDED,void 0,i)):!e.newValue&&e.oldValue&&(this.logger.info("Account was removed from cache in a different window"),this.eventHandler.emitEvent(R.ACCOUNT_REMOVED,void 0,i))}catch{return}}getTokenCache(){return this.tokenCache}getLogger(){return this.logger}setLogger(e){this.logger=e}initializeWrapperLibrary(e,t){this.browserStorage.setWrapperMetadata(e,t)}setNavigationClient(e){this.navigationClient=e}getConfiguration(){return this.config}getPerformanceClient(){return this.performanceClient}isBrowserEnv(){return this.isBrowserEnvironment}getRequestCorrelationId(e){return e?.correlationId?e.correlationId:this.isBrowserEnvironment?Ze():y.EMPTY_STRING}loginRedirect(e){return h(this,null,function*(){let t=this.getRequestCorrelationId(e);return this.logger.verbose("loginRedirect called",t),this.acquireTokenRedirect(m({correlationId:t},e||Uy))})}loginPopup(e){let t=this.getRequestCorrelationId(e);return this.logger.verbose("loginPopup called",t),this.acquireTokenPopup(m({correlationId:t},e||Uy))}acquireTokenSilent(e){return h(this,null,function*(){let t=this.getRequestCorrelationId(e),r=this.performanceClient.startMeasurement(d.AcquireTokenSilent,t);r.add({cacheLookupPolicy:e.cacheLookupPolicy,scenarioId:e.scenarioId}),lh(this.initialized,r),this.logger.verbose("acquireTokenSilent called",t);let o=e.account||this.getActiveAccount();if(!o)throw T(Bs);r.add({accountType:Fn(o)});let i={clientId:this.config.auth.clientId,authority:e.authority||y.EMPTY_STRING,scopes:e.scopes,homeAccountIdentifier:o.homeAccountId,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid,shrOptions:e.shrOptions},s=JSON.stringify(i),a=this.activeSilentTokenRequests.get(s);if(typeof a>"u"){this.logger.verbose("acquireTokenSilent called for the first time, storing active request",t);let c=C(this.acquireTokenSilentAsync.bind(this),d.AcquireTokenSilentAsync,this.logger,this.performanceClient,t)(A(m({},e),{correlationId:t}),o).then(l=>(this.activeSilentTokenRequests.delete(s),r.end({success:!0,fromCache:l.fromCache,isNativeBroker:l.fromNativeBroker,cacheLookupPolicy:e.cacheLookupPolicy,accessTokenSize:l.accessToken.length,idTokenSize:l.idToken.length}),l)).catch(l=>{throw this.activeSilentTokenRequests.delete(s),r.end({success:!1},l),l});return this.activeSilentTokenRequests.set(s,c),A(m({},yield c),{state:e.state})}else return this.logger.verbose("acquireTokenSilent has been called previously, returning the result from the first call",t),r.discard(),A(m({},yield a),{state:e.state})})}acquireTokenSilentAsync(e,t){return h(this,null,function*(){let r=()=>this.trackPageVisibility(e.correlationId);this.performanceClient.addQueueMeasurement(d.AcquireTokenSilentAsync,e.correlationId),this.eventHandler.emitEvent(R.ACQUIRE_TOKEN_START,b.Silent,e),e.correlationId&&this.performanceClient.incrementFields({visibilityChangeCount:0},e.correlationId),document.addEventListener("visibilitychange",r);let o=yield C(pw,d.InitializeSilentRequest,this.logger,this.performanceClient,e.correlationId)(e,t,this.config,this.performanceClient,this.logger),i=e.cacheLookupPolicy||pt.Default;return this.acquireTokenSilentNoIframe(o,i).catch(a=>h(this,null,function*(){if(dO(a,i))if(this.activeIframeRequest)if(i!==pt.Skip){let[l,u]=this.activeIframeRequest;this.logger.verbose(`Iframe request is already in progress, awaiting resolution for request with correlationId: ${u}`,o.correlationId);let f=this.performanceClient.startMeasurement(d.AwaitConcurrentIframe,o.correlationId);f.add({awaitIframeCorrelationId:u});let g=yield l;if(f.end({success:g}),g)return this.logger.verbose(`Parallel iframe request with correlationId: ${u} succeeded. Retrying cache and/or RT redemption`,o.correlationId),this.acquireTokenSilentNoIframe(o,i);throw this.logger.info(`Iframe request with correlationId: ${u} failed. Interaction is required.`),a}else return this.logger.warning("Another iframe request is currently in progress and CacheLookupPolicy is set to Skip. This may result in degraded performance and/or reliability for both calls. Please consider changing the CacheLookupPolicy to take advantage of request queuing and token cache.",o.correlationId),C(this.acquireTokenBySilentIframe.bind(this),d.AcquireTokenBySilentIframe,this.logger,this.performanceClient,o.correlationId)(o);else{let l;return this.activeIframeRequest=[new Promise(u=>{l=u}),o.correlationId],this.logger.verbose("Refresh token expired/invalid or CacheLookupPolicy is set to Skip, attempting acquire token by iframe.",o.correlationId),C(this.acquireTokenBySilentIframe.bind(this),d.AcquireTokenBySilentIframe,this.logger,this.performanceClient,o.correlationId)(o).then(u=>(l(!0),u)).catch(u=>{throw l(!1),u}).finally(()=>{this.activeIframeRequest=void 0})}else throw a})).then(a=>(this.eventHandler.emitEvent(R.ACQUIRE_TOKEN_SUCCESS,b.Silent,a),e.correlationId&&this.performanceClient.addFields({fromCache:a.fromCache,isNativeBroker:a.fromNativeBroker},e.correlationId),a)).catch(a=>{throw this.eventHandler.emitEvent(R.ACQUIRE_TOKEN_FAILURE,b.Silent,null,a),a}).finally(()=>{document.removeEventListener("visibilitychange",r)})})}acquireTokenSilentNoIframe(e,t){return h(this,null,function*(){return Lt.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider,e.authenticationScheme)&&e.account.nativeAccountId?(this.logger.verbose("acquireTokenSilent - attempting to acquire token from native platform"),this.acquireTokenNative(e,ie.acquireTokenSilent_silentFlow).catch(r=>h(this,null,function*(){throw r instanceof Qt&&io(r)?(this.logger.verbose("acquireTokenSilent - native platform unavailable, falling back to web flow"),this.nativeExtensionProvider=void 0,v(Fe.tokenRefreshRequired)):r}))):(this.logger.verbose("acquireTokenSilent - attempting to acquire token from web flow"),C(this.acquireTokenFromCache.bind(this),d.AcquireTokenFromCache,this.logger,this.performanceClient,e.correlationId)(e,t).catch(r=>{if(t===pt.AccessToken)throw r;return this.eventHandler.emitEvent(R.ACQUIRE_TOKEN_NETWORK_START,b.Silent,e),C(this.acquireTokenByRefreshToken.bind(this),d.AcquireTokenByRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,t)}))})}};function dO(n,e){let t=!(n instanceof Je&&n.subError!==dr.badToken),r=n.errorCode===be.INVALID_GRANT_ERROR||n.errorCode===Fe.tokenRefreshRequired,o=t&&r||n.errorCode===dr.noTokensFound||n.errorCode===dr.refreshTokenExpired,i=FS.includes(e);return o&&i}function _w(n,e){return h(this,null,function*(){let t=new qf(n);return yield t.initialize(),ca.createController(t,e)})}var kl=class n{static createPublicClientApplication(e){return h(this,null,function*(){let t=yield _w(e);return new n(e,t)})}constructor(e,t){this.controller=t||new ca(new qf(e))}initialize(e){return h(this,null,function*(){return this.controller.initialize(e)})}acquireTokenPopup(e){return h(this,null,function*(){return this.controller.acquireTokenPopup(e)})}acquireTokenRedirect(e){return this.controller.acquireTokenRedirect(e)}acquireTokenSilent(e){return this.controller.acquireTokenSilent(e)}acquireTokenByCode(e){return this.controller.acquireTokenByCode(e)}addEventCallback(e,t){return this.controller.addEventCallback(e,t)}removeEventCallback(e){return this.controller.removeEventCallback(e)}addPerformanceCallback(e){return this.controller.addPerformanceCallback(e)}removePerformanceCallback(e){return this.controller.removePerformanceCallback(e)}enableAccountStorageEvents(){this.controller.enableAccountStorageEvents()}disableAccountStorageEvents(){this.controller.disableAccountStorageEvents()}getAccount(e){return this.controller.getAccount(e)}getAccountByHomeId(e){return this.controller.getAccountByHomeId(e)}getAccountByLocalId(e){return this.controller.getAccountByLocalId(e)}getAccountByUsername(e){return this.controller.getAccountByUsername(e)}getAllAccounts(e){return this.controller.getAllAccounts(e)}handleRedirectPromise(e){return this.controller.handleRedirectPromise(e)}loginPopup(e){return this.controller.loginPopup(e)}loginRedirect(e){return this.controller.loginRedirect(e)}logout(e){return this.controller.logout(e)}logoutRedirect(e){return this.controller.logoutRedirect(e)}logoutPopup(e){return this.controller.logoutPopup(e)}ssoSilent(e){return this.controller.ssoSilent(e)}getTokenCache(){return this.controller.getTokenCache()}getLogger(){return this.controller.getLogger()}setLogger(e){this.controller.setLogger(e)}setActiveAccount(e){this.controller.setActiveAccount(e)}getActiveAccount(){return this.controller.getActiveAccount()}initializeWrapperLibrary(e,t){return this.controller.initializeWrapperLibrary(e,t)}setNavigationClient(e){this.controller.setNavigationClient(e)}getConfiguration(){return this.controller.getConfiguration()}hydrateCache(e,t){return h(this,null,function*(){return this.controller.hydrateCache(e,t)})}clearCache(e){return this.controller.clearCache(e)}};var Ol=class{static getInteractionStatusFromEvent(e,t){switch(e.eventType){case R.LOGIN_START:return Ge.Login;case R.SSO_SILENT_START:return Ge.SsoSilent;case R.ACQUIRE_TOKEN_START:if(e.interactionType===b.Redirect||e.interactionType===b.Popup)return Ge.AcquireToken;break;case R.HANDLE_REDIRECT_START:return Ge.HandleRedirect;case R.LOGOUT_START:return Ge.Logout;case R.SSO_SILENT_SUCCESS:case R.SSO_SILENT_FAILURE:if(t&&t!==Ge.SsoSilent)break;return Ge.None;case R.LOGOUT_END:if(t&&t!==Ge.Logout)break;return Ge.None;case R.HANDLE_REDIRECT_END:if(t&&t!==Ge.HandleRedirect)break;return Ge.None;case R.LOGIN_SUCCESS:case R.LOGIN_FAILURE:case R.ACQUIRE_TOKEN_SUCCESS:case R.ACQUIRE_TOKEN_FAILURE:case R.RESTORE_FROM_BFCACHE:if(e.interactionType===b.Redirect||e.interactionType===b.Popup){if(t&&t!==Ge.Login&&t!==Ge.AcquireToken)break;return Ge.None}break}return null}};var Dw="@azure/msal-angular",Wy="3.1.0",uh=new k("MSAL_INSTANCE"),fO=new k("MSAL_GUARD_CONFIG");var hO=new k("MSAL_BROADCAST_CONFIG"),gr=(()=>{class n{constructor(t,r){this.instance=t,this.location=r;let o=this.location.path(!0).split("#").pop();o&&(this.redirectHash=`#${o}`),this.instance.initializeWrapperLibrary(By.Angular,Wy)}initialize(){return se(this.instance.initialize())}acquireTokenPopup(t){return se(this.instance.acquireTokenPopup(t))}acquireTokenRedirect(t){return se(this.instance.acquireTokenRedirect(t))}acquireTokenSilent(t){return se(this.instance.acquireTokenSilent(t))}handleRedirectObservable(t){return se(this.instance.initialize().then(()=>this.instance.handleRedirectPromise(t||this.redirectHash)))}loginPopup(t){return se(this.instance.loginPopup(t))}loginRedirect(t){return se(this.instance.loginRedirect(t))}logout(t){return se(this.instance.logout(t))}logoutRedirect(t){return se(this.instance.logoutRedirect(t))}logoutPopup(t){return se(this.instance.logoutPopup(t))}ssoSilent(t){return se(this.instance.ssoSilent(t))}getLogger(){return this.logger||(this.logger=this.instance.getLogger().clone(Dw,Wy)),this.logger}setLogger(t){this.logger=t.clone(Dw,Wy),this.instance.setLogger(t)}}return n.\u0275fac=function(t){return new(t||n)(P(uh),P(Kn))},n.\u0275prov=O({token:n,factory:n.\u0275fac}),n})(),Yy=(()=>{class n{constructor(t,r,o){this.msalInstance=t,this.authService=r,this.msalBroadcastConfig=o,this.msalBroadcastConfig&&this.msalBroadcastConfig.eventsToReplay>0?(this.authService.getLogger().verbose(`BroadcastService - eventsToReplay set on BroadcastConfig, replaying the last ${this.msalBroadcastConfig.eventsToReplay} events`),this._msalSubject=new ma(this.msalBroadcastConfig.eventsToReplay)):this._msalSubject=new we,this.msalSubject$=this._msalSubject.asObservable(),this._inProgress=new ve(Ge.Startup),this.inProgress$=this._inProgress.asObservable(),this.msalInstance.addEventCallback(i=>{this._msalSubject.next(i);let s=Ol.getInteractionStatusFromEvent(i,this._inProgress.value);s!==null&&(this.authService.getLogger().verbose(`BroadcastService - ${i.eventType} results in setting inProgress from ${this._inProgress.value} to ${s}`),this._inProgress.next(s))})}}return n.\u0275fac=function(t){return new(t||n)(P(uh),P(gr),P(hO,8))},n.\u0275prov=O({token:n,factory:n.\u0275fac}),n})(),bw=(()=>{class n{constructor(t,r,o,i,s){this.msalGuardConfig=t,this.msalBroadcastService=r,this.authService=o,this.location=i,this.router=s,this.msalBroadcastService.inProgress$.subscribe()}parseUrl(t){return this.router.parseUrl(t)}getDestinationUrl(t){this.authService.getLogger().verbose("Guard - getting destination url");let r=document.getElementsByTagName("base"),o=this.location.normalize(r.length?r[0].href:window.location.origin),i=this.location.prepareExternalUrl(t);return i.startsWith("#")?(this.authService.getLogger().verbose("Guard - destination by hash routing"),`${o}/${i}`):`${o}${t}`}loginInteractively(t){let r=typeof this.msalGuardConfig.authRequest=="function"?this.msalGuardConfig.authRequest(this.authService,t):m({},this.msalGuardConfig.authRequest);if(this.msalGuardConfig.interactionType===b.Popup)return this.authService.getLogger().verbose("Guard - logging in by popup"),this.authService.loginPopup(r).pipe(K(i=>(this.authService.getLogger().verbose("Guard - login by popup successful, can activate, setting active account"),this.authService.instance.setActiveAccount(i.account),!0)));this.authService.getLogger().verbose("Guard - logging in by redirect");let o=this.getDestinationUrl(t.url);return this.authService.loginRedirect(m({redirectStartPage:o},r)).pipe(K(()=>!1))}activateHelper(t){if(this.msalGuardConfig.interactionType!==b.Popup&&this.msalGuardConfig.interactionType!==b.Redirect)throw new ra("invalid_interaction_type","Invalid interaction type provided to MSAL Guard. InteractionType.Popup or InteractionType.Redirect must be provided in the MsalGuardConfiguration");if(this.authService.getLogger().verbose("MSAL Guard activated"),typeof window<"u"){if(j.hashContainsKnownProperties(window.location.hash)&&Vf.isInIframe()&&!this.authService.instance.getConfiguration().system.allowRedirectInIframe)return this.authService.getLogger().warning("Guard - redirectUri set to page with MSAL Guard. It is recommended to not set redirectUri to a page that requires authentication."),x(!1)}else return this.authService.getLogger().info("Guard - window is undefined, MSAL does not support server-side token acquisition"),x(!0);this.msalGuardConfig.loginFailedRoute&&(this.loginFailedRoute=this.parseUrl(this.msalGuardConfig.loginFailedRoute));let r=this.location.path(!0);return this.authService.initialize().pipe(Xt(()=>this.authService.handleRedirectObservable()),Xt(()=>{if(!this.authService.instance.getAllAccounts().length)return t?(this.authService.getLogger().verbose("Guard - no accounts retrieved, log in required to activate"),this.loginInteractively(t)):(this.authService.getLogger().verbose("Guard - no accounts retrieved, no state, cannot load"),x(!1));if(this.authService.getLogger().verbose("Guard - at least 1 account exists, can activate or load"),t){let o=this.includesCode(t.url),i=!!t.root&&!!t.root.fragment&&this.includesCode(`#${t.root.fragment}`),s=this.location.prepareExternalUrl(t.url).indexOf("#")===0;if(o&&(i||s))return this.authService.getLogger().info("Guard - Hash contains known code response, stopping navigation."),r.indexOf("#")>-1?x(this.parseUrl(this.location.path())):x(this.parseUrl(""))}return x(!0)}),pn(o=>(this.authService.getLogger().error("Guard - error while logging in, unable to activate"),this.authService.getLogger().errorPii(`Guard - error: ${o.message}`),this.loginFailedRoute&&t?(this.authService.getLogger().verbose("Guard - loginFailedRoute set, redirecting"),x(this.loginFailedRoute)):x(!1))))}includesCode(t){return t.lastIndexOf("/code")>-1&&t.lastIndexOf("/code")===t.length-5||t.indexOf("#code=")>-1||t.indexOf("&code=")>-1}canActivate(t,r){return this.authService.getLogger().verbose("Guard - canActivate"),this.activateHelper(r)}canActivateChild(t,r){return this.authService.getLogger().verbose("Guard - canActivateChild"),this.activateHelper(r)}canMatch(){return this.authService.getLogger().verbose("Guard - canLoad"),this.activateHelper()}}return n.\u0275fac=function(t){return new(t||n)(P(fO),P(Yy),P(gr),P(Kn),P(Kt))},n.\u0275prov=O({token:n,factory:n.\u0275fac}),n})();var ao=class n{msalService=E(gr);userProfileSubject=new ve(null);userProfile$=this.userProfileSubject.asObservable();isAuthenticatedSubject=new ve(!1);isAuthenticated$=this.isAuthenticatedSubject.asObservable();isLoadingSubject=new ve(!1);isLoading$=this.isLoadingSubject.asObservable();isMsalInitialized=!1;constructor(){this.checkMSALInitialization()}checkMSALInitialization(){try{let e=this.msalService.instance.getAllAccounts();e.length>0?(this.msalService.instance.setActiveAccount(e[0]),this.updateUserProfile(e[0]),this.isAuthenticatedSubject.next(!0),this.isMsalInitialized=!0):this.isMsalInitialized=!0}catch{}}updateUserProfile(e){let t={name:e.name||"User",email:e.username||"",username:e.username||"",roles:e.idTokenClaims?.roles||[]};this.userProfileSubject.next(t)}ensureMSALInitialized(){return new Promise(e=>{if(this.isMsalInitialized){e(!0);return}this.msalService.instance.initialize().then(()=>{this.isMsalInitialized=!0,this.checkMSALInitialization(),e(!0)}).catch(t=>{e(!1)})})}login(){this.isLoadingSubject.next(!0),this.ensureMSALInitialized().then(e=>{if(!e){console.error("\u274C Cannot login: MSAL not initialized"),this.isLoadingSubject.next(!1);return}this.msalService.loginPopup({scopes:["user.read"],prompt:"select_account"}).subscribe({next:t=>{let r=this.msalService.instance.getAllAccounts();r.length>0&&(this.msalService.instance.setActiveAccount(r[0]),this.updateUserProfile(r[0]),this.isAuthenticatedSubject.next(!0)),this.isLoadingSubject.next(!1)},error:t=>{console.error("\u274C Login failed:",t),this.isLoadingSubject.next(!1)},complete:()=>{}})})}logout(){this.isLoadingSubject.next(!0),this.msalService.logoutPopup({mainWindowRedirectUri:"/login"}).subscribe({next:()=>{this.userProfileSubject.next(null),this.isAuthenticatedSubject.next(!1),this.isLoadingSubject.next(!1)},error:e=>{console.error("\u274C Logout failed:",e),this.isLoadingSubject.next(!1)}})}getAccessToken(){return h(this,null,function*(){if(!(yield this.ensureMSALInitialized()))throw new Error("MSAL not initialized");try{let t=this.msalService.instance.getAllAccounts();if(t.length===0)throw new Error("No user account found");let r=yield this.msalService.acquireTokenSilent({scopes:["user.read"],account:t[0]}).toPromise();return r?.accessToken||""}catch(t){console.error("\u274C Failed to get access token silently:",t);try{return(yield this.msalService.acquireTokenPopup({scopes:["user.read"]}).toPromise())?.accessToken||""}catch(r){throw console.error("\u274C Failed to get token via popup:",r),r}}})}getBackendToken(){return h(this,null,function*(){let e=this.msalService.instance.getActiveAccount();if(!e)throw new Error("User not logged in");let t="api://f75c19a9-c006-47d7-98cc-f1b5638e6af6/access_as_user";try{return(yield this.msalService.acquireTokenSilent({account:e,scopes:[t]}).toPromise())?.accessToken||""}catch{return(yield this.msalService.acquireTokenPopup({scopes:[t]}).toPromise())?.accessToken||""}})}getCurrentUser(){return this.userProfileSubject.value}getMSALStatus(){return this.isMsalInitialized?"Initialized":"Not Initialized"}static \u0275fac=function(t){return new(t||n)};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})};var gO=(n,e,t)=>({"alert-success":n,"alert-warning":e,"alert-info":t}),mO=(n,e,t)=>({"bi-check-circle-fill":n,"bi-exclamation-triangle-fill":e,"bi-hourglass-split":t});function yO(n,e){n&1&&(M(0,"span"),L(1,"\u2705 Ready for authentication"),D())}function vO(n,e){n&1&&(M(0,"span"),L(1,'\u26A0\uFE0F Click "Initialize MSAL" first'),D())}function CO(n,e){n&1&&(M(0,"span"),L(1,"\u{1F504} Checking initialization status..."),D())}function EO(n,e){n&1&&(M(0,"span"),L(1,"\u{1F504} Initializing MSAL..."),D())}function IO(n,e){n&1&&(M(0,"span",27),L(1,"Sign in with Microsoft"),D())}function TO(n,e){n&1&&(M(0,"span",27),L(1,"Initializing Azure AD..."),D())}function SO(n,e){n&1&&(M(0,"p",32),L(1," Opening Azure AD login popup... "),D())}function wO(n,e){n&1&&(M(0,"p",32),L(1," Initializing Microsoft Authentication Library... "),D())}function AO(n,e){if(n&1&&(M(0,"div",28)(1,"div",29)(2,"span",30),L(3,"Loading..."),D()(),bt(4,SO,2,0,"p",31)(5,wO,2,0,"p",31),D()),n&2){let t=Sn();q(4),le("ngIf",t.msalStatus!=="Initializing..."),q(),le("ngIf",t.msalStatus==="Initializing...")}}function _O(n,e){if(n&1&&(M(0,"div",33),te(1,"i",34),L(2),te(3,"button",35),D()),n&2){let t=Sn();q(2),at(" ",t.errorMessage," ")}}var dh=class n{authService=E(ao);router=E(Kt);isLoading=!1;errorMessage="";msalStatus="Checking...";ngOnInit(){this.authService.isLoading$.subscribe(e=>{this.isLoading=e}),this.authService.isAuthenticated$.subscribe(e=>{e&&this.router.navigate(["/dashboard"])}),setTimeout(()=>{this.msalStatus=this.authService.getMSALStatus()},1e3)}onLogin(){this.errorMessage="",this.msalStatus="Initializing...",setTimeout(()=>{this.authService.login()},100)}testMSAL(){this.authService.login()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Tn({type:n,selectors:[["app-login"]],decls:39,vars:20,consts:[[1,"container-fluid","gradient-bg","min-vh-100","d-flex","align-items-center"],[1,"container"],[1,"row","justify-content-center"],[1,"col-lg-6","col-md-8"],[1,"card","border-0","custom-shadow"],[1,"card-header","bg-primary","text-white","py-4"],[1,"d-flex","align-items-center"],[1,"bi","bi-shield-lock-fill","fs-1","me-3"],[1,"h3","mb-1"],[1,"mb-0","opacity-75"],[1,"card-body","p-4","p-md-5"],[1,"alert",3,"ngClass"],[1,"bi",3,"ngClass"],[1,"ms-3"],[1,"small","mt-1"],[4,"ngIf"],[1,"text-center","mb-4"],[1,"btn","btn-primary","btn-lg","px-5","py-3","w-100","hover-shadow",3,"click","disabled"],[1,"d-flex","align-items-center","justify-content-center"],[1,"bi","bi-microsoft","fs-4","me-3"],[1,"text-start"],["class","fs-5",4,"ngIf"],["class","mt-3",4,"ngIf"],["class","alert alert-danger alert-dismissible fade show","role","alert",4,"ngIf"],[1,"card-footer","bg-light","text-center","py-3"],[1,"text-muted"],[1,"bi","bi-shield-lock","me-1"],[1,"fs-5"],[1,"mt-3"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],["class","text-muted mt-2",4,"ngIf"],[1,"text-muted","mt-2"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show"],[1,"bi","bi-exclamation-triangle-fill","me-2"],["type","button","data-bs-dismiss","alert",1,"btn-close"]],template:function(t,r){t&1&&(M(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6),te(7,"i",7),M(8,"div")(9,"h1",8),L(10,"Azure AD Authentication"),D(),M(11,"p",9),L(12,"Sign in with your Microsoft account"),D()()()(),M(13,"div",10)(14,"div",11)(15,"div",6),te(16,"i",12),M(17,"div",13)(18,"strong"),L(19,"MSAL Status:"),D(),L(20),M(21,"div",14),bt(22,yO,2,0,"span",15)(23,vO,2,0,"span",15)(24,CO,2,0,"span",15)(25,EO,2,0,"span",15),D()()()(),M(26,"div",16)(27,"button",17),zn("click",function(){return r.onLogin()}),M(28,"div",18),te(29,"i",19),M(30,"div",20),bt(31,IO,2,0,"span",21)(32,TO,2,0,"span",21),D()()(),bt(33,AO,6,2,"div",22),D(),bt(34,_O,4,1,"div",23),D(),M(35,"div",24)(36,"small",25),te(37,"i",26),L(38," Ridene Application "),D()()()()()()()),t&2&&(q(14),le("ngClass",nd(12,gO,r.msalStatus==="Initialized",r.msalStatus==="Not Initialized",r.msalStatus==="Checking..."||r.msalStatus==="Initializing...")),q(2),le("ngClass",nd(16,mO,r.msalStatus==="Initialized",r.msalStatus==="Not Initialized",r.msalStatus==="Checking..."||r.msalStatus==="Initializing...")),q(4),at(" ",r.msalStatus," "),q(2),le("ngIf",r.msalStatus==="Initialized"),q(),le("ngIf",r.msalStatus==="Not Initialized"),q(),le("ngIf",r.msalStatus==="Checking..."),q(),le("ngIf",r.msalStatus==="Initializing..."),q(2),le("disabled",r.isLoading),q(4),le("ngIf",!r.isLoading),q(),le("ngIf",r.isLoading),q(),le("ngIf",r.isLoading),q(),le("ngIf",r.errorMessage))},dependencies:[Or,rc,oc],styles:[".gradient-bg[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1e3c72,#2a5298)}.microsoft-logo[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,20px);grid-template-rows:repeat(2,20px);gap:3px;width:46px;height:46px}.logo-square[_ngcontent-%COMP%]{width:20px;height:20px;border-radius:2px}.card[_ngcontent-%COMP%]{border-radius:15px;overflow:hidden}.card-header[_ngcontent-%COMP%]{border-radius:15px 15px 0 0!important}.list-group-item[_ngcontent-%COMP%]{background-color:transparent;border-color:#0000001a}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(90deg,#2b579a,#1e4a82);border:none;border-radius:10px}.btn-primary[_ngcontent-%COMP%]:hover{background:linear-gradient(90deg,#1e4a82,#153966);transform:translateY(-2px)}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.7;transform:none!important}.alert[_ngcontent-%COMP%]{border-radius:10px;border:none}"]})};function DO(n,e){if(n&1&&(M(0,"div",51)(1,"div",52),te(2,"i",53),M(3,"div")(4,"h4",54),L(5),D(),M(6,"p",19),L(7,"You are successfully authenticated with Azure Active Directory."),D()()()()),n&2){let t=Sn();q(5),at("Welcome, ",t.userProfile.name,"!")}}function bO(n,e){if(n&1&&(M(0,"span",55),te(1,"i",56),L(2),D()),n&2){let t=e.$implicit;q(2),at(" ",t," ")}}function RO(n,e){n&1&&(M(0,"span",57),te(1,"i",58),L(2," No roles assigned "),D())}function MO(n,e){if(n&1&&(M(0,"div",30)(1,"strong"),L(2,"Preview:"),D(),M(3,"code",66),L(4),D()()),n&2){let t=Sn(2);q(4),Lo(t.tokenInfo.preview)}}function NO(n,e){if(n&1&&(M(0,"div",65)(1,"strong"),L(2,"Message:"),D(),L(3),D()),n&2){let t=Sn(2);q(3),at(" ",t.tokenInfo.message," ")}}function kO(n,e){if(n&1&&(M(0,"div",65)(1,"strong"),L(2,"Error:"),D(),M(3,"span",67),L(4),D()()),n&2){let t=Sn(2);q(4),Lo(t.tokenInfo.error)}}function OO(n,e){if(n&1&&(M(0,"div",59)(1,"h5",60),L(2,"Token Information"),D(),M(3,"div",61)(4,"div",20)(5,"div",21)(6,"div",22)(7,"strong"),L(8,"Status:"),D(),M(9,"span",62),L(10),D()(),M(11,"div",22)(12,"strong"),L(13,"Length:"),D(),L(14),D(),bt(15,MO,5,1,"div",63)(16,NO,4,1,"div",64)(17,kO,5,1,"div",64),M(18,"div",65)(19,"strong"),L(20,"Timestamp:"),D(),L(21),kg(22,"date"),D()()()()()),n&2){let t=Sn();q(9),le("ngClass",t.tokenInfo.hasToken?"bg-success":"bg-danger"),q(),at(" ",t.tokenInfo.hasToken?"Available":"Unavailable"," "),q(4),at(" ",t.tokenInfo.length," characters "),q(),le("ngIf",t.tokenInfo.preview),q(),le("ngIf",t.tokenInfo.message),q(),le("ngIf",t.tokenInfo.error),q(4),at(" ",Og(22,7,t.tokenInfo.timestamp,"medium")," ")}}function PO(n,e){n&1&&(M(0,"div",68)(1,"div",69)(2,"span",70),L(3,"Loading..."),D()(),M(4,"p",71),L(5,"Acquiring token silently from Azure AD..."),D()())}var fh=class n{constructor(e){this.authService2=e}testBackend(){return h(this,null,function*(){let e=yield this.authService2.getBackendToken();console.log(e)})}authService=E(ao);router=E(Kt);userProfile=null;isLoading=!1;tokenInfo=null;ngOnInit(){this.authService.userProfile$.subscribe(e=>{this.userProfile=e}),this.authService.isAuthenticated$.subscribe(e=>{e||(console.log("\u{1F512} Not authenticated, redirecting to login"),this.router.navigate(["/login"]))}),this.authService.isLoading$.subscribe(e=>{this.isLoading=e})}getAccessToken(){return h(this,null,function*(){this.isLoading=!0;try{let e=yield this.authService.getAccessToken();this.tokenInfo={hasToken:!!e,length:e?.length||0,preview:e?"Token available":"No token",timestamp:new Date().toISOString()}}catch(e){this.tokenInfo={hasToken:!1,error:e.message||"Failed to get token"},console.error("\u274C Token acquisition failed:",e)}finally{this.isLoading=!1}})}simulateApiCall(){this.tokenInfo={hasToken:!0,message:"Simulated API call to Microsoft Graph",endpoint:"https://graph.microsoft.com/v1.0/me",timestamp:new Date().toISOString()},console.log("\u{1F517} Simulated API call")}clearData(){this.tokenInfo=null,console.log("\u{1F9F9} Data cleared")}logout(){console.log("\u{1F6AA} Logging out..."),this.authService.logout()}static \u0275fac=function(t){return new(t||n)(Ye(ao))};static \u0275cmp=Tn({type:n,selectors:[["app-dashboard"]],decls:91,vars:13,consts:[[1,"navbar","navbar-expand-lg","navbar-dark","bg-primary","shadow"],[1,"container"],["href","#",1,"navbar-brand","d-flex","align-items-center"],[1,"bi","bi-microsoft","me-2","fs-4"],[1,"fw-bold"],[1,"navbar-nav","ms-auto"],[1,"nav-item","dropdown"],["href","#","role","button","data-bs-toggle","dropdown",1,"nav-link","dropdown-toggle","d-flex","align-items-center"],[1,"avatar","bg-light","text-primary","rounded-circle","d-flex","align-items-center","justify-content-center","me-2",2,"width","36px","height","36px"],[1,"dropdown-menu","dropdown-menu-end"],[1,"dropdown-header"],[1,"bi","bi-person-badge","me-2"],[1,"dropdown-divider"],["role","button",1,"dropdown-item","text-danger",3,"click"],[1,"bi","bi-box-arrow-right","me-2"],[1,"container","py-4"],["class","alert alert-success mb-4",4,"ngIf"],[1,"card","border-0","shadow","mb-4"],[1,"card-header","bg-primary","text-white"],[1,"mb-0"],[1,"card-body"],[1,"row"],[1,"col-md-6","mb-3"],[1,"form-label","text-muted","small"],[1,"input-group"],[1,"input-group-text"],[1,"bi","bi-person"],["type","text","readonly","",1,"form-control",3,"value"],[1,"bi","bi-envelope"],[1,"bi","bi-at"],[1,"col-12","mb-3"],[1,"d-flex","flex-wrap","gap-2"],["class","badge bg-success py-2 px-3",4,"ngFor","ngForOf"],["class","badge bg-secondary py-2 px-3",4,"ngIf"],[1,"card-header","bg-warning","text-dark"],[1,"bi","bi-key-fill","me-2"],[1,"alert","alert-info","mb-4"],[1,"bi","bi-info-circle","me-2"],[1,"text-center","mb-4"],[1,"btn","btn-warning","btn-lg","px-5","me-3",3,"click","disabled"],[1,"bi","bi-key","me-2"],[1,"btn","btn-success","btn-lg","px-5","me-3",3,"click"],[1,"bi","bi-send","me-2"],[1,"btn","btn-outline-danger","btn-lg","px-5",3,"click"],[1,"bi","bi-trash","me-2"],["class","mt-4",4,"ngIf"],["class","text-center mt-4",4,"ngIf"],[1,"bg-dark","text-white","py-4","mt-5"],[1,"col-md-6"],[1,"bi","bi-microsoft","me-2"],[1,"mb-0","text-muted"],[1,"alert","alert-success","mb-4"],[1,"d-flex","align-items-center"],[1,"bi","bi-check-circle-fill","fs-3","me-3"],[1,"alert-heading","mb-1"],[1,"badge","bg-success","py-2","px-3"],[1,"bi","bi-shield-check","me-1"],[1,"badge","bg-secondary","py-2","px-3"],[1,"bi","bi-shield-x","me-1"],[1,"mt-4"],[1,"mb-3"],[1,"card","bg-light"],[1,"badge","ms-2",3,"ngClass"],["class","col-12 mb-3",4,"ngIf"],["class","col-12",4,"ngIf"],[1,"col-12"],[1,"d-block","mt-2","p-2","bg-dark","text-light","rounded"],[1,"text-danger"],[1,"text-center","mt-4"],["role","status",1,"spinner-border","text-warning",2,"width","3rem","height","3rem"],[1,"visually-hidden"],[1,"mt-3","text-muted"]],template:function(t,r){t&1&&(M(0,"nav",0)(1,"div",1)(2,"a",2),te(3,"i",3),M(4,"span",4),L(5,"Azure AD Dashboard"),D()(),M(6,"div",5)(7,"div",6)(8,"a",7)(9,"div",8)(10,"span",4),L(11),D()(),M(12,"span"),L(13),D()(),M(14,"ul",9)(15,"li")(16,"h6",10),te(17,"i",11),L(18),D()(),M(19,"li"),te(20,"hr",12),D(),M(21,"li")(22,"a",13),zn("click",function(){return r.logout()}),te(23,"i",14),L(24," Logout "),D()()()()()()(),M(25,"div",15),bt(26,DO,8,1,"div",16),M(27,"div",17)(28,"div",18)(29,"h4",19),te(30,"i",11),L(31," User Profile Information "),D()(),M(32,"div",20)(33,"div",21)(34,"div",22)(35,"label",23),L(36,"Full Name"),D(),M(37,"div",24)(38,"span",25),te(39,"i",26),D(),te(40,"input",27),D()(),M(41,"div",22)(42,"label",23),L(43,"Email Address"),D(),M(44,"div",24)(45,"span",25),te(46,"i",28),D(),te(47,"input",27),D()(),M(48,"div",22)(49,"label",23),L(50,"Username"),D(),M(51,"div",24)(52,"span",25),te(53,"i",29),D(),te(54,"input",27),D()(),M(55,"div",30)(56,"label",23),L(57,"Assigned Roles"),D(),M(58,"div",31),bt(59,bO,3,1,"span",32)(60,RO,3,0,"span",33),D()()()()(),M(61,"div",17)(62,"div",34)(63,"h4",19),te(64,"i",35),L(65," Access Token Management "),D()(),M(66,"div",20)(67,"div",36),te(68,"i",37),L(69," Access tokens are used to authenticate API requests to Microsoft Graph and other protected resources. "),D(),M(70,"div",38)(71,"button",39),zn("click",function(){return r.getAccessToken()}),te(72,"i",40),L(73),D(),M(74,"button",41),zn("click",function(){return r.simulateApiCall()}),te(75,"i",42),L(76," Simulate API Call "),D(),M(77,"button",43),zn("click",function(){return r.clearData()}),te(78,"i",44),L(79," Clear Data "),D()(),bt(80,OO,23,10,"div",45)(81,PO,6,0,"div",46),D()()(),M(82,"footer",47)(83,"div",1)(84,"div",21)(85,"div",48)(86,"h5"),te(87,"i",49),L(88," Azure AD Authentication Demo "),D(),M(89,"p",50),L(90,"Built with Angular 20+ and Bootstrap 5"),D()()()()()),t&2&&(q(11),Lo((r.userProfile==null||r.userProfile.name==null?null:r.userProfile.name.charAt(0))||"U"),q(2),Lo((r.userProfile==null?null:r.userProfile.name)||"User"),q(5),at(" ",r.userProfile==null?null:r.userProfile.name," "),q(8),le("ngIf",r.userProfile),q(14),le("value",(r.userProfile==null?null:r.userProfile.name)||"Not available"),q(7),le("value",(r.userProfile==null?null:r.userProfile.email)||"Not available"),q(7),le("value",(r.userProfile==null?null:r.userProfile.username)||"Not available"),q(5),le("ngForOf",r.userProfile==null?null:r.userProfile.roles),q(),le("ngIf",!(!(r.userProfile==null||r.userProfile.roles==null)&&r.userProfile.roles.length)),q(11),le("disabled",r.isLoading),q(2),at(" ",r.isLoading?"Getting Token...":"Get Access Token"," "),q(7),le("ngIf",r.tokenInfo),q(),le("ngIf",r.isLoading))},dependencies:[Or,rc,pd,oc,Yg],styles:[".avatar[_ngcontent-%COMP%]{width:36px;height:36px;display:flex;align-items:center;justify-content:center;font-weight:700;background:linear-gradient(45deg,#2196f3,#21cbf3)}.input-group-text[_ngcontent-%COMP%]{background-color:#f8f9fa;border-right:none}.form-control[_ngcontent-%COMP%]:read-only{background-color:#f8f9fa;border-left:none;cursor:default}.card[_ngcontent-%COMP%]{border-radius:10px}pre[_ngcontent-%COMP%]{background-color:#2d2d2d;color:#f8f8f2;border-radius:5px;font-size:.9em}"]})};var Rw=()=>{let n=E(gr),e=E(Kt);return n.instance.getAllAccounts().length>0?!0:(e.navigate(["/login"]),!1)};var Mw=[{path:"login",component:dh},{path:"dashboard",component:fh,canActivate:[Rw]},{path:"",redirectTo:"/login",pathMatch:"full"},{path:"**",redirectTo:"/login"}];var hh={production:!1,azureAd:{clientId:"0bf05ae1-b1d8-4017-9959-1842d2f13150",tenantId:"f75c19a9-c006-47d7-98cc-f1b5638e6af6",redirectUri:"https://angular-free-webapp-demo.azurewebsites.net/",authority:"https://login.microsoftonline.com/f75c19a9-c006-47d7-98cc-f1b5638e6af6",scopes:["user.read"]}};function xO(){let n=new kl({auth:{clientId:hh.azureAd.clientId,authority:hh.azureAd.authority,redirectUri:hh.azureAd.redirectUri,postLogoutRedirectUri:"/login"},cache:{cacheLocation:Se.SessionStorage,storeAuthStateInCookie:!1},system:{loggerOptions:{loggerCallback:(e,t,r)=>{if(!r)switch(e){case ne.Error:break;case ne.Info:break;case ne.Warning:break;case ne.Verbose:break}},logLevel:ne.Warning}}});return n.initialize().then(()=>{}).catch(e=>{}),n}function LO(n){return()=>n.instance.initialize().then(()=>{}).catch(e=>{})}var Nw={providers:[km(Mw),cm(),{provide:uh,useFactory:xO},gr,bw,Yy,{provide:"APP_INITIALIZER",useFactory:LO,deps:[gr],multi:!0}]};var ph=class n{title="Azure AD Bootstrap Demo";static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Tn({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){t&1&&te(0,"router-outlet")},dependencies:[Or,Mc],encapsulation:2})};im(ph,Nw).catch(n=>console.error(n));
